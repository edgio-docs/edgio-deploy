var _g=Object.create;var dr=Object.defineProperty,gg=Object.defineProperties,mg=Object.getOwnPropertyDescriptor,yg=Object.getOwnPropertyDescriptors,vg=Object.getOwnPropertyNames,ms=Object.getOwnPropertySymbols,Eg=Object.getPrototypeOf,Yn=Object.prototype.hasOwnProperty,su=Object.prototype.propertyIsEnumerable;var nu=(e,t,r)=>t in e?dr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,A=(e,t)=>{for(var r in t||(t={}))Yn.call(t,r)&&nu(e,r,t[r]);if(ms)for(var r of ms(t))su.call(t,r)&&nu(e,r,t[r]);return e},M=(e,t)=>gg(e,yg(t)),iu=e=>dr(e,"__esModule",{value:!0});var ou=(e,t)=>{var r={};for(var s in e)Yn.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&ms)for(var s of ms(e))t.indexOf(s)<0&&su.call(e,s)&&(r[s]=e[s]);return r};var d=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Rg=(e,t)=>{iu(e);for(var r in t)dr(e,r,{get:t[r],enumerable:!0})},Sg=(e,t,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of vg(t))!Yn.call(e,s)&&s!=="default"&&dr(e,s,{get:()=>t[s],enumerable:!(r=mg(t,s))||r.enumerable});return e},bg=e=>Sg(iu(dr(e!=null?_g(Eg(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var J=d(F=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});F.LAYER0_CONFIG_FILE="layer0.config.js";F.LAYER0_ASSET_ALIASES_FILE="asset-aliases.json";F.LAYER0_ENV_VARIABLES={config:"LAYER0_CONFIG",deploymentType:"LAYER0_DEPLOYMENT_TYPE",versionOverride:"LAYER0_VERSION_OVERRIDE"};F.LAYER0_DEPLOYMENT_TYPE_AWS="AWS";F.LAYER0_HEADERS_PREFIX="x-0-";F.LAYER0_MAX_USER_HEADERS_ALLOWED=70;F.LAYER0_TOO_MANY_HEADERS_STATUS_CODE=542;F.LAYER0_UNCACHED_PREFETCH_STATUS=412;F.ACTIONS={setHeader:"set-header",updateHeader:"update-header",removeHeader:"remove-header",syntheticRes:"synthetic-response",updatePath:"update-path",proxy:"proxy",addCookie:"add-cookie",updateCookie:"update-cookie",removeCookie:"remove-cookie"};F.BACKENDS={js:"__js__",static:"__static__",permanentStatic:"__permanent_static__",imageOptimizer:"__image_optimizer__"};F.JS_BACKEND_HOSTNAME="127.0.0.1";F.HTTP_METHODS={head:"head",get:"get",post:"post",delete:"delete",put:"put",patch:"patch",options:"options"};F.HTTP_HEADERS={authorization:"authorization",acceptEncoding:"accept-encoding",cacheControl:"cache-control",contentEncoding:"content-encoding",contentLength:"content-length",contentType:"content-type",cookie:"cookie",host:"host",location:"location",serverTiming:"server-timing",setCookie:"set-cookie",userAgent:"user-agent",vary:"vary",via:"via",xForwardedFor:"x-forwarded-for",xRequestId:"x-request-id",xSwCacheControl:"x-sw-cache-control",x0Browser:"x-0-browser",x0CacheControl:"x-0-cache-control",x0CachingStatus:"x-0-caching-status",x0ClientIp:"x-0-client-ip",x0Components:"x-0-components",x0Destination:"x-0-destination",x0Device:"x-0-device",x0DeviceIsBot:"x-0-device-is-bot",x0GeoCity:"x-0-geo-city",x0GeoCountryCode:"x-0-geo-country-code",x0GeoLatitude:"x-0-geo-latitude",x0GeoLongitude:"x-0-geo-longitude",x0GeoPostalCode:"x-0-geo-postal-code",x0MatchedRoutes:"x-0-matched-routes",x0Protocol:"x-0-protocol",x0Route:"x-0-route",x0Status:"x-0-status",x0SurrogateKey:"x-0-surrogate-key",x0T:"x-0-t",x0UserT:"x-0-user-t",x0Vendor:"x-0-vendor",x0Version:"x-0-version"};F.CACHING_STATUS={ok:"ok",private:"private",method:"method",bodyTooBig:"body-too-big",code:"code",setCookie:"set-cookie",noMaxAge:"no-max-age"};F.CACHEABLE_METHODS=new Set(["get","head"]);F.THROTTLED_QUERY_PARAM="layer0_prefetch";F.PREFETCH_QUERY_PARAM=F.THROTTLED_QUERY_PARAM;F.DEVTOOLS_PREFETCH_QUERY_PARAM="layer0_dt_pf";F.HEAD_QUERY_PARAM="layer0_head";F.POST_BODY_QUERY_PARAM="pref_layer0_body";F.METHOD_QUERY_PARAM="pref_layer0_method";F.ROUTES_FALLBACK="fallback";F.ROUTES_CATCH_GROUP="catch";F.LAYER0_IMAGE_OPTIMIZER_PATH="/__layer0_image_optimizer";F.IS_BROWSER=typeof window!="undefined";F.BROTLI_ENCODING="br";F.GZIP_ENCODING="gzip"});var kt=d(ct=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});var au=J();function uu(){return process.env[au.LAYER0_ENV_VARIABLES.deploymentType]===au.LAYER0_DEPLOYMENT_TYPE_AWS}ct.isCloud=uu;function Ag(){return process.env.LAYER0_LOCAL==="true"}ct.isLocal=Ag;function cu(){return process.env.NODE_ENV==="production"}ct.isProductionBuild=cu;function Cg(){return!uu()&&!cu()}ct.isLayer0RunDev=Cg;function xg(){return typeof window!="undefined"}ct.isBrowser=xg});var ys=d((Cw,lu)=>{"use strict";lu.exports=e=>{let t=/^\\\\\?\\/.test(e),r=/[^\u0000-\u0080]+/.test(e);return t||r?e:e.replace(/\\/g,"/")}});var lt=d((exports,module)=>{"use strict";var __importDefault=exports&&exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var slash_1=__importDefault(ys());function nonWebpackRequire(modulePath,{ignoreErrors=!1}={}){try{return eval("require")(slash_1.default(modulePath))}catch(e){if(ignoreErrors)return;throw e}}exports.default=nonWebpackRequire});var _u=d(ft=>{"use strict";var wg=ft&&ft.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ft,"__esModule",{value:!0});var Tg=kt(),fu=wg(lt()),hu="layer0",Qn;function Pg(e){return Tg.isLocal()?Og().runAndReturn(e):(global.__layer0_timings__=new pu,e())}ft.withContext=Pg;function du(){return global.__layer0_timings__||Hg()}function Og(){let e=fu.default("cls-hooked");return Qn||(Qn=e.createNamespace(hu)),Qn}function Hg(){return fu.default("cls-hooked").getNamespace(hu)}function Dg(e,t){try{let r=du(),s=r.get(e);return s==null&&(s=t,r.set(e,t)),s}catch{return t}}ft.get=Dg;function qg(e,t){try{du().set(e,t)}catch{throw new Error("set must be called within withContext")}}ft.set=qg;var pu=class{constructor(){this.values={}}get(t){return this.values[t]}set(t,r){this.values[t]=r}}});var ei=d(pe=>{"use strict";Object.defineProperty(pe,"__esModule",{value:!0});var vs=J(),Xn=_u();pe.NOT_ENDED_VALUE="na";var zn=class{constructor(t,r=!0){this.duration=0,this.ended=!1,this.name=t,(r?Jn():Zn()).push(this)}start(){return this.startTime=new Date,this.ended=!1,this}set(t){return this.discreteValue=t,this}end(){return this.startTime?(this.ended=!0,this.duration+=new Date().getTime()-this.startTime.getTime(),this):(console.warn(`Timing ${this.name} not started.`),this)}pause(){return this.end()}resume(){return this.start()}get value(){return this.discreteValue!=null?this.discreteValue:this.ended?this.duration:pe.NOT_ENDED_VALUE}};pe.InternalTiming=zn;function Lg(e){return(...t)=>Xn.withContext(()=>e(...t))}pe.withTimings=Lg;function Mg(e){var t;return(t=Jn().find(r=>r.name===e))===null||t===void 0?void 0:t.value}pe.getInternalTiming=Mg;function Jn(){return Xn.get("internalTimings",[])}function Zn(){return Xn.get("userTimings",[])}function Ig(e){let t=Zn(),r=Jn();t.length&&(e.setHeader(vs.HTTP_HEADERS.x0UserT,gu(t)),e.setHeader(vs.HTTP_HEADERS.serverTiming,Ng(e))),r.length&&e.setHeader(vs.HTTP_HEADERS.x0T,gu(r))}pe.addTimings=Ig;function gu(e){return e.map(t=>`${t.name}=${t.value}`).join(",")}function Ng(e){let t=e.getHeader(vs.HTTP_HEADERS.serverTiming),r=Zn().map(s=>`${s.name};dur=${s.value}`);return Array.isArray(t)?r.push(...t):t&&r.push(t),r.join(", ")}var mu=class extends zn{constructor(t){super(t,!1)}};pe.default=mu;var $g;(function(e){e.edgeCache="ecc",e.transformRequest="wa",e.transformResponse="wz",e.routeMatching="wr",e.proxying="wp"})($g=pe.InternalNames||(pe.InternalNames={}));var kg;(function(e){e.hit="hit",e.pass="pass",e.cached="cached"})(kg=pe.CacheValue||(pe.CacheValue={}))});var ri=d(ti=>{"use strict";Object.defineProperty(ti,"__esModule",{value:!0});ti.default=Bg;var jg=Fg(require("crypto"));function Fg(e){return e&&e.__esModule?e:{default:e}}var Es=new Uint8Array(256),Rs=Es.length;function Bg(){return Rs>Es.length-16&&(jg.default.randomFillSync(Es),Rs=0),Es.slice(Rs,Rs+=16)}});var yu=d(Ss=>{"use strict";Object.defineProperty(Ss,"__esModule",{value:!0});Ss.default=void 0;var Ug=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;Ss.default=Ug});var pr=d(bs=>{"use strict";Object.defineProperty(bs,"__esModule",{value:!0});bs.default=void 0;var Gg=Wg(yu());function Wg(e){return e&&e.__esModule?e:{default:e}}function Vg(e){return typeof e=="string"&&Gg.default.test(e)}var Kg=Vg;bs.default=Kg});var _r=d(As=>{"use strict";Object.defineProperty(As,"__esModule",{value:!0});As.default=void 0;var Yg=Qg(pr());function Qg(e){return e&&e.__esModule?e:{default:e}}var re=[];for(let e=0;e<256;++e)re.push((e+256).toString(16).substr(1));function Xg(e,t=0){let r=(re[e[t+0]]+re[e[t+1]]+re[e[t+2]]+re[e[t+3]]+"-"+re[e[t+4]]+re[e[t+5]]+"-"+re[e[t+6]]+re[e[t+7]]+"-"+re[e[t+8]]+re[e[t+9]]+"-"+re[e[t+10]]+re[e[t+11]]+re[e[t+12]]+re[e[t+13]]+re[e[t+14]]+re[e[t+15]]).toLowerCase();if(!(0,Yg.default)(r))throw TypeError("Stringified UUID is invalid");return r}var zg=Xg;As.default=zg});var Ru=d(Cs=>{"use strict";Object.defineProperty(Cs,"__esModule",{value:!0});Cs.default=void 0;var Jg=vu(ri()),Zg=vu(_r());function vu(e){return e&&e.__esModule?e:{default:e}}var Eu,si,ni=0,ii=0;function em(e,t,r){let s=t&&r||0,n=t||new Array(16);e=e||{};let i=e.node||Eu,o=e.clockseq!==void 0?e.clockseq:si;if(i==null||o==null){let h=e.random||(e.rng||Jg.default)();i==null&&(i=Eu=[h[0]|1,h[1],h[2],h[3],h[4],h[5]]),o==null&&(o=si=(h[6]<<8|h[7])&16383)}let a=e.msecs!==void 0?e.msecs:Date.now(),u=e.nsecs!==void 0?e.nsecs:ii+1,f=a-ni+(u-ii)/1e4;if(f<0&&e.clockseq===void 0&&(o=o+1&16383),(f<0||a>ni)&&e.nsecs===void 0&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");ni=a,ii=u,si=o,a+=122192928e5;let c=((a&268435455)*1e4+u)%4294967296;n[s++]=c>>>24&255,n[s++]=c>>>16&255,n[s++]=c>>>8&255,n[s++]=c&255;let l=a/4294967296*1e4&268435455;n[s++]=l>>>8&255,n[s++]=l&255,n[s++]=l>>>24&15|16,n[s++]=l>>>16&255,n[s++]=o>>>8|128,n[s++]=o&255;for(let h=0;h<6;++h)n[s+h]=i[h];return t||(0,Zg.default)(n)}var tm=em;Cs.default=tm});var oi=d(xs=>{"use strict";Object.defineProperty(xs,"__esModule",{value:!0});xs.default=void 0;var rm=sm(pr());function sm(e){return e&&e.__esModule?e:{default:e}}function nm(e){if(!(0,rm.default)(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}var im=nm;xs.default=im});var ai=d(ht=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});ht.default=cm;ht.URL=ht.DNS=void 0;var om=Su(_r()),am=Su(oi());function Su(e){return e&&e.__esModule?e:{default:e}}function um(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var bu="6ba7b810-9dad-11d1-80b4-00c04fd430c8";ht.DNS=bu;var Au="6ba7b811-9dad-11d1-80b4-00c04fd430c8";ht.URL=Au;function cm(e,t,r){function s(n,i,o,a){if(typeof n=="string"&&(n=um(n)),typeof i=="string"&&(i=(0,am.default)(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+n.length);if(u.set(i),u.set(n,i.length),u=r(u),u[6]=u[6]&15|t,u[8]=u[8]&63|128,o){a=a||0;for(let f=0;f<16;++f)o[a+f]=u[f];return o}return(0,om.default)(u)}try{s.name=e}catch{}return s.DNS=bu,s.URL=Au,s}});var Cu=d(ws=>{"use strict";Object.defineProperty(ws,"__esModule",{value:!0});ws.default=void 0;var lm=fm(require("crypto"));function fm(e){return e&&e.__esModule?e:{default:e}}function hm(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),lm.default.createHash("md5").update(e).digest()}var dm=hm;ws.default=dm});var wu=d(Ts=>{"use strict";Object.defineProperty(Ts,"__esModule",{value:!0});Ts.default=void 0;var pm=xu(ai()),_m=xu(Cu());function xu(e){return e&&e.__esModule?e:{default:e}}var gm=(0,pm.default)("v3",48,_m.default),mm=gm;Ts.default=mm});var Pu=d(Ps=>{"use strict";Object.defineProperty(Ps,"__esModule",{value:!0});Ps.default=void 0;var ym=Tu(ri()),vm=Tu(_r());function Tu(e){return e&&e.__esModule?e:{default:e}}function Em(e,t,r){e=e||{};let s=e.random||(e.rng||ym.default)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,t){r=r||0;for(let n=0;n<16;++n)t[r+n]=s[n];return t}return(0,vm.default)(s)}var Rm=Em;Ps.default=Rm});var Ou=d(Os=>{"use strict";Object.defineProperty(Os,"__esModule",{value:!0});Os.default=void 0;var Sm=bm(require("crypto"));function bm(e){return e&&e.__esModule?e:{default:e}}function Am(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),Sm.default.createHash("sha1").update(e).digest()}var Cm=Am;Os.default=Cm});var Du=d(Hs=>{"use strict";Object.defineProperty(Hs,"__esModule",{value:!0});Hs.default=void 0;var xm=Hu(ai()),wm=Hu(Ou());function Hu(e){return e&&e.__esModule?e:{default:e}}var Tm=(0,xm.default)("v5",80,wm.default),Pm=Tm;Hs.default=Pm});var qu=d(Ds=>{"use strict";Object.defineProperty(Ds,"__esModule",{value:!0});Ds.default=void 0;var Om="00000000-0000-0000-0000-000000000000";Ds.default=Om});var Lu=d(qs=>{"use strict";Object.defineProperty(qs,"__esModule",{value:!0});qs.default=void 0;var Hm=Dm(pr());function Dm(e){return e&&e.__esModule?e:{default:e}}function qm(e){if(!(0,Hm.default)(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}var Lm=qm;qs.default=Lm});var Mu=d(Ce=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0});Object.defineProperty(Ce,"v1",{enumerable:!0,get:function(){return Mm.default}});Object.defineProperty(Ce,"v3",{enumerable:!0,get:function(){return Im.default}});Object.defineProperty(Ce,"v4",{enumerable:!0,get:function(){return Nm.default}});Object.defineProperty(Ce,"v5",{enumerable:!0,get:function(){return $m.default}});Object.defineProperty(Ce,"NIL",{enumerable:!0,get:function(){return km.default}});Object.defineProperty(Ce,"version",{enumerable:!0,get:function(){return jm.default}});Object.defineProperty(Ce,"validate",{enumerable:!0,get:function(){return Fm.default}});Object.defineProperty(Ce,"stringify",{enumerable:!0,get:function(){return Bm.default}});Object.defineProperty(Ce,"parse",{enumerable:!0,get:function(){return Um.default}});var Mm=Me(Ru()),Im=Me(wu()),Nm=Me(Pu()),$m=Me(Du()),km=Me(qu()),jm=Me(Lu()),Fm=Me(pr()),Bm=Me(_r()),Um=Me(oi());function Me(e){return e&&e.__esModule?e:{default:e}}});var ui=d(gr=>{"use strict";var Iu=gr&&gr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(gr,"__esModule",{value:!0});var Gm=Iu(require("url")),Wm=Iu(require("querystring")),Nu=class{constructor(t,r,s){}cache(t){}redirect(t,r){}_readRedirectParams(t,r){let{statusCode:s=302,query:n={}}=typeof r=="number"?{statusCode:r}:r,i={},o=Gm.default.parse(t);return(o==null?void 0:o.search)&&(t=t.substr(0,t.length-o.search.length),i=Wm.default.parse(o.query)),{to:t,statusCode:s,query:A(A({},i),n)}}proxy(t,r){}render(t){}stream(t){}serveStatic(t,r){}updatePath(t){}rewrite(t,r){}setRequestHeader(t,r){}updateRequestHeader(t,r,s){}removeRequestHeader(t){}setUpstreamResponseHeader(t,r){}updateUpstreamResponseHeader(t,r,s){}removeUpstreamResponseHeader(t){}verifyJwt(t){}setResponseHeader(t,r){}updateResponseHeader(t,r,s){}removeResponseHeader(t){}addResponseCookie(t,r,s){}updateResponseCookie(t,r,s){}removeResponseCookie(t){}addUpstreamResponseCookie(t,r,s){}updateUpstreamResponseCookie(t,r,s){}removeUpstreamResponseCookie(t){}send(t,r,s){}compute(t){}serviceWorker(t){}allowCors(t){}appShell(t){}renderWithApp(t){}};gr.BaseResponseWriter=Nu});var mr=d(dt=>{"use strict";Object.defineProperty(dt,"__esModule",{value:!0});var Vm=e=>e;function Km(e,t,r=Vm){let s={};return Object.entries(e).every(([n,i])=>{let o=t[r(n)];if(i===null)return o===void 0;if(typeof i=="string"){if(typeof o=="string"&&ku(i)){let a=ju(i);return s[a]=o,!0}i=new RegExp(`^${i}$`,"i")}return ci(i,o)})&&s}dt.matchCriteriaRegexObjectWithRequestObject=Km;function $u(e,t){return Object.entries(t).every(([r,s])=>{let n=e[r];return n?s instanceof RegExp?ci(s,n):typeof s=="object"&&s!==null?$u(n,s):n==s:!1})}dt.deepMatchObject=$u;function ku(e){return typeof e=="string"&&/^:\w+$/.test(e)}dt.isParamMatcher=ku;function ju(e){return e.slice(1)}dt.paramMatcherToParam=ju;function ci(e,t){return t==null?!1:(e.global&&(e=new RegExp(e)),Array.isArray(t)?t.some(r=>e.test(r)):e.test(t))}dt.testRegExp=ci});var fi=d(li=>{"use strict";Object.defineProperty(li,"__esModule",{value:!0});function Ym(e,t){let r={};for(let[s,n]of Object.entries(e))r[s]=t(n,s);return r}li.default=Ym});var Fu=d(yr=>{"use strict";var Qm=yr&&yr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(yr,"__esModule",{value:!0});var Xm=mr(),zm=Qm(fi()),pt=class{constructor(t){this.entries=t||[]}get cacheableEntries(){return this.entries.filter(pt.isEntryCacheable)}get spaRoutes(){return this.cacheableEntries.filter(({cacheOptions:t})=>t.browser&&t.browser.spa).map(({route:t})=>new RegExp(t,"i"))}shouldPrefetch(t){let r=!1;return this.entries.some(s=>pt.entryMatches(s,t)?(r=pt.isEntryCacheable(s)||!!s.cacheOptions.prefetchUpstreamRequests,r||s.returnsResponse):!1),r}static entryMatches(t,r){return new RegExp(t.route,"i").test(r.pathname)&&Xm.matchCriteriaRegexObjectWithRequestObject(zm.default(t.query||{},s=>s?new RegExp(s,"i"):null),Object.fromEntries(Array.from(r.searchParams.entries())))&&(t.protocol?new RegExp(t.protocol,"i").test(r.protocol):!0)}static isEntryCacheable({cacheOptions:t}){return!!(t.browser&&(t.browser.serviceWorkerSeconds||0)>0&&t.edge&&(t.edge.maxAgeSeconds||0)>0)}static fromEntries(t){return new pt(t)}toJSON(){return JSON.stringify(this.entries)}};yr.default=pt});var Gu=d(vr=>{"use strict";var Bu=vr&&vr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(vr,"__esModule",{value:!0});var Jm=ui(),Zm=Bu(Fu()),ey=Bu(fi());function ty(e){let t=new Zm.default,r=s=>{if(s!==void 0)return s instanceof RegExp?s.source:s};for(let s of e.routeGroups.getRoutes()){let n=new Uu;s.handler(n);let i={criteriaPath:s.criteria.path,route:s.toRegexString(),method:r(s.criteria.method),protocol:r(s.criteria.protocol),cacheOptions:n.cacheOptions,returnsResponse:n.returnsResponse};s.criteria.query&&(i.query=ey.default(s.criteria.query,o=>o?o.source:null)),!(s.criteria.headers||s.criteria.cookies)&&t.entries.push(i)}return t}vr.default=ty;var Uu=class extends Jm.BaseResponseWriter{constructor(){super(...arguments);this.response={},this.request={},this.cacheOptions={},this.returnsResponse=!1,this.doesReturnResponse=()=>this.returnsResponse=!0,this.cache=t=>{this.cacheOptions=t},this.send=this.doesReturnResponse,this.compute=this.doesReturnResponse,this.proxy=this.doesReturnResponse,this.redirect=this.doesReturnResponse,this.render=this.doesReturnResponse,this.serveStatic=this.doesReturnResponse,this.serviceWorker=this.doesReturnResponse,this.renderWithApp=this.doesReturnResponse,this.appShell=this.doesReturnResponse,this.stream=this.doesReturnResponse}}});var Yu=d((Yw,Ku)=>{var ry=require("path"),sy=60*60*24*365*10,ny={edge:{maxAgeSeconds:sy},browser:!1},Wu="layer0_devtools_enabled",iy="layer0_devtools_env_enabled";function Vu(){return process.env.LAYER0_DEVTOOLS_ENABLED?process.env.LAYER0_DEVTOOLS_ENABLED==="true":process.env.PREVIEW_LAYER0_DEVTOOLS_ENABLED?process.env.PREVIEW_LAYER0_DEVTOOLS_ENABLED==="true":null}Ku.exports=function({router:t,local:r}){Vu()!==null&&t.match("/(.*)",({addResponseCookie:s})=>{s(iy,`${Vu()}; Path=/`)}),r&&t.get("/__layer0__/caching",s=>{s.send(JSON.stringify({local:r,enabled:process.env.LAYER0_CACHE==="true"}))}).post("/__layer0__/caching",s=>{let n=s.request.query;n&&(process.env.LAYER0_CACHE=n.enabled),s.send("done")}),t.get("/__layer0__/devtools/enable",({redirect:s,addResponseCookie:n})=>{n(Wu,"true; Path=/"),s("/")}).get("/__layer0__/devtools/disable",({redirect:s,addResponseCookie:n})=>{n(Wu,"false; Path=/"),s("/")}).match("/__layer0__/devtools/:path*",({cache:s,serveStatic:n})=>{s(ny),n(ry.join("node_modules","@layer0","devtools","widget",":path*"))})}});var Qu=d(Er=>{"use strict";var oy=Er&&Er.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Er,"__esModule",{value:!0});var ay=oy(Gu()),uy=kt();function cy(e){ly(e);try{Yu()({router:e,local:uy.isLocal()})}catch(t){if(t.code!=="MODULE_NOT_FOUND")throw t}}Er.default=cy;function ly(e){e.match("/__layer0__/cache-manifest.js",({cache:t,setResponseHeader:r,send:s,allowCors:n})=>{t({edge:{maxAgeSeconds:60*60*24*365},browser:{maxAgeSeconds:60*60}}),r("content-type","text/javascript"),n(),s(()=>`self.__LAYER0_CACHE_MANIFEST__=${ay.default(e).toJSON()}`)})}});var Xu=d(hi=>{"use strict";Object.defineProperty(hi,"__esModule",{value:!0});var fy=new Set(["cache","setRequestHeader","updateRequestHeader","removeRequestHeader","setResponseHeader","updateResponseHeader","removeResponseHeader","setUpstreamResponseHeader","updateUpstreamResponseHeader","removeUpstreamResponseHeader","addResponseCookie","updateResponseCookie","removeResponseCookie","addUpstreamResponseCookie","updateUpstreamResponseCookie","removeUpstreamResponseCookie"]),hy=e=>{let t=(r,s)=>async function(...n){if(!!r.runningImmediately)return await r[s](...n)}.bind(r);return new Proxy(e,{get:(r,s)=>s==="serveStatic"?dy(r,r.serveStatic):fy.has(s.toString())?t(r,s):r[s]})};hi.default={create:hy};function dy(e,t){return async(r,s={})=>{if(e.runningImmediately)return t.call(e,r,s);if(s.onNotFound)e.setCreateResponseAction(()=>e.runImmediately(()=>s.onNotFound(e)));else throw new Error("Should not get to serveStatic without onNotFound when running behind the edge.")}}});var Ls=d(di=>{"use strict";Object.defineProperty(di,"__esModule",{value:!0});function py(e,t){let r=e,s=t.split(".");for(let n of s){if(typeof r=="undefined")return;r=r[n]}return r}di.default=py});var zu=d(Rr=>{"use strict";var _y=Rr&&Rr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Rr,"__esModule",{value:!0});var gy=_y(Ls());function my(e,t){return!!gy.default(e,t)}Rr.default=my});var tc=d((Zw,ec)=>{"use strict";var yy=function(t){return vy(t)&&!Ey(t)};function vy(e){return!!e&&typeof e=="object"}function Ey(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||by(e)}var Ry=typeof Symbol=="function"&&Symbol.for,Sy=Ry?Symbol.for("react.element"):60103;function by(e){return e.$$typeof===Sy}function Ay(e){return Array.isArray(e)?[]:{}}function Sr(e,t){return t.clone!==!1&&t.isMergeableObject(e)?jt(Ay(e),e,t):e}function Cy(e,t,r){return e.concat(t).map(function(s){return Sr(s,r)})}function xy(e,t){if(!t.customMerge)return jt;var r=t.customMerge(e);return typeof r=="function"?r:jt}function wy(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return e.propertyIsEnumerable(t)}):[]}function Ju(e){return Object.keys(e).concat(wy(e))}function Zu(e,t){try{return t in e}catch{return!1}}function Ty(e,t){return Zu(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function Py(e,t,r){var s={};return r.isMergeableObject(e)&&Ju(e).forEach(function(n){s[n]=Sr(e[n],r)}),Ju(t).forEach(function(n){Ty(e,n)||(Zu(e,n)&&r.isMergeableObject(t[n])?s[n]=xy(n,r)(e[n],t[n],r):s[n]=Sr(t[n],r))}),s}function jt(e,t,r){r=r||{},r.arrayMerge=r.arrayMerge||Cy,r.isMergeableObject=r.isMergeableObject||yy,r.cloneUnlessOtherwiseSpecified=Sr;var s=Array.isArray(t),n=Array.isArray(e),i=s===n;return i?s?r.arrayMerge(e,t,r):Py(e,t,r):Sr(t,r)}jt.all=function(t,r){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(s,n){return jt(s,n,r)},{})};var Oy=jt;ec.exports=Oy});var oc=d(br=>{"use strict";var Hy=br&&br.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(br,"__esModule",{value:!0});var rc=require("os"),Ms=J(),Dy=kt(),qy=Hy(lt()),pi={$id:"/domainOrIpSchema",type:"string"},sc={$id:"/backendObjectSchema",type:"object",properties:{domainOrIp:{$ref:pi.$id},port:{type:"number",minimum:1,maximum:65535},hostHeader:{type:"string"},disableCheckCert:{type:"boolean"},firstByteTimeout:{type:"number"},basePath:{type:"string"}},additionalProperties:!1,required:["domainOrIp"]},nc={$id:"/backendSchema",type:"object",patternProperties:{"^.*$":{oneOf:[{$ref:pi.$id},{$ref:sc.$id}]}}},_i={$id:"/layer0FileConfigurationSchema",type:"object",properties:{name:{type:"string"},team:{type:"string"},prerenderConcurrency:{type:"number"},production:{type:"boolean"},routes:{type:"string"},server:{type:"object",required:["path"],properties:{path:{type:"string"},export:{type:"string"}}},includeFiles:{type:"object"},sources:{type:"array",items:{type:"string"}},backends:{$ref:nc.$id},includeNodeModules:{type:"boolean"},connector:{type:"string"}},additionalProperties:!1,required:[]},ic=class{static validateLayer0FileConfiguration(t){var r;if(Dy.isCloud())return t;let s=qy.default("ajv");if(t.connector)try{let a=require(`${t.connector}/configSchema`);Object.assign(_i.properties,a)}catch{}let n=new s({allErrors:!0,schemas:[_i,nc,sc,pi]}),i=[],o=n.getSchema(_i.$id);if(((r=t.backends)===null||r===void 0?void 0:r.moov)!=null&&i.push({message:"is a reserved backend name",dataPath:".backends['moov']"}),t.backends&&t.backends[Ms.BACKENDS.static]&&i.push({message:"is a reserved backend name",dataPath:`.backends.${Ms.BACKENDS.static}`}),t.backends&&t.backends[Ms.BACKENDS.js]&&i.push({message:"is a reserved backend name",dataPath:`.backends.${Ms.BACKENDS.js}`}),!o(t)&&o.errors&&(i=[...i,...o.errors]),i.length){let a=i.map((u,f)=>{let c=`${f+1}) config${u.dataPath}: ${u.message}`;return u.keyword==="additionalProperties"&&(c+=` '${u.params.additionalProperty}'`),c}).join(rc.EOL);throw new Error(`Layer0 configuration validation failed with errors: ${rc.EOL}${a}`)}return t}};br.default=ic});var _t=d(xr=>{"use strict";var Ar=xr&&xr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(xr,"__esModule",{value:!0});var Ly=Ar(Ls()),My=Ar(zu()),Iy=Ar(tc()),ac=require("fs"),gi=require("path"),Cr=J(),Ny=Ar(oc()),$y=Ar(lt()),uc=class{constructor(){this.defaults={production:!0,backends:{},includeNodeModules:!1,routes:["routes.js","routes.ts","routes.cjs"].find(t=>ac.existsSync(gi.join(process.cwd(),t)))||"routes.js"}}get(t,r){if(this.has(t))return Ly.default(this.values,t);if(typeof r!="undefined")return r;throw new Error(`Layer0 configuration key: "${t}" is not defined`)}has(t){return this.values||this.loadLayer0Config(),My.default(this.values,t)}get all(){return this.values||this.loadLayer0Config(),this.values}loadLayer0Config(){let t=this.loadFromFile(),r=this.loadFromEnv();this.values=Iy.default.all([{},this.defaults,t,r])}loadFromFile(){let t=[gi.join(process.cwd(),Cr.LAYER0_CONFIG_FILE),gi.join(process.cwd(),Cr.LAYER0_CONFIG_FILE.replace(".js",".cjs"))].find(ac.existsSync);if(t)try{let r=$y.default(t);return Ny.default.validateLayer0FileConfiguration(r)}catch(r){throw new Error(`Failed to load ${t}: ${r.message}`)}return{}}loadFromEnv(){if(process.env[Cr.LAYER0_ENV_VARIABLES.config])try{return JSON.parse(process.env[Cr.LAYER0_ENV_VARIABLES.config])}catch{throw new Error(`Layer0 configuration variable: ${Cr.LAYER0_ENV_VARIABLES.config}, is not parsable as json`)}return{}}};xr.default=new uc});var Ns=d(Is=>{"use strict";Object.defineProperty(Is,"__esModule",{value:!0});function ky(e){return`${e.ignoreCase?"(?i)":""}${e.source}`.replace(/\\\//g,"/")}Is.default=ky;function jy(e){let t=e.indexOf("(?i)")===0;return t&&(e=e.slice("(?i)".length)),new RegExp(e.replace(/\//g,"/"),t?"i":"")}Is.fromEdgeRegex=jy});var cc=d(mi=>{"use strict";Object.defineProperty(mi,"__esModule",{value:!0});function Fy(e){return new RegExp(`^${e}$`,"i")}mi.default=Fy});var fc=d(wr=>{"use strict";var By=wr&&wr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(wr,"__esModule",{value:!0});var lc=By(Ns());function Uy(e){let t;return e===null?t=null:typeof e=="string"?t=lc.default(new RegExp(`^${e}$`,"i")):t=lc.default(e),t}wr.default=Uy});var vi=d(yi=>{"use strict";Object.defineProperty(yi,"__esModule",{value:!0});yi.default=(e,t)=>{let r=e;if(/(^|[^$]){/.test(e))throw new Error(`{variable} syntax in the path option is no longer supported, use :variable instead (${e})`);for(let s in t){let n=t[s];Array.isArray(n)&&(n=n.join("/")),r=r.replace(new RegExp(`:${s}(\\([^)]*\\))?[?*+]?`,"g"),n===void 0?"":n)}return r=r.replace(/:\w+(\*|\+|\?)?/,""),r=r.replace("\\?","?"),r=r.replace(/\/+/g,"/").replace(/^([^:]+:)\//gi,"$1//"),r}});var $s=d(ne=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});ne.pathToRegexp=ne.tokensToRegexp=ne.regexpToFunction=ne.match=ne.tokensToFunction=ne.compile=ne.parse=void 0;function Gy(e){for(var t=[],r=0;r<e.length;){var s=e[r];if(s==="*"||s==="+"||s==="?"){t.push({type:"MODIFIER",index:r,value:e[r++]});continue}if(s==="\\"){t.push({type:"ESCAPED_CHAR",index:r++,value:e[r++]});continue}if(s==="{"){t.push({type:"OPEN",index:r,value:e[r++]});continue}if(s==="}"){t.push({type:"CLOSE",index:r,value:e[r++]});continue}if(s===":"){for(var n="",i=r+1;i<e.length;){var o=e.charCodeAt(i);if(o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122||o===95){n+=e[i++];continue}break}if(!n)throw new TypeError("Missing parameter name at ".concat(r));t.push({type:"NAME",index:r,value:n}),r=i;continue}if(s==="("){var a=1,u="",i=r+1;if(e[i]==="?")throw new TypeError('Pattern cannot start with "?" at '.concat(i));for(;i<e.length;){if(e[i]==="\\"){u+=e[i++]+e[i++];continue}if(e[i]===")"){if(a--,a===0){i++;break}}else if(e[i]==="("&&(a++,e[i+1]!=="?"))throw new TypeError("Capturing groups are not allowed at ".concat(i));u+=e[i++]}if(a)throw new TypeError("Unbalanced pattern at ".concat(r));if(!u)throw new TypeError("Missing pattern at ".concat(r));t.push({type:"PATTERN",index:r,value:u}),r=i;continue}t.push({type:"CHAR",index:r,value:e[r++]})}return t.push({type:"END",index:r,value:""}),t}function Ei(e,t){t===void 0&&(t={});for(var r=Gy(e),s=t.prefixes,n=s===void 0?"./":s,i="[^".concat(Ft(t.delimiter||"/#?"),"]+?"),o=[],a=0,u=0,f="",c=function(D){if(u<r.length&&r[u].type===D)return r[u++].value},l=function(D){var w=c(D);if(w!==void 0)return w;var C=r[u],N=C.type,Q=C.index;throw new TypeError("Unexpected ".concat(N," at ").concat(Q,", expected ").concat(D))},h=function(){for(var D="",w;w=c("CHAR")||c("ESCAPED_CHAR");)D+=w;return D};u<r.length;){var y=c("CHAR"),p=c("NAME"),g=c("PATTERN");if(p||g){var E=y||"";n.indexOf(E)===-1&&(f+=E,E=""),f&&(o.push(f),f=""),o.push({name:p||a++,prefix:E,suffix:"",pattern:g||i,modifier:c("MODIFIER")||""});continue}var S=y||c("ESCAPED_CHAR");if(S){f+=S;continue}f&&(o.push(f),f="");var q=c("OPEN");if(q){var E=h(),$=c("NAME")||"",H=c("PATTERN")||"",T=h();l("CLOSE"),o.push({name:$||(H?a++:""),pattern:$&&!H?i:H,prefix:E,suffix:T,modifier:c("MODIFIER")||""});continue}l("END")}return o}ne.parse=Ei;function Wy(e,t){return hc(Ei(e,t),t)}ne.compile=Wy;function hc(e,t){t===void 0&&(t={});var r=Ri(t),s=t.encode,n=s===void 0?function(u){return u}:s,i=t.validate,o=i===void 0?!0:i,a=e.map(function(u){if(typeof u=="object")return new RegExp("^(?:".concat(u.pattern,")$"),r)});return function(u){for(var f="",c=0;c<e.length;c++){var l=e[c];if(typeof l=="string"){f+=l;continue}var h=u?u[l.name]:void 0,y=l.modifier==="?"||l.modifier==="*",p=l.modifier==="*"||l.modifier==="+";if(Array.isArray(h)){if(!p)throw new TypeError('Expected "'.concat(l.name,'" to not repeat, but got an array'));if(h.length===0){if(y)continue;throw new TypeError('Expected "'.concat(l.name,'" to not be empty'))}for(var g=0;g<h.length;g++){var E=n(h[g],l);if(o&&!a[c].test(E))throw new TypeError('Expected all "'.concat(l.name,'" to match "').concat(l.pattern,'", but got "').concat(E,'"'));f+=l.prefix+E+l.suffix}continue}if(typeof h=="string"||typeof h=="number"){var E=n(String(h),l);if(o&&!a[c].test(E))throw new TypeError('Expected "'.concat(l.name,'" to match "').concat(l.pattern,'", but got "').concat(E,'"'));f+=l.prefix+E+l.suffix;continue}if(!y){var S=p?"an array":"a string";throw new TypeError('Expected "'.concat(l.name,'" to be ').concat(S))}}return f}}ne.tokensToFunction=hc;function Vy(e,t){var r=[],s=Si(e,r,t);return dc(s,r,t)}ne.match=Vy;function dc(e,t,r){r===void 0&&(r={});var s=r.decode,n=s===void 0?function(i){return i}:s;return function(i){var o=e.exec(i);if(!o)return!1;for(var a=o[0],u=o.index,f=Object.create(null),c=function(h){if(o[h]===void 0)return"continue";var y=t[h-1];y.modifier==="*"||y.modifier==="+"?f[y.name]=o[h].split(y.prefix+y.suffix).map(function(p){return n(p,y)}):f[y.name]=n(o[h],y)},l=1;l<o.length;l++)c(l);return{path:a,index:u,params:f}}}ne.regexpToFunction=dc;function Ft(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function Ri(e){return e&&e.sensitive?"":"i"}function Ky(e,t){if(!t)return e;for(var r=/\((?:\?<(.*?)>)?(?!\?)/g,s=0,n=r.exec(e.source);n;)t.push({name:n[1]||s++,prefix:"",suffix:"",modifier:"",pattern:""}),n=r.exec(e.source);return e}function Yy(e,t,r){var s=e.map(function(n){return Si(n,t,r).source});return new RegExp("(?:".concat(s.join("|"),")"),Ri(r))}function Qy(e,t,r){return pc(Ei(e,r),t,r)}function pc(e,t,r){r===void 0&&(r={});for(var s=r.strict,n=s===void 0?!1:s,i=r.start,o=i===void 0?!0:i,a=r.end,u=a===void 0?!0:a,f=r.encode,c=f===void 0?function(Q){return Q}:f,l=r.delimiter,h=l===void 0?"/#?":l,y=r.endsWith,p=y===void 0?"":y,g="[".concat(Ft(p),"]|$"),E="[".concat(Ft(h),"]"),S=o?"^":"",q=0,$=e;q<$.length;q++){var H=$[q];if(typeof H=="string")S+=Ft(c(H));else{var T=Ft(c(H.prefix)),D=Ft(c(H.suffix));if(H.pattern)if(t&&t.push(H),T||D)if(H.modifier==="+"||H.modifier==="*"){var w=H.modifier==="*"?"?":"";S+="(?:".concat(T,"((?:").concat(H.pattern,")(?:").concat(D).concat(T,"(?:").concat(H.pattern,"))*)").concat(D,")").concat(w)}else S+="(?:".concat(T,"(").concat(H.pattern,")").concat(D,")").concat(H.modifier);else H.modifier==="+"||H.modifier==="*"?S+="((?:".concat(H.pattern,")").concat(H.modifier,")"):S+="(".concat(H.pattern,")").concat(H.modifier);else S+="(?:".concat(T).concat(D,")").concat(H.modifier)}}if(u)n||(S+="".concat(E,"?")),S+=r.endsWith?"(?=".concat(g,")"):"$";else{var C=e[e.length-1],N=typeof C=="string"?E.indexOf(C[C.length-1])>-1:C===void 0;n||(S+="(?:".concat(E,"(?=").concat(g,"))?")),N||(S+="(?=".concat(E,"|").concat(g,")"))}return new RegExp(S,Ri(r))}ne.tokensToRegexp=pc;function Si(e,t,r){return e instanceof RegExp?Ky(e,t):Array.isArray(e)?Yy(e,t,r):Qy(e,t,r)}ne.pathToRegexp=Si});var gc=d(Bt=>{"use strict";var Xy=Bt&&Bt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Bt,"__esModule",{value:!0});var zy=Xy(vi()),Jy=$s();function Zy(e,t){if(e==null)return t;let r=_c(e);return zy.default(t,r)}Bt.default=Zy;function _c(e){if(!e)return{};let t=e.match(/https?:\/\/[^/]+(.*)/);t&&(e=`/${t[1]}`);let r=1,s={};return Jy.parse(e).forEach(n=>{typeof n!="string"&&(s[n.name]=`\\${r++}`)}),s}Bt.getBackReferences=_c});var mc=d(bi=>{"use strict";Object.defineProperty(bi,"__esModule",{value:!0});function ev(e){return e?typeof e.length=="number"?!e.length:!(typeof e=="object"&&Object.keys(e).length):!0}bi.default=ev});var vc=d(Ai=>{"use strict";Object.defineProperty(Ai,"__esModule",{value:!0});var yc=class extends Error{constructor(t){super(t.message);this.type="BackendFetchError",this.cause=t}};Ai.default=yc});var wi=d(xi=>{"use strict";Object.defineProperty(xi,"__esModule",{value:!0});var Ci="__";function tv(e,t){let r=new URL(e,`https://${Ci}`).searchParams,s=new URL(t,`https://${Ci}`);return r.forEach((n,i)=>{s.searchParams.get(i)||s.searchParams.set(i,n)}),s.hostname===Ci?`${s.pathname}${s.search}`:s.toString()}xi.default=tv});var Ac=d(Tr=>{"use strict";var ks=Tr&&Tr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Tr,"__esModule",{value:!0});var rv=require("url"),Ec=ks(require("https")),sv=ks(require("http")),Rc=require("path"),nv=ks(vc()),iv=ks(wi()),Sc=J(),ov=["transfer-encoding","content-length"],Ti=class{constructor(t){this.config=t}static setImpl(t){bc=t}static create(t){return new bc(t)}async fetch(t,r,s){let{path:n,headers:i}=s||{},o=this.getProxyTarget(t,n),a=this.getProxyRequestOptions(o,t,i,s==null?void 0:s.removeEmptySearchParamValues);return new Promise((u,f)=>{let l=(o.protocol==="https:"?Ec.default:sv.default).request(a,h=>{let y=[];h.on("data",p=>y.push(p)).on("end",()=>{Object.entries(h.headers).filter(([p])=>!ov.includes(p.toLowerCase())).forEach(([p,g])=>{try{r.setHeader(p,g)}catch(E){console.warn(`Could not relay upstream response header ${p} with value ${g}`,E)}}),r.statusCode=h.statusCode,r.statusMessage=h.statusMessage,r.body=Buffer.concat(y),u(void 0)})});l.on("error",h=>f(new nv.default(h))),l.end(t.body)})}getProxyTarget(t,r){let s=r?iv.default(t.url,r):t.url,{domainOrIp:n,basePath:i,port:o}=this.config;if(i&&(s=Rc.join(i,s)),n){let u=n.match(/^127.0.0.1(:\d+)?$/)?"http":"https",f=`${n}${o?`:${o}`:""}`;s=`${u}://${Rc.join(f,s)}`}let a=rv.parse(s,!0);return t.getHeader(Sc.HTTP_HEADERS.x0Protocol)==="http"&&(a.protocol="http:"),a}isLocal(t){return t.hostname===Sc.JS_BACKEND_HOSTNAME}getProxyRequestOptions(t,r,s,n){let i=null;this.config.disableCheckCert&&t.protocol==="https:"&&(i=new Ec.default.Agent({rejectUnauthorized:!1}));let o=M(A(A({},r.headers),s),{host:this.config.hostHeader||r.headers.host});this.isLocal(t)&&(o["x-forwarded-proto"]=r.secure?"https":"http");let a=t.path;return n===!0&&a&&(a=a.replace(/=(?=&|$)/gm,"")),M(A({},t),{path:a,method:r.method,timeout:this.config.firstByteTimeout||0,agent:i,body:r.body,headers:o})}};Tr.default=Ti;var bc=Ti});var Fs=d(Pi=>{"use strict";Pi.parse=cv;Pi.serialize=lv;var av=decodeURIComponent,uv=encodeURIComponent,js=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function cv(e,t){if(typeof e!="string")throw new TypeError("argument str must be a string");for(var r={},s=t||{},n=e.split(";"),i=s.decode||av,o=0;o<n.length;o++){var a=n[o],u=a.indexOf("=");if(!(u<0)){var f=a.substring(0,u).trim();if(r[f]==null){var c=a.substring(u+1,a.length).trim();c[0]==='"'&&(c=c.slice(1,-1)),r[f]=fv(c,i)}}}return r}function lv(e,t,r){var s=r||{},n=s.encode||uv;if(typeof n!="function")throw new TypeError("option encode is invalid");if(!js.test(e))throw new TypeError("argument name is invalid");var i=n(t);if(i&&!js.test(i))throw new TypeError("argument val is invalid");var o=e+"="+i;if(s.maxAge!=null){var a=s.maxAge-0;if(isNaN(a)||!isFinite(a))throw new TypeError("option maxAge is invalid");o+="; Max-Age="+Math.floor(a)}if(s.domain){if(!js.test(s.domain))throw new TypeError("option domain is invalid");o+="; Domain="+s.domain}if(s.path){if(!js.test(s.path))throw new TypeError("option path is invalid");o+="; Path="+s.path}if(s.expires){if(typeof s.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+="; Expires="+s.expires.toUTCString()}if(s.httpOnly&&(o+="; HttpOnly"),s.secure&&(o+="; Secure"),s.sameSite){var u=typeof s.sameSite=="string"?s.sameSite.toLowerCase():s.sameSite;switch(u){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return o}function fv(e,t){try{return t(e)}catch{return e}}});var Cc=d(Oi=>{"use strict";Object.defineProperty(Oi,"__esModule",{value:!0});function hv(e){return e}Oi.default=hv});var Hi=d(Pr=>{"use strict";var xc=Pr&&Pr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Pr,"__esModule",{value:!0});var dv=xc(Fs()),pv=require("querystring"),_v=xc(Cc());function wc(e,t,r){if(typeof r=="string")return gv(e,t,r);if(!Array.isArray(r))return r;let s=[];return r.forEach(n=>{s.push(wc(e,t,n))}),s}Pr.default=wc;function gv(e,t,r){let s=r.replace(/\\\${/g,"--backslashdollar--").replace(/\${/g,"--separator--${").split("--separator--"),n={};(e==null?void 0:e.headers.cookie)&&(n=dv.default.parse(e.headers.cookie,{decode:_v.default}));let i={};if(e==null?void 0:e.url){let f=e.url.indexOf("?");if(f>=0){let c=e.url.substring(f+1);i=pv.parse(c)}}let o=[],a="${req:".length,u="${query:".length;return s.forEach(f=>{var c;if(e){f=f.replace(/\${method}/,e.method),f=f.replace(/\${path}/,e.path),f=f.replace(/\${url}/,e.url);let h=f.search(/\${query:/);if(h>=0){let p=f.substring(h+u),g=p.indexOf("}");if(g<=0)throw new Error(`Cannot interpolate substring "${f}" of value "${r}" (1)`);p=p.substring(0,g);let E=i[p]||"";Array.isArray(E)&&(E=E[0]),f=f.replace(/\${query:.*?}/,E)}let y=f.search(/\${req:/);if(y>=0){let p=f.substring(y+a),g=p.indexOf("}");if(g<=0)throw new Error(`Cannot interpolate substring "${f}" of value "${r}" (2)`);p=p.substring(0,g);let E="";if(p.indexOf("cookie:")===0){let S=p.split(":")[1];E=n[S]||""}else if(p.indexOf("param:")===0){let S=p.split(":")[1];E=String((c=e.params)===null||c===void 0?void 0:c[S])||""}else E=e.headers[p]||"";f=f.replace(/\${req:.*?}/,E)}}let l=f.search(/\${res:/);if(l>=0){if(!t)throw new Error(`Cannot interpolate response parameter "${f}" during receive phase`);let h=f.substring(l+a),y=h.indexOf("}");if(y<=0)throw new Error(`Cannot interpolate substring "${f}" of value "${r}" (3)`);h=h.substring(0,y),f=f.replace(/\${res:.*?}/,t.getHeader(h)||"")}if(f.search(/\${/)>=0)throw new Error(`Cannot interpolate substring "${f}" of "${r}" (4)`);o.push(f)}),o.join("").replace(/--backslashdollar--/g,"${")}});var Pc=d((_T,Di)=>{"use strict";var mv=Object.prototype.hasOwnProperty,fe="~";function Or(){}Object.create&&(Or.prototype=Object.create(null),new Or().__proto__||(fe=!1));function yv(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function Tc(e,t,r,s,n){if(typeof r!="function")throw new TypeError("The listener must be a function");var i=new yv(r,s||e,n),o=fe?fe+t:t;return e._events[o]?e._events[o].fn?e._events[o]=[e._events[o],i]:e._events[o].push(i):(e._events[o]=i,e._eventsCount++),e}function Bs(e,t){--e._eventsCount==0?e._events=new Or:delete e._events[t]}function ie(){this._events=new Or,this._eventsCount=0}ie.prototype.eventNames=function(){var t=[],r,s;if(this._eventsCount===0)return t;for(s in r=this._events)mv.call(r,s)&&t.push(fe?s.slice(1):s);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(r)):t};ie.prototype.listeners=function(t){var r=fe?fe+t:t,s=this._events[r];if(!s)return[];if(s.fn)return[s.fn];for(var n=0,i=s.length,o=new Array(i);n<i;n++)o[n]=s[n].fn;return o};ie.prototype.listenerCount=function(t){var r=fe?fe+t:t,s=this._events[r];return s?s.fn?1:s.length:0};ie.prototype.emit=function(t,r,s,n,i,o){var a=fe?fe+t:t;if(!this._events[a])return!1;var u=this._events[a],f=arguments.length,c,l;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),f){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,r),!0;case 3:return u.fn.call(u.context,r,s),!0;case 4:return u.fn.call(u.context,r,s,n),!0;case 5:return u.fn.call(u.context,r,s,n,i),!0;case 6:return u.fn.call(u.context,r,s,n,i,o),!0}for(l=1,c=new Array(f-1);l<f;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var h=u.length,y;for(l=0;l<h;l++)switch(u[l].once&&this.removeListener(t,u[l].fn,void 0,!0),f){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,r);break;case 3:u[l].fn.call(u[l].context,r,s);break;case 4:u[l].fn.call(u[l].context,r,s,n);break;default:if(!c)for(y=1,c=new Array(f-1);y<f;y++)c[y-1]=arguments[y];u[l].fn.apply(u[l].context,c)}}return!0};ie.prototype.on=function(t,r,s){return Tc(this,t,r,s,!1)};ie.prototype.once=function(t,r,s){return Tc(this,t,r,s,!0)};ie.prototype.removeListener=function(t,r,s,n){var i=fe?fe+t:t;if(!this._events[i])return this;if(!r)return Bs(this,i),this;var o=this._events[i];if(o.fn)o.fn===r&&(!n||o.once)&&(!s||o.context===s)&&Bs(this,i);else{for(var a=0,u=[],f=o.length;a<f;a++)(o[a].fn!==r||n&&!o[a].once||s&&o[a].context!==s)&&u.push(o[a]);u.length?this._events[i]=u.length===1?u[0]:u:Bs(this,i)}return this};ie.prototype.removeAllListeners=function(t){var r;return t?(r=fe?fe+t:t,this._events[r]&&Bs(this,r)):(this._events=new Or,this._eventsCount=0),this};ie.prototype.off=ie.prototype.removeListener;ie.prototype.addListener=ie.prototype.on;ie.prefixed=fe;ie.EventEmitter=ie;typeof Di!="undefined"&&(Di.exports=ie)});var Hc=d((gT,Oc)=>{"use strict";Oc.exports=function(t,r){if(r=r.split(":")[0],t=+t,!t)return!1;switch(r){case"http":case"ws":return t!==80;case"https":case"wss":return t!==443;case"ftp":return t!==21;case"gopher":return t!==70;case"file":return!1}return t!==0}});var Us=d(qc=>{var Ie=qc,vv=require("url"),Dc=require("util")._extend,Ev=Hc(),Rv=/(^|,)\s*upgrade\s*($|,)/i,qi=/^https|wss/;Ie.isSSL=qi;Ie.setupOutgoing=function(e,t,r,s){e.port=t[s||"target"].port||(qi.test(t[s||"target"].protocol)?443:80),["host","hostname","socketPath","pfx","key","passphrase","cert","ca","ciphers","secureProtocol"].forEach(function(a){e[a]=t[s||"target"][a]}),e.method=t.method||r.method,e.headers=Dc({},r.headers),t.headers&&Dc(e.headers,t.headers),t.auth&&(e.auth=t.auth),t.ca&&(e.ca=t.ca),qi.test(t[s||"target"].protocol)&&(e.rejectUnauthorized=typeof t.secure=="undefined"?!0:t.secure),e.agent=t.agent||!1,e.localAddress=t.localAddress,e.agent||(e.headers=e.headers||{},(typeof e.headers.connection!="string"||!Rv.test(e.headers.connection))&&(e.headers.connection="close"));var n=t[s||"target"],i=n&&t.prependPath!==!1&&n.path||"",o=t.toProxy?r.url:vv.parse(r.url).path||"";return o=t.ignorePath?"":o,e.path=Ie.urlJoin(i,o),t.changeOrigin&&(e.headers.host=Ev(e.port,t[s||"target"].protocol)&&!Sv(e.host)?e.host+":"+e.port:e.host),e};Ie.setupSocket=function(e){return e.setTimeout(0),e.setNoDelay(!0),e.setKeepAlive(!0,0),e};Ie.getPort=function(e){var t=e.headers.host?e.headers.host.match(/:(\d+)/):"";return t?t[1]:Ie.hasEncryptedConnection(e)?"443":"80"};Ie.hasEncryptedConnection=function(e){return Boolean(e.connection.encrypted||e.connection.pair)};Ie.urlJoin=function(){var e=Array.prototype.slice.call(arguments),t=e.length-1,r=e[t],s=r.split("?"),n;return e[t]=s.shift(),n=[e.filter(Boolean).join("/").replace(/\/+/g,"/").replace("http:/","http://").replace("https:/","https://")],n.push.apply(n,s),n.join("?")};Ie.rewriteCookieProperty=function e(t,r,s){return Array.isArray(t)?t.map(function(n){return e(n,r,s)}):t.replace(new RegExp("(;\\s*"+s+"=)([^;]+)","i"),function(n,i,o){var a;if(o in r)a=r[o];else if("*"in r)a=r["*"];else return n;return a?i+a:""})};function Sv(e){return!!~e.indexOf(":")}});var Nc=d((yT,Ic)=>{var Lc=require("url"),Mc=Us(),bv=/^201|30(1|2|7|8)$/;Ic.exports={removeChunked:function(t,r,s){t.httpVersion==="1.0"&&delete s.headers["transfer-encoding"]},setConnection:function(t,r,s){t.httpVersion==="1.0"?s.headers.connection=t.headers.connection||"close":t.httpVersion!=="2.0"&&!s.headers.connection&&(s.headers.connection=t.headers.connection||"keep-alive")},setRedirectHostRewrite:function(t,r,s,n){if((n.hostRewrite||n.autoRewrite||n.protocolRewrite)&&s.headers.location&&bv.test(s.statusCode)){var i=Lc.parse(n.target),o=Lc.parse(s.headers.location);if(i.host!=o.host)return;n.hostRewrite?o.host=n.hostRewrite:n.autoRewrite&&(o.host=t.headers.host),n.protocolRewrite&&(o.protocol=n.protocolRewrite),s.headers.location=o.format()}},writeHeaders:function(t,r,s,n){var i=n.cookieDomainRewrite,o=n.cookiePathRewrite,a=n.preserveHeaderKeyCase,u,f=function(h,y){y!=null&&(i&&h.toLowerCase()==="set-cookie"&&(y=Mc.rewriteCookieProperty(y,i,"domain")),o&&h.toLowerCase()==="set-cookie"&&(y=Mc.rewriteCookieProperty(y,o,"path")),r.setHeader(String(h).trim(),y))};if(typeof i=="string"&&(i={"*":i}),typeof o=="string"&&(o={"*":o}),a&&s.rawHeaders!=null){u={};for(var c=0;c<s.rawHeaders.length;c+=2){var l=s.rawHeaders[c];u[l.toLowerCase()]=l}}Object.keys(s.headers).forEach(function(h){var y=s.headers[h];a&&u&&(h=u[h]||h),f(h,y)})},writeStatusCode:function(t,r,s){s.statusMessage?(r.statusCode=s.statusCode,r.statusMessage=s.statusMessage):r.statusCode=s.statusCode}}});var kc=d((vT,$c)=>{var Ut=1e3,Gt=Ut*60,Wt=Gt*60,gt=Wt*24,Av=gt*7,Cv=gt*365.25;$c.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return xv(e);if(r==="number"&&isFinite(e))return t.long?Tv(e):wv(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function xv(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!!t){var r=parseFloat(t[1]),s=(t[2]||"ms").toLowerCase();switch(s){case"years":case"year":case"yrs":case"yr":case"y":return r*Cv;case"weeks":case"week":case"w":return r*Av;case"days":case"day":case"d":return r*gt;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Wt;case"minutes":case"minute":case"mins":case"min":case"m":return r*Gt;case"seconds":case"second":case"secs":case"sec":case"s":return r*Ut;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function wv(e){var t=Math.abs(e);return t>=gt?Math.round(e/gt)+"d":t>=Wt?Math.round(e/Wt)+"h":t>=Gt?Math.round(e/Gt)+"m":t>=Ut?Math.round(e/Ut)+"s":e+"ms"}function Tv(e){var t=Math.abs(e);return t>=gt?Gs(e,t,gt,"day"):t>=Wt?Gs(e,t,Wt,"hour"):t>=Gt?Gs(e,t,Gt,"minute"):t>=Ut?Gs(e,t,Ut,"second"):e+" ms"}function Gs(e,t,r,s){var n=t>=r*1.5;return Math.round(e/r)+" "+s+(n?"s":"")}});var Li=d((ET,jc)=>{function Pv(e){r.debug=r,r.default=r,r.coerce=u,r.disable=i,r.enable=n,r.enabled=o,r.humanize=kc(),r.destroy=f,Object.keys(e).forEach(c=>{r[c]=e[c]}),r.names=[],r.skips=[],r.formatters={};function t(c){let l=0;for(let h=0;h<c.length;h++)l=(l<<5)-l+c.charCodeAt(h),l|=0;return r.colors[Math.abs(l)%r.colors.length]}r.selectColor=t;function r(c){let l,h=null,y,p;function g(...E){if(!g.enabled)return;let S=g,q=Number(new Date),$=q-(l||q);S.diff=$,S.prev=l,S.curr=q,l=q,E[0]=r.coerce(E[0]),typeof E[0]!="string"&&E.unshift("%O");let H=0;E[0]=E[0].replace(/%([a-zA-Z%])/g,(D,w)=>{if(D==="%%")return"%";H++;let C=r.formatters[w];if(typeof C=="function"){let N=E[H];D=C.call(S,N),E.splice(H,1),H--}return D}),r.formatArgs.call(S,E),(S.log||r.log).apply(S,E)}return g.namespace=c,g.useColors=r.useColors(),g.color=r.selectColor(c),g.extend=s,g.destroy=r.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(y!==r.namespaces&&(y=r.namespaces,p=r.enabled(c)),p),set:E=>{h=E}}),typeof r.init=="function"&&r.init(g),g}function s(c,l){let h=r(this.namespace+(typeof l=="undefined"?":":l)+c);return h.log=this.log,h}function n(c){r.save(c),r.namespaces=c,r.names=[],r.skips=[];let l,h=(typeof c=="string"?c:"").split(/[\s,]+/),y=h.length;for(l=0;l<y;l++)!h[l]||(c=h[l].replace(/\*/g,".*?"),c[0]==="-"?r.skips.push(new RegExp("^"+c.slice(1)+"$")):r.names.push(new RegExp("^"+c+"$")))}function i(){let c=[...r.names.map(a),...r.skips.map(a).map(l=>"-"+l)].join(",");return r.enable(""),c}function o(c){if(c[c.length-1]==="*")return!0;let l,h;for(l=0,h=r.skips.length;l<h;l++)if(r.skips[l].test(c))return!1;for(l=0,h=r.names.length;l<h;l++)if(r.names[l].test(c))return!0;return!1}function a(c){return c.toString().substring(2,c.toString().length-2).replace(/\.\*\?$/,"*")}function u(c){return c instanceof Error?c.stack||c.message:c}function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}jc.exports=Pv});var Fc=d((_e,Ws)=>{_e.formatArgs=Hv;_e.save=Dv;_e.load=qv;_e.useColors=Ov;_e.storage=Lv();_e.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();_e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Ov(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Hv(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+Ws.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,s=0;e[0].replace(/%[a-zA-Z%]/g,n=>{n!=="%%"&&(r++,n==="%c"&&(s=r))}),e.splice(s,0,t)}_e.log=console.debug||console.log||(()=>{});function Dv(e){try{e?_e.storage.setItem("debug",e):_e.storage.removeItem("debug")}catch{}}function qv(){let e;try{e=_e.storage.getItem("debug")}catch{}return!e&&typeof process!="undefined"&&"env"in process&&(e=process.env.DEBUG),e}function Lv(){try{return localStorage}catch{}}Ws.exports=Li()(_e);var{formatters:Mv}=Ws.exports;Mv.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var Uc=d((RT,Bc)=>{"use strict";Bc.exports=(e,t=process.argv)=>{let r=e.startsWith("-")?"":e.length===1?"-":"--",s=t.indexOf(r+e),n=t.indexOf("--");return s!==-1&&(n===-1||s<n)}});var Vc=d((ST,Wc)=>{"use strict";var Iv=require("os"),Gc=require("tty"),Ee=Uc(),{env:Z}=process,ze;Ee("no-color")||Ee("no-colors")||Ee("color=false")||Ee("color=never")?ze=0:(Ee("color")||Ee("colors")||Ee("color=true")||Ee("color=always"))&&(ze=1);"FORCE_COLOR"in Z&&(Z.FORCE_COLOR==="true"?ze=1:Z.FORCE_COLOR==="false"?ze=0:ze=Z.FORCE_COLOR.length===0?1:Math.min(parseInt(Z.FORCE_COLOR,10),3));function Mi(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function Ii(e,t){if(ze===0)return 0;if(Ee("color=16m")||Ee("color=full")||Ee("color=truecolor"))return 3;if(Ee("color=256"))return 2;if(e&&!t&&ze===void 0)return 0;let r=ze||0;if(Z.TERM==="dumb")return r;if(process.platform==="win32"){let s=Iv.release().split(".");return Number(s[0])>=10&&Number(s[2])>=10586?Number(s[2])>=14931?3:2:1}if("CI"in Z)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(s=>s in Z)||Z.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in Z)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Z.TEAMCITY_VERSION)?1:0;if(Z.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in Z){let s=parseInt((Z.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Z.TERM_PROGRAM){case"iTerm.app":return s>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Z.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Z.TERM)||"COLORTERM"in Z?1:r}function Nv(e){let t=Ii(e,e&&e.isTTY);return Mi(t)}Wc.exports={supportsColor:Nv,stdout:Mi(Ii(!0,Gc.isatty(1))),stderr:Mi(Ii(!0,Gc.isatty(2)))}});var Yc=d((se,Ks)=>{var $v=require("tty"),Vs=require("util");se.init=Wv;se.log=Bv;se.formatArgs=jv;se.save=Uv;se.load=Gv;se.useColors=kv;se.destroy=Vs.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");se.colors=[6,2,3,4,5,1];try{let e=Vc();e&&(e.stderr||e).level>=2&&(se.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}se.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(n,i)=>i.toUpperCase()),s=process.env[t];return/^(yes|on|true|enabled)$/i.test(s)?s=!0:/^(no|off|false|disabled)$/i.test(s)?s=!1:s==="null"?s=null:s=Number(s),e[r]=s,e},{});function kv(){return"colors"in se.inspectOpts?Boolean(se.inspectOpts.colors):$v.isatty(process.stderr.fd)}function jv(e){let{namespace:t,useColors:r}=this;if(r){let s=this.color,n="[3"+(s<8?s:"8;5;"+s),i=`  ${n};1m${t} [0m`;e[0]=i+e[0].split(`
`).join(`
`+i),e.push(n+"m+"+Ks.exports.humanize(this.diff)+"[0m")}else e[0]=Fv()+t+" "+e[0]}function Fv(){return se.inspectOpts.hideDate?"":new Date().toISOString()+" "}function Bv(...e){return process.stderr.write(Vs.format(...e)+`
`)}function Uv(e){e?process.env.DEBUG=e:delete process.env.DEBUG}function Gv(){return process.env.DEBUG}function Wv(e){e.inspectOpts={};let t=Object.keys(se.inspectOpts);for(let r=0;r<t.length;r++)e.inspectOpts[t[r]]=se.inspectOpts[t[r]]}Ks.exports=Li()(se);var{formatters:Kc}=Ks.exports;Kc.o=function(e){return this.inspectOpts.colors=this.useColors,Vs.inspect(e,this.inspectOpts).split(`
`).map(t=>t.trim()).join(" ")};Kc.O=function(e){return this.inspectOpts.colors=this.useColors,Vs.inspect(e,this.inspectOpts)}});var Qc=d((bT,Ni)=>{typeof process=="undefined"||process.type==="renderer"||process.browser===!0||process.__nwjs?Ni.exports=Fc():Ni.exports=Yc()});var zc=d((AT,Xc)=>{var Hr;Xc.exports=function(){if(!Hr){try{Hr=Qc()("follow-redirects")}catch{}typeof Hr!="function"&&(Hr=function(){})}Hr.apply(null,arguments)}});var nl=d((CT,Bi)=>{var mt=require("url"),$i=mt.URL,Vv=require("http"),Kv=require("https"),Jc=require("stream").Writable,Yv=require("assert"),Zc=zc(),ki=["abort","aborted","connect","error","socket","timeout"],ji=Object.create(null);ki.forEach(function(e){ji[e]=function(t,r,s){this._redirectable.emit(e,t,r,s)}});var el=Ys("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),Qv=Ys("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),Xv=Ys("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),zv=Ys("ERR_STREAM_WRITE_AFTER_END","write after end");function ge(e,t){Jc.call(this),this._sanitizeOptions(e),this._options=e,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],t&&this.on("response",t);var r=this;this._onNativeResponse=function(s){r._processResponse(s)},this._performRequest()}ge.prototype=Object.create(Jc.prototype);ge.prototype.abort=function(){sl(this._currentRequest),this.emit("abort")};ge.prototype.write=function(e,t,r){if(this._ending)throw new zv;if(!(typeof e=="string"||typeof e=="object"&&"length"in e))throw new TypeError("data should be a string, Buffer or Uint8Array");if(typeof t=="function"&&(r=t,t=null),e.length===0){r&&r();return}this._requestBodyLength+e.length<=this._options.maxBodyLength?(this._requestBodyLength+=e.length,this._requestBodyBuffers.push({data:e,encoding:t}),this._currentRequest.write(e,t,r)):(this.emit("error",new Xv),this.abort())};ge.prototype.end=function(e,t,r){if(typeof e=="function"?(r=e,e=t=null):typeof t=="function"&&(r=t,t=null),!e)this._ended=this._ending=!0,this._currentRequest.end(null,null,r);else{var s=this,n=this._currentRequest;this.write(e,t,function(){s._ended=!0,n.end(null,null,r)}),this._ending=!0}};ge.prototype.setHeader=function(e,t){this._options.headers[e]=t,this._currentRequest.setHeader(e,t)};ge.prototype.removeHeader=function(e){delete this._options.headers[e],this._currentRequest.removeHeader(e)};ge.prototype.setTimeout=function(e,t){var r=this;function s(o){o.setTimeout(e),o.removeListener("timeout",o.destroy),o.addListener("timeout",o.destroy)}function n(o){r._timeout&&clearTimeout(r._timeout),r._timeout=setTimeout(function(){r.emit("timeout"),i()},e),s(o)}function i(){r._timeout&&(clearTimeout(r._timeout),r._timeout=null),r.removeListener("abort",i),r.removeListener("error",i),r.removeListener("response",i),t&&r.removeListener("timeout",t),r.socket||r._currentRequest.removeListener("socket",n)}return t&&this.on("timeout",t),this.socket?n(this.socket):this._currentRequest.once("socket",n),this.on("socket",s),this.on("abort",i),this.on("error",i),this.on("response",i),this};["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(e){ge.prototype[e]=function(t,r){return this._currentRequest[e](t,r)}});["aborted","connection","socket"].forEach(function(e){Object.defineProperty(ge.prototype,e,{get:function(){return this._currentRequest[e]}})});ge.prototype._sanitizeOptions=function(e){if(e.headers||(e.headers={}),e.host&&(e.hostname||(e.hostname=e.host),delete e.host),!e.pathname&&e.path){var t=e.path.indexOf("?");t<0?e.pathname=e.path:(e.pathname=e.path.substring(0,t),e.search=e.path.substring(t))}};ge.prototype._performRequest=function(){var e=this._options.protocol,t=this._options.nativeProtocols[e];if(!t){this.emit("error",new TypeError("Unsupported protocol "+e));return}if(this._options.agents){var r=e.slice(0,-1);this._options.agent=this._options.agents[r]}var s=this._currentRequest=t.request(this._options,this._onNativeResponse);s._redirectable=this;for(var n of ki)s.on(n,ji[n]);if(this._currentUrl=/^\//.test(this._options.path)?mt.format(this._options):this._currentUrl=this._options.path,this._isRedirect){var i=0,o=this,a=this._requestBodyBuffers;(function u(f){if(s===o._currentRequest)if(f)o.emit("error",f);else if(i<a.length){var c=a[i++];s.finished||s.write(c.data,c.encoding,u)}else o._ended&&s.end()})()}};ge.prototype._processResponse=function(e){var t=e.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:e.headers,statusCode:t});var r=e.headers.location;if(!r||this._options.followRedirects===!1||t<300||t>=400){e.responseUrl=this._currentUrl,e.redirects=this._redirects,this.emit("response",e),this._requestBodyBuffers=[];return}if(sl(this._currentRequest),e.destroy(),++this._redirectCount>this._options.maxRedirects){this.emit("error",new Qv);return}var s,n=this._options.beforeRedirect;n&&(s=Object.assign({Host:e.req.getHeader("host")},this._options.headers));var i=this._options.method;((t===301||t===302)&&this._options.method==="POST"||t===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],Fi(/^content-/i,this._options.headers));var o=Fi(/^host$/i,this._options.headers),a=mt.parse(this._currentUrl),u=o||a.host,f=/^\w+:/.test(r)?this._currentUrl:mt.format(Object.assign(a,{host:u})),c;try{c=mt.resolve(f,r)}catch(p){this.emit("error",new el(p));return}Zc("redirecting to",c),this._isRedirect=!0;var l=mt.parse(c);if(Object.assign(this._options,l),(l.protocol!==a.protocol&&l.protocol!=="https:"||l.host!==u&&!Zv(l.host,u))&&Fi(/^(?:authorization|cookie)$/i,this._options.headers),typeof n=="function"){var h={headers:e.headers,statusCode:t},y={url:f,method:i,headers:s};try{n(this._options,h,y)}catch(p){this.emit("error",p);return}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(p){this.emit("error",new el(p))}};function tl(e){var t={maxRedirects:21,maxBodyLength:10*1024*1024},r={};return Object.keys(e).forEach(function(s){var n=s+":",i=r[n]=e[s],o=t[s]=Object.create(i);function a(f,c,l){if(typeof f=="string"){var h=f;try{f=rl(new $i(h))}catch{f=mt.parse(h)}}else $i&&f instanceof $i?f=rl(f):(l=c,c=f,f={protocol:n});return typeof c=="function"&&(l=c,c=null),c=Object.assign({maxRedirects:t.maxRedirects,maxBodyLength:t.maxBodyLength},f,c),c.nativeProtocols=r,Yv.equal(c.protocol,n,"protocol mismatch"),Zc("options",c),new ge(c,l)}function u(f,c,l){var h=o.request(f,c,l);return h.end(),h}Object.defineProperties(o,{request:{value:a,configurable:!0,enumerable:!0,writable:!0},get:{value:u,configurable:!0,enumerable:!0,writable:!0}})}),t}function Jv(){}function rl(e){var t={protocol:e.protocol,hostname:e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:e.pathname+e.search,href:e.href};return e.port!==""&&(t.port=Number(e.port)),t}function Fi(e,t){var r;for(var s in t)e.test(s)&&(r=t[s],delete t[s]);return r===null||typeof r=="undefined"?void 0:String(r).trim()}function Ys(e,t){function r(s){Error.captureStackTrace(this,this.constructor),s?(this.message=t+": "+s.message,this.cause=s):this.message=t}return r.prototype=new Error,r.prototype.constructor=r,r.prototype.name="Error ["+e+"]",r.prototype.code=e,r}function sl(e){for(var t of ki)e.removeListener(t,ji[t]);e.on("error",Jv),e.abort()}function Zv(e,t){let r=e.length-t.length-1;return r>0&&e[r]==="."&&e.endsWith(t)}Bi.exports=tl({http:Vv,https:Kv});Bi.exports.wrap=tl});var ol=d((xT,il)=>{var eE=require("http"),tE=require("https"),Dr=Nc(),Qs=Us(),rE=nl();Dr=Object.keys(Dr).map(function(e){return Dr[e]});var sE={http:eE,https:tE};il.exports={deleteLength:function(t,r,s){(t.method==="DELETE"||t.method==="OPTIONS")&&!t.headers["content-length"]&&(t.headers["content-length"]="0",delete t.headers["transfer-encoding"])},timeout:function(t,r,s){s.timeout&&t.socket.setTimeout(s.timeout)},XHeaders:function(t,r,s){if(!!s.xfwd){var n=t.isSpdy||Qs.hasEncryptedConnection(t),i={for:t.connection.remoteAddress||t.socket.remoteAddress,port:Qs.getPort(t),proto:n?"https":"http"};["for","port","proto"].forEach(function(o){t.headers["x-forwarded-"+o]=(t.headers["x-forwarded-"+o]||"")+(t.headers["x-forwarded-"+o]?",":"")+i[o]}),t.headers["x-forwarded-host"]=t.headers["x-forwarded-host"]||t.headers.host||""}},stream:function(t,r,s,n,i,o){i.emit("start",t,r,s.target||s.forward);var a=s.followRedirects?rE:sE,u=a.http,f=a.https;if(s.forward){var c=(s.forward.protocol==="https:"?f:u).request(Qs.setupOutgoing(s.ssl||{},s,t,"forward")),l=p(c,s.forward);if(t.on("error",l),c.on("error",l),(s.buffer||t).pipe(c),!s.target)return r.end()}var h=(s.target.protocol==="https:"?f:u).request(Qs.setupOutgoing(s.ssl||{},s,t));h.on("socket",function(g){i&&!h.getHeader("expect")&&i.emit("proxyReq",h,t,r,s)}),s.proxyTimeout&&h.setTimeout(s.proxyTimeout,function(){h.abort()}),t.on("aborted",function(){h.abort()});var y=p(h,s.target);t.on("error",y),h.on("error",y);function p(g,E){return function(q){if(t.socket.destroyed&&q.code==="ECONNRESET")return i.emit("econnreset",q,t,r,E),g.abort();o?o(q,t,r,E):i.emit("error",q,t,r,E)}}(s.buffer||t).pipe(h),h.on("response",function(g){if(i&&i.emit("proxyRes",g,t,r),!r.headersSent&&!s.selfHandleResponse)for(var E=0;E<Dr.length&&!Dr[E](t,r,g,s);E++);r.finished?i&&i.emit("end",t,r,g):(g.on("end",function(){i&&i.emit("end",t,r,g)}),s.selfHandleResponse||g.pipe(r))})}}});var ul=d((wT,al)=>{var nE=require("http"),iE=require("https"),Vt=Us();al.exports={checkMethodAndHeader:function(t,r){if(t.method!=="GET"||!t.headers.upgrade||t.headers.upgrade.toLowerCase()!=="websocket")return r.destroy(),!0},XHeaders:function(t,r,s){if(!!s.xfwd){var n={for:t.connection.remoteAddress||t.socket.remoteAddress,port:Vt.getPort(t),proto:Vt.hasEncryptedConnection(t)?"wss":"ws"};["for","port","proto"].forEach(function(i){t.headers["x-forwarded-"+i]=(t.headers["x-forwarded-"+i]||"")+(t.headers["x-forwarded-"+i]?",":"")+n[i]})}},stream:function(t,r,s,n,i,o){var a=function(c,l){return Object.keys(l).reduce(function(h,y){var p=l[y];if(!Array.isArray(p))return h.push(y+": "+p),h;for(var g=0;g<p.length;g++)h.push(y+": "+p[g]);return h},[c]).join(`\r
`)+`\r
\r
`};Vt.setupSocket(r),n&&n.length&&r.unshift(n);var u=(Vt.isSSL.test(s.target.protocol)?iE:nE).request(Vt.setupOutgoing(s.ssl||{},s,t));return i&&i.emit("proxyReqWs",u,t,r,s,n),u.on("error",f),u.on("response",function(c){c.upgrade||(r.write(a("HTTP/"+c.httpVersion+" "+c.statusCode+" "+c.statusMessage,c.headers)),c.pipe(r))}),u.on("upgrade",function(c,l,h){l.on("error",f),l.on("end",function(){i.emit("close",c,l,h)}),r.on("error",function(){l.end()}),Vt.setupSocket(l),h&&h.length&&l.unshift(h),r.write(a("HTTP/1.1 101 Switching Protocols",c.headers)),l.pipe(r).pipe(l),i.emit("open",l),i.emit("proxySocket",l)}),u.end();function f(c){o?o(c,t,r):i.emit("error",c,t,r),r.end()}}}});var _l=d((TT,pl)=>{var cl=pl.exports,ll=require("util")._extend,oE=require("url").parse,fl=Pc(),aE=require("http"),uE=require("https"),hl=ol(),dl=ul();cl.Server=yt;function Ui(e){return function(t){return function(r,s){var n=e==="ws"?this.wsPasses:this.webPasses,i=[].slice.call(arguments),o=i.length-1,a,u;typeof i[o]=="function"&&(u=i[o],o--);var f=t;if(!(i[o]instanceof Buffer)&&i[o]!==s&&(f=ll({},t),ll(f,i[o]),o--),i[o]instanceof Buffer&&(a=i[o]),["target","forward"].forEach(function(l){typeof f[l]=="string"&&(f[l]=oE(f[l]))}),!f.target&&!f.forward)return this.emit("error",new Error("Must provide a proper URL as target"));for(var c=0;c<n.length&&!n[c](r,s,f,a,this,u);c++);}}}cl.createRightProxy=Ui;function yt(e){fl.call(this),e=e||{},e.prependPath=e.prependPath!==!1,this.web=this.proxyRequest=Ui("web")(e),this.ws=this.proxyWebsocketRequest=Ui("ws")(e),this.options=e,this.webPasses=Object.keys(hl).map(function(t){return hl[t]}),this.wsPasses=Object.keys(dl).map(function(t){return dl[t]}),this.on("error",this.onError,this)}require("util").inherits(yt,fl);yt.prototype.onError=function(e){if(this.listeners("error").length===1)throw e};yt.prototype.listen=function(e,t){var r=this,s=function(n,i){r.web(n,i)};return this._server=this.options.ssl?uE.createServer(this.options.ssl,s):aE.createServer(s),this.options.ws&&this._server.on("upgrade",function(n,i,o){r.ws(n,i,o)}),this._server.listen(e,t),this};yt.prototype.close=function(e){var t=this;this._server&&this._server.close(r);function r(){t._server=null,e&&e.apply(null,arguments)}};yt.prototype.before=function(e,t,r){if(e!=="ws"&&e!=="web")throw new Error("type must be `web` or `ws`");var s=e==="ws"?this.wsPasses:this.webPasses,n=!1;if(s.forEach(function(i,o){i.name===t&&(n=o)}),n===!1)throw new Error("No such pass");s.splice(n,0,r)};yt.prototype.after=function(e,t,r){if(e!=="ws"&&e!=="web")throw new Error("type must be `web` or `ws`");var s=e==="ws"?this.wsPasses:this.webPasses,n=!1;if(s.forEach(function(i,o){i.name===t&&(n=o)}),n===!1)throw new Error("No such pass");s.splice(n++,0,r)}});var ml=d((PT,gl)=>{var qr=_l().Server;function Gi(e){return new qr(e)}qr.createProxyServer=Gi;qr.createServer=Gi;qr.createProxy=Gi;gl.exports=qr});var vl=d((OT,yl)=>{yl.exports=ml()});var El=d(Lr=>{"use strict";var cE=Lr&&Lr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Lr,"__esModule",{value:!0});var lE=cE(vl()),fE=lE.default.createProxyServer({changeOrigin:!0});function hE(e,t,r,s){let i={target:{protocol:r.domainOrIp==="127.0.0.1"?"http":"https",host:r.domainOrIp,port:r.port}};fE.web(e,t,i,s||Function.prototype)}Lr.default=hE});var Wi=d(Ne=>{"use strict";Object.defineProperty(Ne,"__esModule",{value:!0});var dE=[/^x-0-platform/i,/^x-0-version$/i,/^x-0-t$/i,/^x-0-components$/i,/^x-0-status$/i,/^x-0-lambda-name$/i,/^x-0-lambda-schedule-timeout$/i,/^x-0-received-at$/i,/^host$/i,/^x-request-id$/i,/^content-length$/i,/^via$/i],pE=[/^layer0_/i],_E=[/^layer0_devtools/i],Kt=e=>{if(dE.find(t=>e.match(t)))throw new Error(`Header "${e}" is reserved and cannot be modified`)},gE=e=>{if(pE.find(t=>e.match(t))&&!_E.find(t=>e.match(t)))throw new Error(`Cookie "${e}" is reserved and cannot be modified`)};Ne.validateSetResponseHeader=e=>{Kt(e)};Ne.validateUpdateResponseHeader=e=>{Kt(e)};Ne.validateRemoveResponseHeader=e=>{Kt(e)};Ne.validateSetRequestHeader=e=>{Kt(e)};Ne.validateUpdateRequestHeader=e=>{Kt(e)};Ne.validateRemoveRequestHeader=e=>{Kt(e)};Ne.validateCookieName=e=>{gE(e)}});var Ki=d(Vi=>{"use strict";Object.defineProperty(Vi,"__esModule",{value:!0});function mE(e){return e==null?{}:typeof e=="string"?{path:e}:e}Vi.default=mE});var Yi=d(zs=>{"use strict";Object.defineProperty(zs,"__esModule",{value:!0});var yE=$s(),Xs=class extends Error{constructor(t){super(`Route pattern "${t}" contains invalid syntax. See https://docs.layer0.co/guides/routing#section_route_pattern_syntax`);this.isUserError=!0}};zs.PathMatcherError=Xs;var Mr=class{constructor(t){this.pattern=t}match(t){if(!this.matcher)try{this.matcher=yE.match(this.pattern,{decode:decodeURIComponent})}catch{throw new Xs(this.pattern)}Mr.validatePattern(this.pattern);let r=this.matcher(t);return r?r.params:void 0}static validatePattern(t){let r=t.match(this.PARTIAL_SPLAT_ROUTE);if(r){let[s,n,i]=r,o=t.replace(`${n}${i}`,`${n}:suffix/${i}`);throw new Xs(`Partial splat routes are not supported. Use "${o}" instead of "${t}"`)}return!0}};zs.default=Mr;Mr.PARTIAL_SPLAT_ROUTE=/(\/[^:/]+)(:[^*/#?]+\*)/});var Rl=d(Qi=>{"use strict";Object.defineProperty(Qi,"__esModule",{value:!0});function vE(e){return typeof e!="string"?"":e.toLowerCase()}Qi.default=vE});var Zs=d(vt=>{"use strict";var Js=vt&&vt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},EE=vt&&vt.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(vt,"__esModule",{value:!0});var RE=J(),Ir=mr(),SE=Fs(),bE=$s(),AE=Js(Ki()),Sl=EE(Yi()),CE=Js(require("querystring")),xE=Js(Ns()),wE=Js(Rl()),Yt=class{constructor(t,r,s){this.criteria=AE.default(t),this.handler=r,this.options=s,this.criteria.path&&(this.matcher=new Sl.default(this.criteria.path))}match(t){let r=[this.matchPath,this.matchProtocol,this.matchMethod,this.matchHeaders,this.matchQueryParams,this.matchCookies,this.matchBody],s={};for(let n of r){let i=n.bind(this)(t);if(!i)return!1;Object.assign(s,i)}return t.params=s,s}matchResponse(t){return this.matchResponseStatus(t)}matchResponseStatus(t){var r,s,n;return((s=(r=this.criteria)===null||r===void 0?void 0:r.response)===null||s===void 0?void 0:s.statusCode)?!!((n=t.statusCode)===null||n===void 0?void 0:n.toString().match(this.criteria.response.statusCode)):!1}matchPath(t){return this.matcher?this.matcher.match(t.path):{}}matchMethod(t){return!this.criteria.method||!t.method?!0:new RegExp(this.criteria.method,"i").test(t.method)}matchHeaders(t){return this.criteria.headers?Ir.matchCriteriaRegexObjectWithRequestObject(this.criteria.headers,t.headers,wE.default):!0}matchBody(t){if(this.criteria.body&&this.criteria.body.parse=="json"&&t.body){let r;try{r=JSON.parse(t.body)}catch{return!1}return Ir.deepMatchObject(r,this.criteria.body.criteria)}return!0}matchQueryParams(t){return this.criteria.query?t.query?Ir.matchCriteriaRegexObjectWithRequestObject(this.criteria.query,t.query):!1:!0}matchCookies(t){if(this.criteria.cookies){let r=t.headers.cookie;if(r==null)return Object.values(this.criteria.cookies).every(i=>i===null);let s=Array.isArray(r)?r.join("; "):r,n=SE.parse(s);return Ir.matchCriteriaRegexObjectWithRequestObject(this.criteria.cookies,n)}return!0}matchProtocol(t){let r=t.headers&&t.headers[RE.HTTP_HEADERS.x0Protocol]||"https",s;return typeof this.criteria.protocol=="string"?s=new RegExp(`^${this.criteria.protocol}$`,"i"):s=new RegExp(this.criteria.protocol||"^https$","i"),Ir.testRegExp(s,r)}toString(){let s=this.criteria,{path:t}=s,r=ou(s,["path"]);return Object.keys(r).length?JSON.stringify(this.criteria):t||"fallback"}toRegex(){return Yt.toRegexp(this.criteria.path)}toJson(){var t;return JSON.stringify(M(A({},this.criteria),{label:(t=this.options)===null||t===void 0?void 0:t.label}),(r,s)=>s instanceof RegExp?s.toString():s)}toRegexString(){return this.toRegex().source}toEdgeRegexString(){return Yt.toEdgeRegexString(this.criteria.path)}isRespRoute(){return!!this.criteria.response}static toRegexp(t){if(t)try{return bE.pathToRegexp(t)}catch{throw new Sl.PathMatcherError(t)}else return/^.*$/}static toEdgeRegexString(t){return xE.default(Yt.toRegexp(t))}static pathWithQueryString(t,r){let s=CE.default.stringify(r).replace(/%3A/g,":");return t+(s&&`\\?${s}`)}};vt.default=Yt});var Al=d(Xi=>{"use strict";Object.defineProperty(Xi,"__esModule",{value:!0});var bl=require("zlib"),Et=J();function TE(e){var t;let r=(t=e.getHeader(Et.HTTP_HEADERS.contentEncoding))===null||t===void 0?void 0:t.toLowerCase();if(!r)return!0;switch(r){case Et.GZIP_ENCODING:return Buffer.isBuffer(e.body)?(e.body=bl.gunzipSync(e.body),e.removeHeader(Et.HTTP_HEADERS.contentEncoding),e.setHeader(Et.HTTP_HEADERS.contentLength,Buffer.byteLength(e.body)),!0):!1;case Et.BROTLI_ENCODING:return Buffer.isBuffer(e.body)?(e.body=bl.brotliDecompressSync(e.body),e.removeHeader(Et.HTTP_HEADERS.contentEncoding),e.setHeader(Et.HTTP_HEADERS.contentLength,Buffer.byteLength(e.body)),!0):!1;default:return!1}}Xi.default=TE});var xl=d(($T,Cl)=>{"use strict";Cl.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}});var Tl=d((kT,wl)=>{"use strict";wl.exports=j;j.Node=Rt;j.create=j;function j(e){var t=this;if(t instanceof j||(t=new j),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(n){t.push(n)});else if(arguments.length>0)for(var r=0,s=arguments.length;r<s;r++)t.push(arguments[r]);return t}j.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t};j.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};j.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};j.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)OE(this,arguments[e]);return this.length};j.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)HE(this,arguments[e]);return this.length};j.prototype.pop=function(){if(!!this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};j.prototype.shift=function(){if(!!this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};j.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,s=0;r!==null;s++)e.call(t,r.value,s,this),r=r.next};j.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,s=this.length-1;r!==null;s--)e.call(t,r.value,s,this),r=r.prev};j.prototype.get=function(e){for(var t=0,r=this.head;r!==null&&t<e;t++)r=r.next;if(t===e&&r!==null)return r.value};j.prototype.getReverse=function(e){for(var t=0,r=this.tail;r!==null&&t<e;t++)r=r.prev;if(t===e&&r!==null)return r.value};j.prototype.map=function(e,t){t=t||this;for(var r=new j,s=this.head;s!==null;)r.push(e.call(t,s.value,this)),s=s.next;return r};j.prototype.mapReverse=function(e,t){t=t||this;for(var r=new j,s=this.tail;s!==null;)r.push(e.call(t,s.value,this)),s=s.prev;return r};j.prototype.reduce=function(e,t){var r,s=this.head;if(arguments.length>1)r=t;else if(this.head)s=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var n=0;s!==null;n++)r=e(r,s.value,n),s=s.next;return r};j.prototype.reduceReverse=function(e,t){var r,s=this.tail;if(arguments.length>1)r=t;else if(this.tail)s=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var n=this.length-1;s!==null;n--)r=e(r,s.value,n),s=s.prev;return r};j.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;r!==null;t++)e[t]=r.value,r=r.next;return e};j.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;r!==null;t++)e[t]=r.value,r=r.prev;return e};j.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var r=new j;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var s=0,n=this.head;n!==null&&s<e;s++)n=n.next;for(;n!==null&&s<t;s++,n=n.next)r.push(n.value);return r};j.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var r=new j;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var s=this.length,n=this.tail;n!==null&&s>t;s--)n=n.prev;for(;n!==null&&s>e;s--,n=n.prev)r.push(n.value);return r};j.prototype.splice=function(e,t,...r){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var s=0,n=this.head;n!==null&&s<e;s++)n=n.next;for(var i=[],s=0;n&&s<t;s++)i.push(n.value),n=this.removeNode(n);n===null&&(n=this.tail),n!==this.head&&n!==this.tail&&(n=n.prev);for(var s=0;s<r.length;s++)n=PE(this,n,r[s]);return i};j.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;r!==null;r=r.prev){var s=r.prev;r.prev=r.next,r.next=s}return this.head=t,this.tail=e,this};function PE(e,t,r){var s=t===e.head?new Rt(r,null,t,e):new Rt(r,t,t.next,e);return s.next===null&&(e.tail=s),s.prev===null&&(e.head=s),e.length++,s}function OE(e,t){e.tail=new Rt(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function HE(e,t){e.head=new Rt(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function Rt(e,t,r,s){if(!(this instanceof Rt))return new Rt(e,t,r,s);this.list=s,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{xl()(j)}catch{}});var Ml=d((jT,Ll)=>{"use strict";var DE=Tl(),St=Symbol("max"),$e=Symbol("length"),Qt=Symbol("lengthCalculator"),Nr=Symbol("allowStale"),bt=Symbol("maxAge"),ke=Symbol("dispose"),Pl=Symbol("noDisposeOnSet"),ee=Symbol("lruList"),xe=Symbol("cache"),Ol=Symbol("updateAgeOnGet"),zi=()=>1,Hl=class{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");let r=this[St]=t.max||1/0,s=t.length||zi;if(this[Qt]=typeof s!="function"?zi:s,this[Nr]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[bt]=t.maxAge||0,this[ke]=t.dispose,this[Pl]=t.noDisposeOnSet||!1,this[Ol]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[St]=t||1/0,$r(this)}get max(){return this[St]}set allowStale(t){this[Nr]=!!t}get allowStale(){return this[Nr]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[bt]=t,$r(this)}get maxAge(){return this[bt]}set lengthCalculator(t){typeof t!="function"&&(t=zi),t!==this[Qt]&&(this[Qt]=t,this[$e]=0,this[ee].forEach(r=>{r.length=this[Qt](r.value,r.key),this[$e]+=r.length})),$r(this)}get lengthCalculator(){return this[Qt]}get length(){return this[$e]}get itemCount(){return this[ee].length}rforEach(t,r){r=r||this;for(let s=this[ee].tail;s!==null;){let n=s.prev;ql(this,t,s,r),s=n}}forEach(t,r){r=r||this;for(let s=this[ee].head;s!==null;){let n=s.next;ql(this,t,s,r),s=n}}keys(){return this[ee].toArray().map(t=>t.key)}values(){return this[ee].toArray().map(t=>t.value)}reset(){this[ke]&&this[ee]&&this[ee].length&&this[ee].forEach(t=>this[ke](t.key,t.value)),this[xe]=new Map,this[ee]=new DE,this[$e]=0}dump(){return this[ee].map(t=>en(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[ee]}set(t,r,s){if(s=s||this[bt],s&&typeof s!="number")throw new TypeError("maxAge must be a number");let n=s?Date.now():0,i=this[Qt](r,t);if(this[xe].has(t)){if(i>this[St])return Xt(this,this[xe].get(t)),!1;let u=this[xe].get(t).value;return this[ke]&&(this[Pl]||this[ke](t,u.value)),u.now=n,u.maxAge=s,u.value=r,this[$e]+=i-u.length,u.length=i,this.get(t),$r(this),!0}let o=new Dl(t,r,i,n,s);return o.length>this[St]?(this[ke]&&this[ke](t,r),!1):(this[$e]+=o.length,this[ee].unshift(o),this[xe].set(t,this[ee].head),$r(this),!0)}has(t){if(!this[xe].has(t))return!1;let r=this[xe].get(t).value;return!en(this,r)}get(t){return Ji(this,t,!0)}peek(t){return Ji(this,t,!1)}pop(){let t=this[ee].tail;return t?(Xt(this,t),t.value):null}del(t){Xt(this,this[xe].get(t))}load(t){this.reset();let r=Date.now();for(let s=t.length-1;s>=0;s--){let n=t[s],i=n.e||0;if(i===0)this.set(n.k,n.v);else{let o=i-r;o>0&&this.set(n.k,n.v,o)}}}prune(){this[xe].forEach((t,r)=>Ji(this,r,!1))}},Ji=(e,t,r)=>{let s=e[xe].get(t);if(s){let n=s.value;if(en(e,n)){if(Xt(e,s),!e[Nr])return}else r&&(e[Ol]&&(s.value.now=Date.now()),e[ee].unshiftNode(s));return n.value}},en=(e,t)=>{if(!t||!t.maxAge&&!e[bt])return!1;let r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[bt]&&r>e[bt]},$r=e=>{if(e[$e]>e[St])for(let t=e[ee].tail;e[$e]>e[St]&&t!==null;){let r=t.prev;Xt(e,t),t=r}},Xt=(e,t)=>{if(t){let r=t.value;e[ke]&&e[ke](r.key,r.value),e[$e]-=r.length,e[xe].delete(r.key),e[ee].removeNode(t)}},Dl=class{constructor(t,r,s,n,i){this.key=t,this.value=r,this.length=s,this.now=n,this.maxAge=i||0}},ql=(e,t,r,s)=>{let n=r.value;en(e,n)&&(Xt(e,r),e[Nr]||(n=void 0)),n&&t.call(s,n.value,n.key,e)};Ll.exports=Hl});var po=d((Fr,er)=>{var qE=200,Il="__lodash_hash_undefined__",Nl=9007199254740991,Zi="[object Arguments]",LE="[object Array]",$l="[object Boolean]",kl="[object Date]",ME="[object Error]",eo="[object Function]",jl="[object GeneratorFunction]",tn="[object Map]",Fl="[object Number]",to="[object Object]",Bl="[object Promise]",Ul="[object RegExp]",rn="[object Set]",Gl="[object String]",Wl="[object Symbol]",ro="[object WeakMap]",Vl="[object ArrayBuffer]",sn="[object DataView]",Kl="[object Float32Array]",Yl="[object Float64Array]",Ql="[object Int8Array]",Xl="[object Int16Array]",zl="[object Int32Array]",Jl="[object Uint8Array]",Zl="[object Uint8ClampedArray]",ef="[object Uint16Array]",tf="[object Uint32Array]",IE=/[\\^$.*+?()[\]{}|]/g,NE=/\w*$/,$E=/^\[object .+?Constructor\]$/,kE=/^(?:0|[1-9]\d*)$/,B={};B[Zi]=B[LE]=B[Vl]=B[sn]=B[$l]=B[kl]=B[Kl]=B[Yl]=B[Ql]=B[Xl]=B[zl]=B[tn]=B[Fl]=B[to]=B[Ul]=B[rn]=B[Gl]=B[Wl]=B[Jl]=B[Zl]=B[ef]=B[tf]=!0;B[ME]=B[eo]=B[ro]=!1;var jE=typeof global=="object"&&global&&global.Object===Object&&global,FE=typeof self=="object"&&self&&self.Object===Object&&self,je=jE||FE||Function("return this")(),rf=typeof Fr=="object"&&Fr&&!Fr.nodeType&&Fr,sf=rf&&typeof er=="object"&&er&&!er.nodeType&&er,BE=sf&&sf.exports===rf;function UE(e,t){return e.set(t[0],t[1]),e}function GE(e,t){return e.add(t),e}function WE(e,t){for(var r=-1,s=e?e.length:0;++r<s&&t(e[r],r,e)!==!1;);return e}function VE(e,t){for(var r=-1,s=t.length,n=e.length;++r<s;)e[n+r]=t[r];return e}function nf(e,t,r,s){var n=-1,i=e?e.length:0;for(s&&i&&(r=e[++n]);++n<i;)r=t(r,e[n],n,e);return r}function KE(e,t){for(var r=-1,s=Array(e);++r<e;)s[r]=t(r);return s}function YE(e,t){return e==null?void 0:e[t]}function of(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}function af(e){var t=-1,r=Array(e.size);return e.forEach(function(s,n){r[++t]=[n,s]}),r}function so(e,t){return function(r){return e(t(r))}}function uf(e){var t=-1,r=Array(e.size);return e.forEach(function(s){r[++t]=s}),r}var QE=Array.prototype,XE=Function.prototype,nn=Object.prototype,no=je["__core-js_shared__"],cf=function(){var e=/[^.]+$/.exec(no&&no.keys&&no.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),lf=XE.toString,Je=nn.hasOwnProperty,on=nn.toString,zE=RegExp("^"+lf.call(Je).replace(IE,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ff=BE?je.Buffer:void 0,hf=je.Symbol,df=je.Uint8Array,JE=so(Object.getPrototypeOf,Object),ZE=Object.create,eR=nn.propertyIsEnumerable,tR=QE.splice,pf=Object.getOwnPropertySymbols,rR=ff?ff.isBuffer:void 0,sR=so(Object.keys,Object),io=Zt(je,"DataView"),kr=Zt(je,"Map"),oo=Zt(je,"Promise"),ao=Zt(je,"Set"),uo=Zt(je,"WeakMap"),jr=Zt(Object,"create"),nR=xt(io),iR=xt(kr),oR=xt(oo),aR=xt(ao),uR=xt(uo),_f=hf?hf.prototype:void 0,gf=_f?_f.valueOf:void 0;function At(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}function cR(){this.__data__=jr?jr(null):{}}function lR(e){return this.has(e)&&delete this.__data__[e]}function fR(e){var t=this.__data__;if(jr){var r=t[e];return r===Il?void 0:r}return Je.call(t,e)?t[e]:void 0}function hR(e){var t=this.__data__;return jr?t[e]!==void 0:Je.call(t,e)}function dR(e,t){var r=this.__data__;return r[e]=jr&&t===void 0?Il:t,this}At.prototype.clear=cR;At.prototype.delete=lR;At.prototype.get=fR;At.prototype.has=hR;At.prototype.set=dR;function Fe(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}function pR(){this.__data__=[]}function _R(e){var t=this.__data__,r=an(t,e);if(r<0)return!1;var s=t.length-1;return r==s?t.pop():tR.call(t,r,1),!0}function gR(e){var t=this.__data__,r=an(t,e);return r<0?void 0:t[r][1]}function mR(e){return an(this.__data__,e)>-1}function yR(e,t){var r=this.__data__,s=an(r,e);return s<0?r.push([e,t]):r[s][1]=t,this}Fe.prototype.clear=pR;Fe.prototype.delete=_R;Fe.prototype.get=gR;Fe.prototype.has=mR;Fe.prototype.set=yR;function zt(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}function vR(){this.__data__={hash:new At,map:new(kr||Fe),string:new At}}function ER(e){return un(this,e).delete(e)}function RR(e){return un(this,e).get(e)}function SR(e){return un(this,e).has(e)}function bR(e,t){return un(this,e).set(e,t),this}zt.prototype.clear=vR;zt.prototype.delete=ER;zt.prototype.get=RR;zt.prototype.has=SR;zt.prototype.set=bR;function Jt(e){this.__data__=new Fe(e)}function AR(){this.__data__=new Fe}function CR(e){return this.__data__.delete(e)}function xR(e){return this.__data__.get(e)}function wR(e){return this.__data__.has(e)}function TR(e,t){var r=this.__data__;if(r instanceof Fe){var s=r.__data__;if(!kr||s.length<qE-1)return s.push([e,t]),this;r=this.__data__=new zt(s)}return r.set(e,t),this}Jt.prototype.clear=AR;Jt.prototype.delete=CR;Jt.prototype.get=xR;Jt.prototype.has=wR;Jt.prototype.set=TR;function PR(e,t){var r=fo(e)||ZR(e)?KE(e.length,String):[],s=r.length,n=!!s;for(var i in e)(t||Je.call(e,i))&&!(n&&(i=="length"||QR(i,s)))&&r.push(i);return r}function mf(e,t,r){var s=e[t];(!(Je.call(e,t)&&Rf(s,r))||r===void 0&&!(t in e))&&(e[t]=r)}function an(e,t){for(var r=e.length;r--;)if(Rf(e[r][0],t))return r;return-1}function OR(e,t){return e&&yf(t,ho(t),e)}function co(e,t,r,s,n,i,o){var a;if(s&&(a=i?s(e,n,i,o):s(e)),a!==void 0)return a;if(!cn(e))return e;var u=fo(e);if(u){if(a=VR(e),!t)return UR(e,a)}else{var f=Ct(e),c=f==eo||f==jl;if(tS(e))return IR(e,t);if(f==to||f==Zi||c&&!i){if(of(e))return i?e:{};if(a=KR(c?{}:e),!t)return GR(e,OR(a,e))}else{if(!B[f])return i?e:{};a=YR(e,f,co,t)}}o||(o=new Jt);var l=o.get(e);if(l)return l;if(o.set(e,a),!u)var h=r?WR(e):ho(e);return WE(h||e,function(y,p){h&&(p=y,y=e[p]),mf(a,p,co(y,t,r,s,p,e,o))}),a}function HR(e){return cn(e)?ZE(e):{}}function DR(e,t,r){var s=t(e);return fo(e)?s:VE(s,r(e))}function qR(e){return on.call(e)}function LR(e){if(!cn(e)||zR(e))return!1;var t=bf(e)||of(e)?zE:$E;return t.test(xt(e))}function MR(e){if(!Ef(e))return sR(e);var t=[];for(var r in Object(e))Je.call(e,r)&&r!="constructor"&&t.push(r);return t}function IR(e,t){if(t)return e.slice();var r=new e.constructor(e.length);return e.copy(r),r}function lo(e){var t=new e.constructor(e.byteLength);return new df(t).set(new df(e)),t}function NR(e,t){var r=t?lo(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}function $R(e,t,r){var s=t?r(af(e),!0):af(e);return nf(s,UE,new e.constructor)}function kR(e){var t=new e.constructor(e.source,NE.exec(e));return t.lastIndex=e.lastIndex,t}function jR(e,t,r){var s=t?r(uf(e),!0):uf(e);return nf(s,GE,new e.constructor)}function FR(e){return gf?Object(gf.call(e)):{}}function BR(e,t){var r=t?lo(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function UR(e,t){var r=-1,s=e.length;for(t||(t=Array(s));++r<s;)t[r]=e[r];return t}function yf(e,t,r,s){r||(r={});for(var n=-1,i=t.length;++n<i;){var o=t[n],a=s?s(r[o],e[o],o,r,e):void 0;mf(r,o,a===void 0?e[o]:a)}return r}function GR(e,t){return yf(e,vf(e),t)}function WR(e){return DR(e,ho,vf)}function un(e,t){var r=e.__data__;return XR(t)?r[typeof t=="string"?"string":"hash"]:r.map}function Zt(e,t){var r=YE(e,t);return LR(r)?r:void 0}var vf=pf?so(pf,Object):nS,Ct=qR;(io&&Ct(new io(new ArrayBuffer(1)))!=sn||kr&&Ct(new kr)!=tn||oo&&Ct(oo.resolve())!=Bl||ao&&Ct(new ao)!=rn||uo&&Ct(new uo)!=ro)&&(Ct=function(e){var t=on.call(e),r=t==to?e.constructor:void 0,s=r?xt(r):void 0;if(s)switch(s){case nR:return sn;case iR:return tn;case oR:return Bl;case aR:return rn;case uR:return ro}return t});function VR(e){var t=e.length,r=e.constructor(t);return t&&typeof e[0]=="string"&&Je.call(e,"index")&&(r.index=e.index,r.input=e.input),r}function KR(e){return typeof e.constructor=="function"&&!Ef(e)?HR(JE(e)):{}}function YR(e,t,r,s){var n=e.constructor;switch(t){case Vl:return lo(e);case $l:case kl:return new n(+e);case sn:return NR(e,s);case Kl:case Yl:case Ql:case Xl:case zl:case Jl:case Zl:case ef:case tf:return BR(e,s);case tn:return $R(e,s,r);case Fl:case Gl:return new n(e);case Ul:return kR(e);case rn:return jR(e,s,r);case Wl:return FR(e)}}function QR(e,t){return t=t??Nl,!!t&&(typeof e=="number"||kE.test(e))&&e>-1&&e%1==0&&e<t}function XR(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function zR(e){return!!cf&&cf in e}function Ef(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||nn;return e===r}function xt(e){if(e!=null){try{return lf.call(e)}catch{}try{return e+""}catch{}}return""}function JR(e){return co(e,!0,!0)}function Rf(e,t){return e===t||e!==e&&t!==t}function ZR(e){return eS(e)&&Je.call(e,"callee")&&(!eR.call(e,"callee")||on.call(e)==Zi)}var fo=Array.isArray;function Sf(e){return e!=null&&rS(e.length)&&!bf(e)}function eS(e){return sS(e)&&Sf(e)}var tS=rR||iS;function bf(e){var t=cn(e)?on.call(e):"";return t==eo||t==jl}function rS(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Nl}function cn(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function sS(e){return!!e&&typeof e=="object"}function ho(e){return Sf(e)?PR(e):MR(e)}function nS(){return[]}function iS(){return!1}er.exports=JR});var go=d(Be=>{"use strict";var Af=Be&&Be.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Be,"__esModule",{value:!0});var te=J(),oS=Af(Ml()),aS=Af(po()),_o;function uS(){return process.env.LAYER0_CACHE==="true"}Be.isCacheEnabled=uS;function ln(){return _o||(_o=new oS.default),_o}Be.getCache=ln;function cS(){ln().reset()}Be.clearCache=cS;function lS(e){return ln().get(e.toString())}Be.getCachedResponse=lS;function fS({response:e,cacheKey:t,context:r}){var s;let n=(s=t.method)===null||s===void 0?void 0:s.toLowerCase();if(n&&!te.CACHEABLE_METHODS.has(n)&&r.cacheRouteMethod!==n)return e.setHeader(te.HTTP_HEADERS.x0CachingStatus,te.CACHING_STATUS.method),!1;if(t.body&&Buffer.from(t.body,"utf8").length>8e3)return e.setHeader(te.HTTP_HEADERS.x0CachingStatus,te.CACHING_STATUS.bodyTooBig),!1;if(e.statusCode&&e.statusCode>=400)return e.setHeader(te.HTTP_HEADERS.x0CachingStatus,te.CACHING_STATUS.code),!1;if(e.getHeader(te.HTTP_HEADERS.setCookie))return e.setHeader(te.HTTP_HEADERS.x0CachingStatus,te.CACHING_STATUS.setCookie),!1;let i=dS(e);return i.private&&!r.forcePrivateCaching?(e.setHeader(te.HTTP_HEADERS.x0CachingStatus,te.CACHING_STATUS.private),!1):i.maxAge?(ln().set(t.toString(),hS(e),i.maxAge*1e3),e.setHeader(te.HTTP_HEADERS.x0CachingStatus,te.CACHING_STATUS.ok),!0):(e.setHeader(te.HTTP_HEADERS.x0CachingStatus,te.CACHING_STATUS.noMaxAge),!1)}Be.maybeCacheResponse=fS;function hS(e){return{statusCode:e.statusCode,statusMessage:e.statusMessage,headers:aS.default(e.getHeaders()),body:e.body}}function dS(e){return A(A(A({},{private:!1,maxAge:0}),Cf(e.getHeader(te.HTTP_HEADERS.cacheControl))),Cf(e.getHeader(te.HTTP_HEADERS.x0CacheControl)))}function Cf(e){let t={};if(e){Array.isArray(e)||(e=[e]);let r={};for(let s of e){let n=s.split(/,\s*/).map(i=>i.split(/=/));for(let[i,o]of n)i&&o&&(r[i.toLowerCase()]=o),i.toLowerCase()==="private"&&(t.private=!0);t.maxAge=parseInt(r["s-maxage"]||r["max-age"]||"0")}}return t}});var xf=d(Br=>{"use strict";var pS=Br&&Br.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Br,"__esModule",{value:!0});var Ze=J(),_S=pS(require("crypto")),fn=class{constructor(t,r){var s;this.cookies={};let{host:n}=t.headers;if(this.body=t.body,this.method=(s=t.method)===null||s===void 0?void 0:s.toLowerCase(),this.query=this.excludeLayer0QueryParams(t.query||{}),this.pathname=new URL(t.url,`http://${n}`).pathname,this.headers=this.getDefaultHeaders(t.headers),r)for(let i of r.getActions())i(this,t)}static create(t,r){return new fn(t,r)}excludeLayer0QueryParams(t){let r={};for(let s in t)s.startsWith("layer0_")||(r[s]=t[s]);return r}toSortedArray(t){return Object.keys(t).sort().map(r=>[r,t[r]])}getDefaultHeaders(t){return{[Ze.HTTP_HEADERS.host]:t[Ze.HTTP_HEADERS.host],[Ze.HTTP_HEADERS.acceptEncoding]:t[Ze.HTTP_HEADERS.acceptEncoding],[Ze.HTTP_HEADERS.x0Destination]:t[Ze.HTTP_HEADERS.x0Destination],[Ze.HTTP_HEADERS.x0Protocol]:t[Ze.HTTP_HEADERS.x0Protocol]}}toString(){return JSON.stringify({pathname:this.pathname,method:this.method,query:this.toSortedArray(this.query),body:gS(this.body),headers:this.toSortedArray(this.headers),cookies:this.toSortedArray(this.cookies)})}};Br.default=fn;function gS(e){if(!e)return null;let t=_S.default.createHash("sha256");return t.update(e),t.digest("hex")}});var wf=d(et=>{"use strict";var mS=et&&et.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(et,"__esModule",{value:!0});var yS=mS(lt()),mo,Ur,yo="info",vo="warn",Eo="error";try{let e=yS.default("chalk"),t=e.hex("D355A7");Ur=e.grey("Layer0"),mo=e.bold(`Layer${t("0")}`),yo=e.cyan(yo),vo=e.yellow(vo),Eo=e.red(Eo)}catch{mo=Ur="Layer0"}et.infoLogLabel=`${Ur} ${yo} -`;et.warnLogLabel=`${Ur} ${vo} -`;et.errorLogLabel=`${Ur} ${Eo} -`;et.default=mo});var dn=d(Vr=>{"use strict";var me=Vr&&Vr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Vr,"__esModule",{value:!0});var Gr=me(require("fs")),vS=require("path"),tr=me(vi()),hn=me(_t()),ES=me(Ac()),RS=me(Hi()),SS=me(El()),Y=J(),Tf=kt(),Re=Wi(),Pf=me(Zs()),bS=me(Al()),Wr=go(),AS=me(xf()),oe=ei(),CS=me(Yi()),Of=me(lt()),tt=wf(),xS=ui(),Hf=me(po()),wS=me(wi()),Df=class extends xS.BaseResponseWriter{constructor(t,r,s,n){super(t,r,s);this.params={},this.streaming=!1,this.preCacheRequestActions=[],this.postCacheRequestActions=[],this.preCacheResponseActions=[],this.postCacheResponseActions=[],this.interpolateParams=i=>RS.default(this.request,this.response,i),this.redirect=(i,o={})=>{let{to:a,statusCode:u,query:f}=this._readRedirectParams(i,o),c=wS.default(this.request.url,tr.default(Tf.isBrowser()?this.interpolateParams(Pf.default.pathWithQueryString(a,f)):Pf.default.pathWithQueryString(a,f),this.request.params));this.setResponseHeader(Y.HTTP_HEADERS.location,c),this.send("",u)},this.proxy=async(i,o)=>{let a=hn.default.get(`backends.${i}`);await this.proxyHost(a,o)},this.render=i=>{console.warn(`${tt.warnLogLabel} Warning ResponseWriter#render is deprecated.`),i(this.request,this.proxy,this.request.params)},this.renderWithApp=i=>this.proxy(Y.BACKENDS.js,i),this.stream=i=>{if(process.env.NODE_ENV==="production")throw new Error("stream can only be used in development");let o=qf(hn.default.get(`backends.${i}`));this.response.setHeader(Y.HTTP_HEADERS.contentType,"text/event-stream"),this.streaming=!0,SS.default(this.request,this.response,o,Function.prototype),this.setCreateResponseAction(()=>Promise.resolve())},this.proxyHost=async(i,{path:o,transformRequest:a,transformResponse:u,headers:f,removeEmptySearchParamValues:c}={})=>{i=qf(i);let l=ES.default.create(i),h;typeof o=="function"?h=o():h=o,h=h&&tr.default(h,this.request.params),await this.setCreateResponseAction(async()=>{try{if(a){let p=new oe.InternalTiming(oe.InternalNames.transformRequest).start();try{await this.runImmediately(()=>a(this.request))}finally{p.end()}}let y=new oe.InternalTiming(oe.InternalNames.proxying).start();try{await l.fetch(this.request,this.response,{path:h||this.request.url,disableCheckCert:i.disableCheckCert,headers:f,removeEmptySearchParamValues:c})}finally{y.end()}if(u){let p=new oe.InternalTiming(oe.InternalNames.transformResponse).start();try{bS.default(this.response),await this.runImmediately(()=>u(this.response,this.request))}finally{p.end()}}}catch(y){y.type==="BackendFetchError"?(console.error(`${tt.errorLogLabel} Could not connect to backend ${i.domainOrIp}:`,y.message),this.response.statusCode=503):(console.error(`${tt.errorLogLabel} Error in ResponseWriter:`,y),this.response.statusCode=500)}})},this.updatePath=i=>{let o=tr.default(i,this.request.params);Object.defineProperty(this.request,"path",{get:()=>o})},this.rewrite=(i,o)=>{let a=tr.default(i,this.request.params);this.request.params=new CS.default(o).match(a)},this.serveStatic=async(i,o={})=>{let a=i&&tr.default(i,this.request.params),{permanent:u,exclude:f}=o;if(a=a.replace(/\/$/,""),f==null?void 0:f.some(c=>a.indexOf(c)>=0))return this.send("404 - Not found",404);if(Tf.isCloud()){let c=hn.default.get(`backends.${u?Y.BACKENDS.permanentStatic:Y.BACKENDS.static}`);await this.proxyHost(c,{path:a,transformResponse:async l=>{l.statusCode===403&&(o.loadingPage?await this.proxyHost(hn.default.get(`backends.${Y.BACKENDS.static}`),{path:tr.default(o.loadingPage,this.request.params)}):o.onNotFound?await o.onNotFound(this):(l.statusCode=404,l.statusMessage="Not Found")),o.statusCode&&(l.statusCode=o.statusCode),o.statusMessage&&(l.statusMessage=o.statusMessage)}})}else{if(!Gr.default.existsSync(a))return this.send("404 - Not found",404);Gr.default.lstatSync(a).isDirectory()&&(a=vS.join(a,"./index.html"));let c=Gr.default.statSync(a),l=Of.default("mime-types"),h=Of.default("chardet"),y=l.lookup(a);if(y)try{let p=h.analyse(Gr.default.readFileSync(a));if(p.length>0){let{name:g,confidence:E}=p[0];g&&E>90&&(y+=`; charset=${g}`)}}catch{}else y="application/octet-stream";this.setUpstreamResponseHeader(Y.HTTP_HEADERS.contentType,y),this.internalSetResponseHeader(Y.HTTP_HEADERS.contentLength,c.size.toString(),!1,this.postCacheResponseActions),o.statusCode&&(this.response.statusCode=o.statusCode,this.response.statusMessage=o.statusMessage),await this.setCreateResponseAction(()=>new Promise((p,g)=>{Gr.default.readFile(a,(E,S)=>{E?g(E):(this.response.body=S,p())})}))}},this.cache=i=>{let{browser:o,edge:a,key:u}=i;if(a){let{maxAgeSeconds:f,staleWhileRevalidateSeconds:c,forcePrivateCaching:l}=a,h=[];typeof l!="undefined"&&(this.context.forcePrivateCaching=l===!0),this.cacheKey=u,typeof this.route.criteria.method=="string"&&(this.context.cacheRouteMethod=this.route.criteria.method),f&&(h.push("max-age="+f),c&&h.push("stale-while-revalidate="+c)),h.length&&this.internalSetResponseHeader(Y.HTTP_HEADERS.x0CacheControl,h.join(", "),!1,this.preCacheResponseActions)}if(o||o===!1){let{maxAgeSeconds:f,serviceWorkerSeconds:c}=o||{maxAgeSeconds:0};if(c&&f&&f>0)throw console.error(`${tt.errorLogLabel} Within the caching configuration of your "${this.route.criteria.path}" route, when service worker caching is set, the browser max age must be set to zero. Refer to https://docs.layer0.co/guides/caching#section_caching_a_response`),new Error("When service worker caching is set, the browser max age must be set to zero. Refer to https://docs.layer0.co/guides/caching#section_caching_a_response");f===0?this.setResponseHeader(Y.HTTP_HEADERS.cacheControl,"private, no-store, no-cache"):f&&this.setResponseHeader(Y.HTTP_HEADERS.cacheControl,`private, max-age=${f}`),c&&this.setResponseHeader(Y.HTTP_HEADERS.xSwCacheControl,`max-age=${c}`)}},this.setResponseHeader=(i,o)=>{this.internalSetResponseHeader(i,o,!0,this.postCacheResponseActions)},this.internalSetResponseHeader=(i,o,a,u)=>{a&&Re.validateSetResponseHeader(i),this.scheduleExecution(u,()=>{let f=this.interpolateParams(o);this.response.setHeader(i,f)})},this.updateResponseHeader=(i,o,a)=>{this.internalUpdateResponseHeader(i,o,a,this.preCacheResponseActions)},this.internalUpdateResponseHeader=(i,o,a,u)=>{Re.validateUpdateResponseHeader(i),this.scheduleExecution(u,()=>{let f=this.response.getHeader(i),c=this.interpolateParams(a);f&&this.response.setHeader(i,f.replace(o,c))})},this.removeResponseHeader=i=>{this.internalRemoveResponseHeader(i,this.postCacheResponseActions)},this.internalRemoveResponseHeader=(i,o)=>{Re.validateRemoveResponseHeader(i),this.scheduleExecution(o,()=>{this.response.removeHeader(i)})},this.getSetCookieValues=()=>{let i=this.response.getHeader(Y.HTTP_HEADERS.setCookie);return typeof i=="string"?[i]:i||[]},this.getAddResponseCookieAction=(i,o,a={})=>()=>{let u=this.getSetCookieValues(),f=this.interpolateParams(o),c=`${i}=${f}`,l;for(l in a){let h=a[l];typeof h=="boolean"&&h?c+=`; ${l}`:c+=`; ${l}=${h}`}this.response.setHeader(Y.HTTP_HEADERS.setCookie,[...u,c])},this.addUpstreamResponseCookie=(i,o,a)=>{Re.validateCookieName(i),this.scheduleExecution(this.preCacheResponseActions,this.getAddResponseCookieAction(i,o,a))},this.addResponseCookie=(i,o,a)=>{Re.validateCookieName(i),this.scheduleExecution(this.postCacheResponseActions,this.getAddResponseCookieAction(i,o,a))},this.getUpdateResponseCookieAction=(i,o,a)=>()=>{let u=this.getSetCookieValues().map(f=>{let[c,...l]=f.split("=");if(c!==i)return f;let h=l.join("=").replace(o,a);return[c,h].join("=")});this.response.setHeader(Y.HTTP_HEADERS.setCookie,u)},this.updateUpstreamResponseCookie=(i,o,a)=>{Re.validateCookieName(i),this.scheduleExecution(this.preCacheResponseActions,this.getUpdateResponseCookieAction(i,o,a))},this.updateResponseCookie=(i,o,a)=>{Re.validateCookieName(i),this.scheduleExecution(this.postCacheResponseActions,this.getUpdateResponseCookieAction(i,o,a))},this.getRemoveResponseCookieAction=i=>()=>{let o=this.getSetCookieValues().filter(a=>a.split("=")[0]!==i);this.response.setHeader(Y.HTTP_HEADERS.setCookie,o)},this.removeUpstreamResponseCookie=i=>{Re.validateCookieName(i),this.scheduleExecution(this.preCacheResponseActions,this.getRemoveResponseCookieAction(i))},this.removeResponseCookie=i=>{Re.validateCookieName(i),this.scheduleExecution(this.postCacheResponseActions,this.getRemoveResponseCookieAction(i))},this.setUpstreamResponseHeader=(i,o)=>{let a=i.toLowerCase()!=Y.HTTP_HEADERS.x0SurrogateKey;return this.internalSetResponseHeader(i,o,a,this.preCacheResponseActions)},this.updateUpstreamResponseHeader=(i,o,a)=>this.internalUpdateResponseHeader(i,o,a,this.preCacheResponseActions),this.removeUpstreamResponseHeader=i=>this.internalRemoveResponseHeader(i,this.preCacheResponseActions),this.setRequestHeader=(i,o)=>{Re.validateSetRequestHeader(i),this.scheduleExecution(this.postCacheRequestActions,()=>{this.request.headers[i.toLowerCase()]=o})},this.runImmediatelyDepthCounter=0,this.runImmediately=async i=>{try{++this.runImmediatelyDepthCounter,await i()}finally{--this.runImmediatelyDepthCounter}},this.scheduleExecution=(i,o)=>{this.runningImmediately?o():i.push(o)},this.updateRequestHeader=(i,o,a)=>{Re.validateUpdateRequestHeader(i),this.scheduleExecution(this.postCacheRequestActions,()=>{let u=i.toLowerCase(),f=this.request.headers[u],c=this.interpolateParams(a);Array.isArray(f)?this.request.headers[u]=f.map(l=>l.replace(o,c)):f&&(this.request.headers[u]=f.replace(o,c))})},this.removeRequestHeader=i=>{Re.validateRemoveRequestHeader(i),this.scheduleExecution(this.postCacheRequestActions,()=>{delete this.request.headers[i.toLowerCase()]})},this.serviceWorker=i=>{this.cache({edge:{maxAgeSeconds:30758400},browser:{maxAgeSeconds:0}}),this.serveStatic(i)},this.appShell=i=>{this.setResponseHeader(Y.HTTP_HEADERS.contentType,"text/html"),this.serveStatic(i)},this.allowCors=(i={})=>{this.setResponseHeader("Access-Control-Allow-Origin",i.origin||"*"),i.methods&&this.setResponseHeader("Access-Control-Allow-Methods",i.methods.join(", ")),i.headers&&this.setResponseHeader("Access-Control-Allow-Headers",i.headers.join(", ")),i.maxAge&&this.setResponseHeader("Access-Control-Max-Age",i.maxAge.toString()),i.credentials!=null&&this.setResponseHeader("Access-Control-Allow-Credentials",i.credentials.toString())},this.send=(i,o=200,a)=>{this.setCreateResponseAction(async()=>{this.response.statusCode=o,this.response.statusMessage=a,typeof i=="function"?this.response.body=i():this.response.body=i})},this.compute=i=>{this.setCreateResponseAction(async()=>{await this.clearResponseAction().runImmediately(()=>i(this.request,this.response))})},this.onRouteError=i=>{let o={status:"error",message:i.message},a=i.isUserError;a&&console.error(`${tt.errorLogLabel} ${i.message}`),process.env.NODE_ENV!=="production"&&(o={message:`An error occured while running route ${this.route.toString()}: ${i.message}`,stack:a?void 0:i.stack,url:this.request.url});try{this.response.setHeader(Y.HTTP_HEADERS.contentType,"application/json"),this.response.writeHead(500),this.response.end(JSON.stringify(o))}catch{console.error(`${tt.errorLogLabel} Could not write error response because headers have already been sent.`,o)}},this.request=t,this.response=r,this.route=s,this.context=n}async sendResponse({beforeResponse:t=()=>!0}={}){let r=!1;for(let i of this.preCacheRequestActions)i();let s,n;if(Wr.isCacheEnabled()&&(n=this.context.cacheKey||AS.default.create(this.request,this.cacheKey),s=Wr.getCachedResponse(n),this.cacheKey&&(this.context.cacheKey=n),!this.validatePrefetch(s)))return console.log(`${tt.infoLogLabel} throttle ${this.request.url}`),!0;if(s)r=!0,new oe.InternalTiming(oe.InternalNames.edgeCache).set(oe.CacheValue.hit),this.applyCachedResponse(s);else{for(let o of this.postCacheRequestActions)o();this.createResponseAction&&(await this.createResponseAction(),r=!0);for(let o of this.preCacheResponseActions)o();if(!await t(this.response))return r}if(r&&!this.streaming&&!s&&Wr.isCacheEnabled()){let i=Wr.maybeCacheResponse({response:this.response,cacheKey:n,context:this.context});new oe.InternalTiming(oe.InternalNames.edgeCache).set(i?oe.CacheValue.cached:oe.CacheValue.pass)}for(let i of this.postCacheResponseActions)i();return r&&!this.streaming&&(this.logCacheStatus(),oe.addTimings(this.response),this.response.statusCode&&this.response.writeHead(this.response.statusCode,this.response.statusMessage||void 0),this.response.end(this.response.body)),r}logCacheStatus(){if(Wr.isCacheEnabled()){let t=this.response.getHeader(Y.HTTP_HEADERS.x0CachingStatus),r=oe.getInternalTiming(oe.InternalNames.edgeCache),{url:s}=this.request;console.log(`${tt.infoLogLabel} ${r} ${s}${t?` (${t})`:""}`)}}applyCachedResponse(t){this.response.statusCode=t.statusCode,this.response.statusMessage=t.statusMessage,this.response.body=Hf.default(t.body);for(let r of Object.keys(t.headers))this.response.setHeader(r,Hf.default(t.headers[r]))}validatePrefetch(t){return Object.keys(this.request.query||{}).includes(Y.THROTTLED_QUERY_PARAM)&&!t?(this.response.writeHead(Y.LAYER0_UNCACHED_PREFETCH_STATUS),this.response.end(),!1):!0}async setCreateResponseAction(t){if(this.runningImmediately)await t();else{if(this.createResponseAction!=null)throw new Error("You may only call one of the following once in your route handler: proxy, serveStatic, serviceWorker, redirect, send.");this.createResponseAction=t}}get runningImmediately(){return this.runImmediatelyDepthCounter>0}clearResponseAction(){return this.createResponseAction=void 0,this}};Vr.default=Df;function qf(e){return typeof e=="string"&&(e={domainOrIp:e}),e}});var Mf=d(Yr=>{"use strict";var TS=Yr&&Yr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Yr,"__esModule",{value:!0});var Kr=require("os"),PS=J(),Lf=TS(_t());function OS(e){if(Object.values(PS.BACKENDS).includes(e)||Lf.default.get(`backends.${e}`,!1))return;let t=Object.keys(Lf.default.get("backends"));throw t&&t.length?new Error(`To fix this problem use one of the "backends" configured in layer0.config.js:${Kr.EOL}${Kr.EOL} - ${t.join(`${Kr.EOL} - `)}${Kr.EOL}${Kr.EOL}or add "${e}" to the "backends" property in layer0.config.js.`):new Error(`Add "${e}" to the "backends" property in layer0.config.js.`)}Yr.default=OS});var So=d(wt=>{"use strict";var HS=wt&&wt.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t},Qr=wt&&wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(wt,"__esModule",{value:!0});var Xr=HS(gc()),P=J(),DS=Qr(Ls()),qS=Qr(mc()),LS=Qr(dn()),Ro=Qr(Zs()),MS=Qr(Mf()),Ue=Wi(),IS=mr(),NS=60*60*24*365*10,If=class extends LS.default{constructor(t,r,s,n){super(t,r,s,n);this.stream=()=>{},this.setRequestHeader=(i,o)=>{Ue.validateSetRequestHeader(i),this.edgeConfig.transform.request.push({action:P.ACTIONS.setHeader,name:i,value:o})},this.updateRequestHeader=(i,o,a)=>{Ue.validateUpdateRequestHeader(i),this.edgeConfig.transform.request.push({action:P.ACTIONS.updateHeader,name:i,valueRegex:o.source,replaceValue:a})},this.removeRequestHeader=i=>{Ue.validateRemoveRequestHeader(i),this.edgeConfig.transform.request.push({action:P.ACTIONS.removeHeader,name:i})},this.setResponseHeader=(i,o)=>{Ue.validateSetResponseHeader(i),this.edgeConfig.transform.response.push({action:P.ACTIONS.setHeader,name:i,value:o})},this.updateResponseHeader=(i,o,a)=>{Ue.validateUpdateResponseHeader(i),this.edgeConfig.transform.response.push({action:P.ACTIONS.updateHeader,name:i,valueRegex:o.source,replaceValue:a})},this.removeResponseHeader=i=>{Ue.validateRemoveResponseHeader(i),this.edgeConfig.transform.response.push({action:P.ACTIONS.removeHeader,name:i})},this.setUpstreamResponseHeader=(i,o)=>{i.toLowerCase()!=P.HTTP_HEADERS.x0SurrogateKey&&Ue.validateSetResponseHeader(i),this.edgeConfig.transform.upstreamResponse.push({action:P.ACTIONS.setHeader,name:i,value:o})},this.updateUpstreamResponseHeader=(i,o,a)=>{Ue.validateUpdateResponseHeader(i),this.edgeConfig.transform.upstreamResponse.push({action:P.ACTIONS.updateHeader,name:i,valueRegex:o.source,replaceValue:a})},this.removeUpstreamResponseHeader=i=>{Ue.validateRemoveResponseHeader(i),this.edgeConfig.transform.upstreamResponse.push({action:P.ACTIONS.removeHeader,name:i})},this.addResponseCookie=(i,o)=>{this.edgeConfig.transform.response.push({action:P.ACTIONS.addCookie,name:i,value:o})},this.updateResponseCookie=(i,o,a)=>{this.edgeConfig.transform.response.push({action:P.ACTIONS.updateCookie,name:i,valueRegex:o.source,replaceValue:a})},this.removeResponseCookie=i=>{this.edgeConfig.transform.response.push({action:P.ACTIONS.removeCookie,name:i})},this.addUpstreamResponseCookie=(i,o)=>{this.edgeConfig.transform.upstreamResponse.push({action:P.ACTIONS.addCookie,name:i,value:o})},this.updateUpstreamResponseCookie=(i,o,a)=>{this.edgeConfig.transform.upstreamResponse.push({action:P.ACTIONS.updateCookie,name:i,valueRegex:o.source,replaceValue:a})},this.removeUpstreamResponseCookie=i=>{this.edgeConfig.transform.upstreamResponse.push({action:P.ACTIONS.removeCookie,name:i})},this.redirect=(i,o={})=>{let{to:a,statusCode:u,query:f}=this._readRedirectParams(i,o),c=!qS.default(f),l=Xr.getBackReferences(Ro.default.pathWithQueryString(a,f));if(this.shouldParseQueryString(l)||c){this.cache({edge:{maxAgeSeconds:NS}}),this.proxy(P.BACKENDS.js);return}if(this.setEdgeRoute({action:P.ACTIONS.syntheticRes,statusCode:u}),this.edgeConfig.transform.response.push({action:P.ACTIONS.setHeader,name:P.HTTP_HEADERS.location,value:"${url}"}),this.route.criteria.path){let y=Ro.default.toEdgeRegexString(this.route.criteria.path+"{(\\?[^#]+)}?"),p=Xr.getBackReferences(this.route.criteria.path),g=Xr.default(this.route.criteria.path,a)+`\\${Object.keys(p).length+1}`;this.edgeConfig.transform.response.push({action:P.ACTIONS.updateHeader,name:P.HTTP_HEADERS.location,valueRegex:y,replaceValue:g})}else this.edgeConfig.transform.response.push({action:P.ACTIONS.updateHeader,name:P.HTTP_HEADERS.location,valueRegex:Ro.default.toEdgeRegexString("([^?]*){(\\?[^#]+)}?"),replaceValue:`${a}\\2`})},this.serveStatic=(i,{permanent:o,exclude:a,onNotFound:u,loadingPage:f,expiresSeconds:c,statusCode:l,statusMessage:h}={})=>{i&&!i.startsWith("/")&&(i=`/${i}`);let y=[],p;f&&(y.push(f),p={valueRegex:this.route.toEdgeRegexString(),replaceValue:Xr.default(this.route.criteria.path,f)}),i&&this.updatePath(i),typeof i=="string"&&y.push(i);let g=o===!0||DS.default(o,"enabled")||!1;return this.setEdgeRoute({action:P.ACTIONS.proxy,backend:g?P.BACKENDS.permanentStatic:P.BACKENDS.static,fsPath:y,fsExclude:a,fallbackToCompute:u!=null,loadingPage:p,expiresSeconds:c,statusMessage:h,statusCode:l}),Promise.resolve()},this.verifyJwt=i=>(this.edgeConfig.jwtVerification=i,Promise.resolve()),this.proxy=(i,{path:o,transformResponse:a,transformRequest:u}={})=>(MS.default(i),a!=null||u!=null||typeof o=="function"?i=P.BACKENDS.js:typeof o=="string"&&this.updatePath(o),this.setEdgeRoute({action:P.ACTIONS.proxy,backend:i}),Promise.resolve()),this.updatePath=i=>{let o=Xr.default(this.route.criteria.path,i);o[0]!=="/"&&(o=`/${o}`),this.edgeConfig.transform.request.push({action:P.ACTIONS.updatePath,valueRegex:this.route.toEdgeRegexString(),replaceValue:o})},this.cache=i=>{let{edge:o,browser:a,key:u}=i;if(o){let{maxAgeSeconds:f,staleWhileRevalidateSeconds:c,forcePrivateCaching:l}=o;this.edgeConfig.cache={maxAgeSeconds:f,staleWhileRevalidateSeconds:c,forcePrivateCaching:l}}else o===!1&&(this.edgeConfig.cache={disabled:!0});if(u&&(this.edgeConfig.cache||(this.edgeConfig.cache={}),this.edgeConfig.cache.customKey=u.toJSON()),a||a===!1){let{maxAgeSeconds:f,serviceWorkerSeconds:c}=a||{maxAgeSeconds:0};if(c&&f&&f>0)throw new Error("When service worker caching is set, the browser max age must be set to zero. Refer to https://docs.layer0.co/guides/caching#section_caching_a_response");f===0?this.edgeConfig.transform.response.push({action:P.ACTIONS.setHeader,name:P.HTTP_HEADERS.cacheControl,value:"private, no-store, no-cache"}):f&&this.edgeConfig.transform.response.push({action:P.ACTIONS.setHeader,name:P.HTTP_HEADERS.cacheControl,value:`private, max-age=${f}`}),c&&this.edgeConfig.transform.response.push({action:P.ACTIONS.setHeader,name:P.HTTP_HEADERS.xSwCacheControl,value:`max-age=${c}`})}},this.send=(i,o,a)=>{typeof i=="function"?this.render():this.setEdgeRoute({action:P.ACTIONS.syntheticRes,statusCode:o,statusMessage:a,content:i})},this.compute=i=>{this.setEdgeRoute({action:P.ACTIONS.proxy,backend:P.BACKENDS.js})},this.render=()=>(this.setEdgeRoute({action:P.ACTIONS.proxy,backend:P.BACKENDS.js}),Promise.resolve()),this.edgeConfig={transform:{request:[],upstreamResponse:[],response:[]}}}shouldParseQueryString(t){let r=this.route.criteria.query;return r===void 0?!1:Object.keys(r).some(s=>{let n=r[s];return IS.isParamMatcher(n)&&!!t[s]})}setEdgeRoute(t){this.edgeConfig.route=t,this.edgeConfig.transform.upstreamResponse.push({action:P.ACTIONS.setHeader,name:P.HTTP_HEADERS.vary,value:P.HTTP_HEADERS.acceptEncoding})}};wt.default=If});var Ao=d(bo=>{"use strict";Object.defineProperty(bo,"__esModule",{value:!0});var Nf=class{constructor(){this.forcePrivateCaching=!1}};bo.default=Nf});var kf=d(zr=>{"use strict";var $S=zr&&zr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(zr,"__esModule",{value:!0});var kS=$S(So()),$f=class extends kS.default{constructor(){super(...arguments);this.proxy=(t,r={})=>{throw new Error("Proxy cannot be used inside router.catch()")}}};zr.default=$f});var jf=d((QT,jS)=>{jS.exports={_from:"@layer0/core@latest",_id:"@layer0/core@4.17.0",_inBundle:!1,_integrity:"sha512-vp7JCDv/BalO+rmpBncEAbet2jwtpL+d7itcSB0+Vtonj6OywJrJIyxfmYsZBocIOVO8BXVBXzqT9GtpfifDZQ==",_location:"/@layer0/core",_phantomChildren:{"array-union":"2.1.0","dir-glob":"3.0.1","fast-glob":"3.2.11",ignore:"5.2.0",merge2:"1.4.1",slash:"3.0.0"},_requested:{type:"tag",registry:!0,raw:"@layer0/core@latest",name:"@layer0/core",escapedName:"@layer0%2fcore",scope:"@layer0",rawSpec:"latest",saveSpec:null,fetchSpec:"latest"},_requiredBy:["#DEV:/","#USER","/@layer0/prefetch"],_resolved:"https://registry.npmjs.org/@layer0/core/-/core-4.17.0.tgz",_shasum:"acfd2eda9aa31ac075776faac5a45b01da1ac195",_spec:"@layer0/core@latest",_where:"/Users/tristanlee/Projects/layer0/edgio-deploy/integration-tests/standard-deploy",bundleDependencies:!1,dependencies:{"@babel/parser":"^7.16.2","@babel/traverse":"^7.16.0","@types/lodash.clonedeep":"^4.5.6",ajv:"^6.12.6","babel-loader":"^8.2.2",chalk:"^4.1.2",chardet:"^1.4.0",chokidar:"^3.5.1","cls-hooked":"^4.2.2","content-type":"^1.0.4",cookie:"^0.4.1","cross-spawn":"^7.0.3","decode-uri-component":"^0.2.0",deepmerge:"^4.2.2",esbuild:"^0.13.4",express:"^4.17.1","fs-extra":"^8.1.0",globby:"^11.0.2","http-proxy":"^1.18.1","lodash.clonedeep":"^4.5.0","lru-cache":"^6.0.0","mime-types":"^2.1.29","node-fetch":"^2.6.1","path-to-regexp":"^6.2.0",pino:"^6.13.3",qs:"^6.10.1","resolve-package-path":"^4.0.3",semver:"^7.3.5",shelljs:"^0.8.5",slash:"^3.0.0","tcp-port-used":"^1.0.2","ts-loader":"^8.2.0",unixify:"^1.0.0",uuid:"^8.3.2"},deprecated:!1,description:"Core library for the [Layer0](https://docs.layer0.co), infrastructure to run your big, dynamic website frontend and make it load in less than one second.",devDependencies:{"@types/cls-hooked":"^4.3.1","@types/content-type":"^1.1.3","@types/cookie":"^0.3.3","@types/cross-spawn":"^6.0.2","@types/decode-uri-component":"^0.2.0","@types/express":"^4.17.7","@types/fs-extra":"^8.1.1","@types/http-proxy":"^1.17.4","@types/jest":"^26.0.23","@types/lodash":"^4.14.162","@types/lru-cache":"^5.1.0","@types/mime-types":"^2.1.0","@types/node":"^14.6.4","@types/route-parser":"^0.1.3","@types/semver":"^7.3.9","@types/shelljs":"^0.8.8","@types/tcp-port-used":"^1.0.0","@types/unixify":"^1.0.0","@types/uuid":"^8.0.1","@types/webpack-bundle-analyzer":"^3.9.0",lodash:"^4.17.21",nock:"^13.2.8",stripe:"^9.12.0",webpack:"^5.27.0","webpack-bundle-analyzer":"^3.9.0","webpack-dev-middleware":"^4.1.0"},jest:{clearMocks:!0,collectCoverage:!0,transform:{"^.+\\.(js)?$":"babel-jest","^.+\\.ts$":"ts-jest"},moduleFileExtensions:["ts","js","json"],setupFilesAfterEnv:["<rootDir>/test/jest.js"],transformIgnorePatterns:["<rootDir>/node_modules/"],moduleNameMapper:{"../package.json":"<rootDir>/package.json","^@layer0/core(.*)$":"<rootDir>/src/$1"},collectCoverageFrom:["./src/**/*.{ts,js}","!**/mocks/**","!**/test-utils/**","!**/index.ts","!**/plugins/PluginBase.ts","!**/bin/**/*"]},license:"UNLICENSED",main:"./index.js",name:"@layer0/core",publishConfig:{directory:"dist"},scripts:{build:"rm -rf ./dist; mkdir ./dist; cp -r package.json README.md serverless.yml default-app ./dist; tsc; npm run bundle-handler;","bundle-handler":"esbuild src/lambda/handler.ts --bundle --minify --platform=node --target=node14.0 --outfile=dist/lambda/handler.js --log-level=error --sourcemap",docs:"typedoc","push-build":"npm run build && cd dist && yalc push && cd ..",release:"cd ./dist; npm publish --access public","release:next":"npm run release -- --tag next",test:"jest --watchAll=false --runInBand --forceExit","ts:watch":"tsc --watch",watch:"npm-watch"},version:"4.17.0",watch:{"push-build":{patterns:["src","bin","serverless.yml","default-app","package.json"],extensions:["js","ts"],quiet:!1}}}});var Kf=d(Zr=>{"use strict";var Tt=Zr&&Zr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Zr,"__esModule",{value:!0});var FS=Tt(_t()),Ff=Tt(Ns()),BS=Tt(cc()),Jr=Tt(fc()),US=Tt(So()),Bf=J(),Uf=Tt(Ao()),GS=mr(),WS=Tt(kf());function VS({edgeConfig:e},t){var r,s;return e.cache&&((r=e.cache)===null||r===void 0?void 0:r.maxAgeSeconds)&&((s=e.cache)===null||s===void 0?void 0:s.maxAgeSeconds)>0&&t?M(A({},e.cache),{matchExplicitMethod:t}):e.cache}function KS({edgeConfig:e},t){var r;let s=e.route;return((r=e.route)===null||r===void 0?void 0:r.action)===Bf.ACTIONS.syntheticRes&&!e.route.statusCode&&!t&&(e.route.statusCode=200),s}function YS({edgeConfig:e}){return e.transform}function QS({edgeConfig:e}){return e.jwtVerification}function Gf(e){return Object.entries(e).reduce((t,[r,s])=>(s instanceof RegExp?t[r]=Jr.default(s):typeof s=="object"&&s!==null?t[r]=Gf(s):t[r]=Jr.default(s),t),{})}function XS(e){var t;let r=[],s=[],n,i;if(e.criteria.protocol){let o;if(typeof e.criteria.protocol=="string"?o=new RegExp(`^${e.criteria.protocol}$`,"i"):o=new RegExp(e.criteria.protocol),!o.test("http")&&!o.test("https"))throw new Error('Protocol matcher must match either "http" or "https"');n=o.source}if(e.criteria.path&&r.push({value:"${path}",matchRegex:e.toEdgeRegexString()}),e.criteria.method){let o;typeof e.criteria.method!="string"?o=e.criteria.method:(o=BS.default(e.criteria.method),Object.values(Bf.HTTP_METHODS).includes(e.criteria.method)&&(i=e.criteria.method)),r.push({value:"${method}",matchRegex:Ff.default(o)})}return e.criteria.headers&&Object.entries(e.criteria.headers).forEach(([o,a])=>{r.push({value:`\${req:${o}}`,matchRegex:Jr.default(a)})}),((t=e.criteria.response)===null||t===void 0?void 0:t.statusCode)&&s.push({value:"${res:status}",matchRegex:Ff.default(e.criteria.response.statusCode)}),e.criteria.query&&Object.entries(e.criteria.query).forEach(([o,a])=>{GS.isParamMatcher(a)||r.push({value:`\${query:${o}}`,matchRegex:Jr.default(a)})}),e.criteria.cookies&&Object.entries(e.criteria.cookies).forEach(([o,a])=>{r.push({value:`\${req:cookie:${o}}`,matchRegex:Jr.default(a)})}),e.criteria.body&&r.push({matchBody:JSON.stringify({parse:e.criteria.body.parse,criteria:Gf(e.criteria.body.criteria)})}),{match:r,matchResp:s,matchExplicitMethod:i,matchProtocolJavaScriptRegExpSource:n}}async function zS(e){let t={};if(!Object.keys(e.getDestinations()).length)t={default:await Vf(e)};else for(let r in e.getDestinations())t[r]=await Vf(e.getDestinations()[r]);return{version:JS(),backends:A({},FS.default.get("backends")),destinations:t}}Zr.default=zS;function JS(){return jf().version}async function Wf(e,t,r,s){try{await e.handler(t)}catch(u){Error.captureStackTrace(u),r.push({route:e.toString(),stackTrace:u.stack})}let{match:n,matchResp:i,matchExplicitMethod:o,matchProtocolJavaScriptRegExpSource:a}=XS(e);return{path:e.criteria.path,routeJson:e.toJson(),match:n,matchResp:i,matchProtocolJavaScriptRegExpSource:a,cache:VS(t,o),route:KS(t,s),transform:YS(t),jwtVerification:QS(t)}}async function Vf(e){let t=[],r={index:e.index,errorRoutes:await Promise.all(e.getRouteGroups().getRoutes().filter(s=>s.isRespRoute()).map(s=>Wf(s,new WS.default({url:"",headers:{}},{},s,new Uf.default),t,!0))),routes:await Promise.all(e.getRouteGroups().getRoutes().filter(s=>!s.isRespRoute()).map(s=>Wf(s,new US.default({url:"",headers:{}},{},s,new Uf.default),t,!1)))};if(t.length){let s=`
Errors occurred while attempting to deploy your application to Layer0 edge.
The following ${t.length>1?"routes":"route"} could not be processed:`;throw t.forEach(({route:n,stackTrace:i})=>{s=s.concat(`
* ${n}: ${i}`)}),new Error(s)}return r}});var Yf=d(Co=>{"use strict";Object.defineProperty(Co,"__esModule",{value:!0});function ZS(e,t){if(!e||!e.length)return;let r,s,n=!1;for(let i of e){if(!n){r=i,t&&(s=t(i)),n=!0;continue}if(t){let o=t(i);o<s&&(r=i,s=o)}else i<r&&(r=i)}return r}Co.default=ZS});var Xf=d(xo=>{"use strict";Object.defineProperty(xo,"__esModule",{value:!0});var Qf=class{constructor(){this._tasks=[],this._resolveHandler=Function.prototype,this._errorHandler=t=>{throw t}}add(...t){return this._tasks.push(...t),this}onTaskDone(t){return this._resolveHandler=t,this}onTaskError(t){return this._errorHandler=t,this}resolve(){let t=this._convertTasksToPromises().map((r,s)=>r.then(n=>(this._resolveHandler(n),n)).catch(n=>this._errorHandler(n)));return Promise.all(t)}_convertTasksToPromises(){return this._tasks.map(t=>{if(typeof t!="function")return Promise.resolve(t);try{let r=t();return r instanceof Promise?r:Promise.resolve(r)}catch(r){return Promise.reject(r)}})}};xo.default=Qf});var Zf=d(ts=>{"use strict";var zf=ts&&ts.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ts,"__esModule",{value:!0});var e0=zf(_t()),Jf=zf(Xf()),es=class{constructor(){this.options=[]}push(...t){this.options.push(...t)}static async resolveDestinationPreloadConfig(t,r){let s=[];return await new Jf.default().add(...t.preloadRequests.options).onTaskDone(n=>{s.push(...n.map(i=>M(A({},i),{destination:r})))}).resolve(),{requests:s}}static async resolvePreloadConfig(t){let r=[],s=new Jf.default,n=t.getDestinations();if(!Object.keys(n).length)s.add(es.resolveDestinationPreloadConfig(t,"default"));else for(let i in n)s.add(es.resolveDestinationPreloadConfig(n[i],i));return await s.onTaskDone(({requests:i})=>{r.push(...i)}).resolve(),{requests:r,concurrency:e0.default.get("prerenderConcurrency",null)}}};ts.default=es});var eh=d(wo=>{"use strict";Object.defineProperty(wo,"__esModule",{value:!0});function t0(e){return new Promise(t=>{e.body="",e.on("data",r=>e.body+=r.toString()),e.on("end",t)})}wo.default=t0});var th=d(pn=>{"use strict";Object.defineProperty(pn,"__esModule",{value:!0});function r0(){return process.env.LAYER0_ROOT_SOURCE_DIR||process.cwd()}pn.getSourceDir=r0;function s0(e){process.env.LAYER0_ROOT_SOURCE_DIR=e}pn.setSourceDir=s0});var sh=d((rP,rh)=>{"use strict";rh.exports=(...e)=>[...new Set([].concat(...e))]});var To=d((sP,oh)=>{"use strict";var n0=require("stream"),nh=n0.PassThrough,i0=Array.prototype.slice;oh.exports=o0;function o0(){let e=[],t=i0.call(arguments),r=!1,s=t[t.length-1];s&&!Array.isArray(s)&&s.pipe==null?t.pop():s={};let n=s.end!==!1,i=s.pipeError===!0;s.objectMode==null&&(s.objectMode=!0),s.highWaterMark==null&&(s.highWaterMark=64*1024);let o=nh(s);function a(){for(let c=0,l=arguments.length;c<l;c++)e.push(ih(arguments[c],s));return u(),this}function u(){if(r)return;r=!0;let c=e.shift();if(!c){process.nextTick(f);return}Array.isArray(c)||(c=[c]);let l=c.length+1;function h(){--l>0||(r=!1,u())}function y(p){function g(){p.removeListener("merge2UnpipeEnd",g),p.removeListener("end",g),i&&p.removeListener("error",E),h()}function E(S){o.emit("error",S)}if(p._readableState.endEmitted)return h();p.on("merge2UnpipeEnd",g),p.on("end",g),i&&p.on("error",E),p.pipe(o,{end:!1}),p.resume()}for(let p=0;p<c.length;p++)y(c[p]);h()}function f(){r=!1,o.emit("queueDrain"),n&&o.end()}return o.setMaxListeners(0),o.add=a,o.on("unpipe",function(c){c.emit("merge2UnpipeEnd")}),t.length&&a.apply(null,t),o}function ih(e,t){if(Array.isArray(e))for(let r=0,s=e.length;r<s;r++)e[r]=ih(e[r],t);else{if(!e._readableState&&e.pipe&&(e=e.pipe(nh(t))),!e._readableState||!e.pause||!e.pipe)throw new Error("Only readable stream can be merged.");e.pause()}return e}});var ah=d(rr=>{"use strict";Object.defineProperty(rr,"__esModule",{value:!0});rr.splitWhen=rr.flatten=void 0;function a0(e){return e.reduce((t,r)=>[].concat(t,r),[])}rr.flatten=a0;function u0(e,t){let r=[[]],s=0;for(let n of e)t(n)?(s++,r[s]=[]):r[s].push(n);return r}rr.splitWhen=u0});var uh=d(_n=>{"use strict";Object.defineProperty(_n,"__esModule",{value:!0});_n.isEnoentCodeError=void 0;function c0(e){return e.code==="ENOENT"}_n.isEnoentCodeError=c0});var lh=d(gn=>{"use strict";Object.defineProperty(gn,"__esModule",{value:!0});gn.createDirentFromStats=void 0;var ch=class{constructor(t,r){this.name=t,this.isBlockDevice=r.isBlockDevice.bind(r),this.isCharacterDevice=r.isCharacterDevice.bind(r),this.isDirectory=r.isDirectory.bind(r),this.isFIFO=r.isFIFO.bind(r),this.isFile=r.isFile.bind(r),this.isSocket=r.isSocket.bind(r),this.isSymbolicLink=r.isSymbolicLink.bind(r)}};function l0(e,t){return new ch(e,t)}gn.createDirentFromStats=l0});var fh=d(Oe=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0});Oe.removeLeadingDotSegment=Oe.escape=Oe.makeAbsolute=Oe.unixify=void 0;var f0=require("path"),h0=2,d0=/(\\?)([()*?[\]{|}]|^!|[!+@](?=\())/g;function p0(e){return e.replace(/\\/g,"/")}Oe.unixify=p0;function _0(e,t){return f0.resolve(e,t)}Oe.makeAbsolute=_0;function g0(e){return e.replace(d0,"\\$2")}Oe.escape=g0;function m0(e){if(e.charAt(0)==="."){let t=e.charAt(1);if(t==="/"||t==="\\")return e.slice(h0)}return e}Oe.removeLeadingDotSegment=m0});var dh=d((uP,hh)=>{hh.exports=function(t){if(typeof t!="string"||t==="")return!1;for(var r;r=/(\\).|([@?!+*]\(.*\))/g.exec(t);){if(r[2])return!0;t=t.slice(r.index+r[0].length)}return!1}});var gh=d((cP,_h)=>{var y0=dh(),ph={"{":"}","(":")","[":"]"},v0=function(e){if(e[0]==="!")return!0;for(var t=0,r=-2,s=-2,n=-2,i=-2,o=-2;t<e.length;){if(e[t]==="*"||e[t+1]==="?"&&/[\].+)]/.test(e[t])||s!==-1&&e[t]==="["&&e[t+1]!=="]"&&(s<t&&(s=e.indexOf("]",t)),s>t&&(o===-1||o>s||(o=e.indexOf("\\",t),o===-1||o>s)))||n!==-1&&e[t]==="{"&&e[t+1]!=="}"&&(n=e.indexOf("}",t),n>t&&(o=e.indexOf("\\",t),o===-1||o>n))||i!==-1&&e[t]==="("&&e[t+1]==="?"&&/[:!=]/.test(e[t+2])&&e[t+3]!==")"&&(i=e.indexOf(")",t),i>t&&(o=e.indexOf("\\",t),o===-1||o>i))||r!==-1&&e[t]==="("&&e[t+1]!=="|"&&(r<t&&(r=e.indexOf("|",t)),r!==-1&&e[r+1]!==")"&&(i=e.indexOf(")",r),i>r&&(o=e.indexOf("\\",r),o===-1||o>i))))return!0;if(e[t]==="\\"){var a=e[t+1];t+=2;var u=ph[a];if(u){var f=e.indexOf(u,t);f!==-1&&(t=f+1)}if(e[t]==="!")return!0}else t++}return!1},E0=function(e){if(e[0]==="!")return!0;for(var t=0;t<e.length;){if(/[*?{}()[\]]/.test(e[t]))return!0;if(e[t]==="\\"){var r=e[t+1];t+=2;var s=ph[r];if(s){var n=e.indexOf(s,t);n!==-1&&(t=n+1)}if(e[t]==="!")return!0}else t++}return!1};_h.exports=function(t,r){if(typeof t!="string"||t==="")return!1;if(y0(t))return!0;var s=v0;return r&&r.strict===!1&&(s=E0),s(t)}});var yh=d((lP,mh)=>{"use strict";var R0=gh(),S0=require("path").posix.dirname,b0=require("os").platform()==="win32",Po="/",A0=/\\/g,C0=/[\{\[].*[\}\]]$/,x0=/(^|[^\\])([\{\[]|\([^\)]+$)/,w0=/\\([\!\*\?\|\[\]\(\)\{\}])/g;mh.exports=function(t,r){var s=Object.assign({flipBackslashes:!0},r);s.flipBackslashes&&b0&&t.indexOf(Po)<0&&(t=t.replace(A0,Po)),C0.test(t)&&(t+=Po),t+="a";do t=S0(t);while(R0(t)||x0.test(t));return t.replace(w0,"$1")}});var mn=d(Se=>{"use strict";Se.isInteger=e=>typeof e=="number"?Number.isInteger(e):typeof e=="string"&&e.trim()!==""?Number.isInteger(Number(e)):!1;Se.find=(e,t)=>e.nodes.find(r=>r.type===t);Se.exceedsLimit=(e,t,r=1,s)=>s===!1||!Se.isInteger(e)||!Se.isInteger(t)?!1:(Number(t)-Number(e))/Number(r)>=s;Se.escapeNode=(e,t=0,r)=>{let s=e.nodes[t];!s||(r&&s.type===r||s.type==="open"||s.type==="close")&&s.escaped!==!0&&(s.value="\\"+s.value,s.escaped=!0)};Se.encloseBrace=e=>e.type!=="brace"?!1:e.commas>>0+e.ranges>>0==0?(e.invalid=!0,!0):!1;Se.isInvalidBrace=e=>e.type!=="brace"?!1:e.invalid===!0||e.dollar?!0:e.commas>>0+e.ranges>>0==0||e.open!==!0||e.close!==!0?(e.invalid=!0,!0):!1;Se.isOpenOrClose=e=>e.type==="open"||e.type==="close"?!0:e.open===!0||e.close===!0;Se.reduce=e=>e.reduce((t,r)=>(r.type==="text"&&t.push(r.value),r.type==="range"&&(r.type="text"),t),[]);Se.flatten=(...e)=>{let t=[],r=s=>{for(let n=0;n<s.length;n++){let i=s[n];Array.isArray(i)?r(i,t):i!==void 0&&t.push(i)}return t};return r(e),t}});var yn=d((hP,Eh)=>{"use strict";var vh=mn();Eh.exports=(e,t={})=>{let r=(s,n={})=>{let i=t.escapeInvalid&&vh.isInvalidBrace(n),o=s.invalid===!0&&t.escapeInvalid===!0,a="";if(s.value)return(i||o)&&vh.isOpenOrClose(s)?"\\"+s.value:s.value;if(s.value)return s.value;if(s.nodes)for(let u of s.nodes)a+=r(u);return a};return r(e)}});var Sh=d((dP,Rh)=>{"use strict";Rh.exports=function(e){return typeof e=="number"?e-e==0:typeof e=="string"&&e.trim()!==""?Number.isFinite?Number.isFinite(+e):isFinite(+e):!1}});var Hh=d((pP,Oh)=>{"use strict";var bh=Sh(),Pt=(e,t,r)=>{if(bh(e)===!1)throw new TypeError("toRegexRange: expected the first argument to be a number");if(t===void 0||e===t)return String(e);if(bh(t)===!1)throw new TypeError("toRegexRange: expected the second argument to be a number.");let s=A({relaxZeros:!0},r);typeof s.strictZeros=="boolean"&&(s.relaxZeros=s.strictZeros===!1);let n=String(s.relaxZeros),i=String(s.shorthand),o=String(s.capture),a=String(s.wrap),u=e+":"+t+"="+n+i+o+a;if(Pt.cache.hasOwnProperty(u))return Pt.cache[u].result;let f=Math.min(e,t),c=Math.max(e,t);if(Math.abs(f-c)===1){let g=e+"|"+t;return s.capture?`(${g})`:s.wrap===!1?g:`(?:${g})`}let l=Ph(e)||Ph(t),h={min:e,max:t,a:f,b:c},y=[],p=[];if(l&&(h.isPadded=l,h.maxLen=String(h.max).length),f<0){let g=c<0?Math.abs(c):1;p=Ah(g,Math.abs(f),h,s),f=h.a=0}return c>=0&&(y=Ah(f,c,h,s)),h.negatives=p,h.positives=y,h.result=T0(p,y,s),s.capture===!0?h.result=`(${h.result})`:s.wrap!==!1&&y.length+p.length>1&&(h.result=`(?:${h.result})`),Pt.cache[u]=h,h.result};function T0(e,t,r){let s=Oo(e,t,"-",!1,r)||[],n=Oo(t,e,"",!1,r)||[],i=Oo(e,t,"-?",!0,r)||[];return s.concat(i).concat(n).join("|")}function P0(e,t){let r=1,s=1,n=xh(e,r),i=new Set([t]);for(;e<=n&&n<=t;)i.add(n),r+=1,n=xh(e,r);for(n=wh(t+1,s)-1;e<n&&n<=t;)i.add(n),s+=1,n=wh(t+1,s)-1;return i=[...i],i.sort(D0),i}function O0(e,t,r){if(e===t)return{pattern:e,count:[],digits:0};let s=H0(e,t),n=s.length,i="",o=0;for(let a=0;a<n;a++){let[u,f]=s[a];u===f?i+=u:u!=="0"||f!=="9"?i+=q0(u,f,r):o++}return o&&(i+=r.shorthand===!0?"\\d":"[0-9]"),{pattern:i,count:[o],digits:n}}function Ah(e,t,r,s){let n=P0(e,t),i=[],o=e,a;for(let u=0;u<n.length;u++){let f=n[u],c=O0(String(o),String(f),s),l="";if(!r.isPadded&&a&&a.pattern===c.pattern){a.count.length>1&&a.count.pop(),a.count.push(c.count[0]),a.string=a.pattern+Th(a.count),o=f+1;continue}r.isPadded&&(l=L0(f,r,s)),c.string=l+c.pattern+Th(c.count),i.push(c),o=f+1,a=c}return i}function Oo(e,t,r,s,n){let i=[];for(let o of e){let{string:a}=o;!s&&!Ch(t,"string",a)&&i.push(r+a),s&&Ch(t,"string",a)&&i.push(r+a)}return i}function H0(e,t){let r=[];for(let s=0;s<e.length;s++)r.push([e[s],t[s]]);return r}function D0(e,t){return e>t?1:t>e?-1:0}function Ch(e,t,r){return e.some(s=>s[t]===r)}function xh(e,t){return Number(String(e).slice(0,-t)+"9".repeat(t))}function wh(e,t){return e-e%Math.pow(10,t)}function Th(e){let[t=0,r=""]=e;return r||t>1?`{${t+(r?","+r:"")}}`:""}function q0(e,t,r){return`[${e}${t-e==1?"":"-"}${t}]`}function Ph(e){return/^-?(0+)\d/.test(e)}function L0(e,t,r){if(!t.isPadded)return e;let s=Math.abs(t.maxLen-String(e).length),n=r.relaxZeros!==!1;switch(s){case 0:return"";case 1:return n?"0?":"0";case 2:return n?"0{0,2}":"00";default:return n?`0{0,${s}}`:`0{${s}}`}}Pt.cache={};Pt.clearCache=()=>Pt.cache={};Oh.exports=Pt});var qo=d((_P,kh)=>{"use strict";var M0=require("util"),Dh=Hh(),qh=e=>e!==null&&typeof e=="object"&&!Array.isArray(e),I0=e=>t=>e===!0?Number(t):String(t),Ho=e=>typeof e=="number"||typeof e=="string"&&e!=="",rs=e=>Number.isInteger(+e),Do=e=>{let t=`${e}`,r=-1;if(t[0]==="-"&&(t=t.slice(1)),t==="0")return!1;for(;t[++r]==="0";);return r>0},N0=(e,t,r)=>typeof e=="string"||typeof t=="string"?!0:r.stringify===!0,$0=(e,t,r)=>{if(t>0){let s=e[0]==="-"?"-":"";s&&(e=e.slice(1)),e=s+e.padStart(s?t-1:t,"0")}return r===!1?String(e):e},Lh=(e,t)=>{let r=e[0]==="-"?"-":"";for(r&&(e=e.slice(1),t--);e.length<t;)e="0"+e;return r?"-"+e:e},k0=(e,t)=>{e.negatives.sort((o,a)=>o<a?-1:o>a?1:0),e.positives.sort((o,a)=>o<a?-1:o>a?1:0);let r=t.capture?"":"?:",s="",n="",i;return e.positives.length&&(s=e.positives.join("|")),e.negatives.length&&(n=`-(${r}${e.negatives.join("|")})`),s&&n?i=`${s}|${n}`:i=s||n,t.wrap?`(${r}${i})`:i},Mh=(e,t,r,s)=>{if(r)return Dh(e,t,A({wrap:!1},s));let n=String.fromCharCode(e);if(e===t)return n;let i=String.fromCharCode(t);return`[${n}-${i}]`},Ih=(e,t,r)=>{if(Array.isArray(e)){let s=r.wrap===!0,n=r.capture?"":"?:";return s?`(${n}${e.join("|")})`:e.join("|")}return Dh(e,t,r)},Nh=(...e)=>new RangeError("Invalid range arguments: "+M0.inspect(...e)),$h=(e,t,r)=>{if(r.strictRanges===!0)throw Nh([e,t]);return[]},j0=(e,t)=>{if(t.strictRanges===!0)throw new TypeError(`Expected step "${e}" to be a number`);return[]},F0=(e,t,r=1,s={})=>{let n=Number(e),i=Number(t);if(!Number.isInteger(n)||!Number.isInteger(i)){if(s.strictRanges===!0)throw Nh([e,t]);return[]}n===0&&(n=0),i===0&&(i=0);let o=n>i,a=String(e),u=String(t),f=String(r);r=Math.max(Math.abs(r),1);let c=Do(a)||Do(u)||Do(f),l=c?Math.max(a.length,u.length,f.length):0,h=c===!1&&N0(e,t,s)===!1,y=s.transform||I0(h);if(s.toRegex&&r===1)return Mh(Lh(e,l),Lh(t,l),!0,s);let p={negatives:[],positives:[]},g=q=>p[q<0?"negatives":"positives"].push(Math.abs(q)),E=[],S=0;for(;o?n>=i:n<=i;)s.toRegex===!0&&r>1?g(n):E.push($0(y(n,S),l,h)),n=o?n-r:n+r,S++;return s.toRegex===!0?r>1?k0(p,s):Ih(E,null,A({wrap:!1},s)):E},B0=(e,t,r=1,s={})=>{if(!rs(e)&&e.length>1||!rs(t)&&t.length>1)return $h(e,t,s);let n=s.transform||(h=>String.fromCharCode(h)),i=`${e}`.charCodeAt(0),o=`${t}`.charCodeAt(0),a=i>o,u=Math.min(i,o),f=Math.max(i,o);if(s.toRegex&&r===1)return Mh(u,f,!1,s);let c=[],l=0;for(;a?i>=o:i<=o;)c.push(n(i,l)),i=a?i-r:i+r,l++;return s.toRegex===!0?Ih(c,null,{wrap:!1,options:s}):c},vn=(e,t,r,s={})=>{if(t==null&&Ho(e))return[e];if(!Ho(e)||!Ho(t))return $h(e,t,s);if(typeof r=="function")return vn(e,t,1,{transform:r});if(qh(r))return vn(e,t,0,r);let n=A({},s);return n.capture===!0&&(n.wrap=!0),r=r||n.step||1,rs(r)?rs(e)&&rs(t)?F0(e,t,r,n):B0(e,t,Math.max(Math.abs(r),1),n):r!=null&&!qh(r)?j0(r,n):vn(e,t,1,r)};kh.exports=vn});var Bh=d((gP,Fh)=>{"use strict";var U0=qo(),jh=mn(),G0=(e,t={})=>{let r=(s,n={})=>{let i=jh.isInvalidBrace(n),o=s.invalid===!0&&t.escapeInvalid===!0,a=i===!0||o===!0,u=t.escapeInvalid===!0?"\\":"",f="";if(s.isOpen===!0||s.isClose===!0)return u+s.value;if(s.type==="open")return a?u+s.value:"(";if(s.type==="close")return a?u+s.value:")";if(s.type==="comma")return s.prev.type==="comma"?"":a?s.value:"|";if(s.value)return s.value;if(s.nodes&&s.ranges>0){let c=jh.reduce(s.nodes),l=U0(...c,M(A({},t),{wrap:!1,toRegex:!0}));if(l.length!==0)return c.length>1&&l.length>1?`(${l})`:l}if(s.nodes)for(let c of s.nodes)f+=r(c,s);return f};return r(e)};Fh.exports=G0});var Wh=d((mP,Gh)=>{"use strict";var W0=qo(),Uh=yn(),sr=mn(),Ot=(e="",t="",r=!1)=>{let s=[];if(e=[].concat(e),t=[].concat(t),!t.length)return e;if(!e.length)return r?sr.flatten(t).map(n=>`{${n}}`):t;for(let n of e)if(Array.isArray(n))for(let i of n)s.push(Ot(i,t,r));else for(let i of t)r===!0&&typeof i=="string"&&(i=`{${i}}`),s.push(Array.isArray(i)?Ot(n,i,r):n+i);return sr.flatten(s)},V0=(e,t={})=>{let r=t.rangeLimit===void 0?1e3:t.rangeLimit,s=(n,i={})=>{n.queue=[];let o=i,a=i.queue;for(;o.type!=="brace"&&o.type!=="root"&&o.parent;)o=o.parent,a=o.queue;if(n.invalid||n.dollar){a.push(Ot(a.pop(),Uh(n,t)));return}if(n.type==="brace"&&n.invalid!==!0&&n.nodes.length===2){a.push(Ot(a.pop(),["{}"]));return}if(n.nodes&&n.ranges>0){let l=sr.reduce(n.nodes);if(sr.exceedsLimit(...l,t.step,r))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let h=W0(...l,t);h.length===0&&(h=Uh(n,t)),a.push(Ot(a.pop(),h)),n.nodes=[];return}let u=sr.encloseBrace(n),f=n.queue,c=n;for(;c.type!=="brace"&&c.type!=="root"&&c.parent;)c=c.parent,f=c.queue;for(let l=0;l<n.nodes.length;l++){let h=n.nodes[l];if(h.type==="comma"&&n.type==="brace"){l===1&&f.push(""),f.push("");continue}if(h.type==="close"){a.push(Ot(a.pop(),f,u));continue}if(h.value&&h.type!=="open"){f.push(Ot(f.pop(),h.value));continue}h.nodes&&s(h,n)}return f};return sr.flatten(s(e))};Gh.exports=V0});var Kh=d((yP,Vh)=>{"use strict";Vh.exports={MAX_LENGTH:1024*64,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:`
`,CHAR_NO_BREAK_SPACE:"\xA0",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"	",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF"}});var Jh=d((vP,zh)=>{"use strict";var K0=yn(),{MAX_LENGTH:Yh,CHAR_BACKSLASH:Lo,CHAR_BACKTICK:Y0,CHAR_COMMA:Q0,CHAR_DOT:X0,CHAR_LEFT_PARENTHESES:z0,CHAR_RIGHT_PARENTHESES:J0,CHAR_LEFT_CURLY_BRACE:Z0,CHAR_RIGHT_CURLY_BRACE:eb,CHAR_LEFT_SQUARE_BRACKET:Qh,CHAR_RIGHT_SQUARE_BRACKET:Xh,CHAR_DOUBLE_QUOTE:tb,CHAR_SINGLE_QUOTE:rb,CHAR_NO_BREAK_SPACE:sb,CHAR_ZERO_WIDTH_NOBREAK_SPACE:nb}=Kh(),ib=(e,t={})=>{if(typeof e!="string")throw new TypeError("Expected a string");let r=t||{},s=typeof r.maxLength=="number"?Math.min(Yh,r.maxLength):Yh;if(e.length>s)throw new SyntaxError(`Input length (${e.length}), exceeds max characters (${s})`);let n={type:"root",input:e,nodes:[]},i=[n],o=n,a=n,u=0,f=e.length,c=0,l=0,h,y={},p=()=>e[c++],g=E=>{if(E.type==="text"&&a.type==="dot"&&(a.type="text"),a&&a.type==="text"&&E.type==="text"){a.value+=E.value;return}return o.nodes.push(E),E.parent=o,E.prev=a,a=E,E};for(g({type:"bos"});c<f;)if(o=i[i.length-1],h=p(),!(h===nb||h===sb)){if(h===Lo){g({type:"text",value:(t.keepEscaping?h:"")+p()});continue}if(h===Xh){g({type:"text",value:"\\"+h});continue}if(h===Qh){u++;let E=!0,S;for(;c<f&&(S=p());){if(h+=S,S===Qh){u++;continue}if(S===Lo){h+=p();continue}if(S===Xh&&(u--,u===0))break}g({type:"text",value:h});continue}if(h===z0){o=g({type:"paren",nodes:[]}),i.push(o),g({type:"text",value:h});continue}if(h===J0){if(o.type!=="paren"){g({type:"text",value:h});continue}o=i.pop(),g({type:"text",value:h}),o=i[i.length-1];continue}if(h===tb||h===rb||h===Y0){let E=h,S;for(t.keepQuotes!==!0&&(h="");c<f&&(S=p());){if(S===Lo){h+=S+p();continue}if(S===E){t.keepQuotes===!0&&(h+=S);break}h+=S}g({type:"text",value:h});continue}if(h===Z0){l++;let E=a.value&&a.value.slice(-1)==="$"||o.dollar===!0;o=g({type:"brace",open:!0,close:!1,dollar:E,depth:l,commas:0,ranges:0,nodes:[]}),i.push(o),g({type:"open",value:h});continue}if(h===eb){if(o.type!=="brace"){g({type:"text",value:h});continue}let E="close";o=i.pop(),o.close=!0,g({type:E,value:h}),l--,o=i[i.length-1];continue}if(h===Q0&&l>0){if(o.ranges>0){o.ranges=0;let E=o.nodes.shift();o.nodes=[E,{type:"text",value:K0(o)}]}g({type:"comma",value:h}),o.commas++;continue}if(h===X0&&l>0&&o.commas===0){let E=o.nodes;if(l===0||E.length===0){g({type:"text",value:h});continue}if(a.type==="dot"){if(o.range=[],a.value+=h,a.type="range",o.nodes.length!==3&&o.nodes.length!==5){o.invalid=!0,o.ranges=0,a.type="text";continue}o.ranges++,o.args=[];continue}if(a.type==="range"){E.pop();let S=E[E.length-1];S.value+=a.value+h,a=S,o.ranges--;continue}g({type:"dot",value:h});continue}g({type:"text",value:h})}do if(o=i.pop(),o.type!=="root"){o.nodes.forEach(q=>{q.nodes||(q.type==="open"&&(q.isOpen=!0),q.type==="close"&&(q.isClose=!0),q.nodes||(q.type="text"),q.invalid=!0)});let E=i[i.length-1],S=E.nodes.indexOf(o);E.nodes.splice(S,1,...o.nodes)}while(i.length>0);return g({type:"eos"}),n};zh.exports=ib});var td=d((EP,ed)=>{"use strict";var Zh=yn(),ob=Bh(),ab=Wh(),ub=Jh(),ye=(e,t={})=>{let r=[];if(Array.isArray(e))for(let s of e){let n=ye.create(s,t);Array.isArray(n)?r.push(...n):r.push(n)}else r=[].concat(ye.create(e,t));return t&&t.expand===!0&&t.nodupes===!0&&(r=[...new Set(r)]),r};ye.parse=(e,t={})=>ub(e,t);ye.stringify=(e,t={})=>Zh(typeof e=="string"?ye.parse(e,t):e,t);ye.compile=(e,t={})=>(typeof e=="string"&&(e=ye.parse(e,t)),ob(e,t));ye.expand=(e,t={})=>{typeof e=="string"&&(e=ye.parse(e,t));let r=ab(e,t);return t.noempty===!0&&(r=r.filter(Boolean)),t.nodupes===!0&&(r=[...new Set(r)]),r};ye.create=(e,t={})=>e===""||e.length<3?[e]:t.expand!==!0?ye.compile(e,t):ye.expand(e,t);ed.exports=ye});var ss=d((RP,od)=>{"use strict";var cb=require("path"),He="\\\\/",rd=`[^${He}]`,Ge="\\.",lb="\\+",fb="\\?",En="\\/",hb="(?=.)",sd="[^/]",Mo=`(?:${En}|$)`,nd=`(?:^|${En})`,Io=`${Ge}{1,2}${Mo}`,db=`(?!${Ge})`,pb=`(?!${nd}${Io})`,_b=`(?!${Ge}{0,1}${Mo})`,gb=`(?!${Io})`,mb=`[^.${En}]`,yb=`${sd}*?`,id={DOT_LITERAL:Ge,PLUS_LITERAL:lb,QMARK_LITERAL:fb,SLASH_LITERAL:En,ONE_CHAR:hb,QMARK:sd,END_ANCHOR:Mo,DOTS_SLASH:Io,NO_DOT:db,NO_DOTS:pb,NO_DOT_SLASH:_b,NO_DOTS_SLASH:gb,QMARK_NO_DOT:mb,STAR:yb,START_ANCHOR:nd},vb=M(A({},id),{SLASH_LITERAL:`[${He}]`,QMARK:rd,STAR:`${rd}*?`,DOTS_SLASH:`${Ge}{1,2}(?:[${He}]|$)`,NO_DOT:`(?!${Ge})`,NO_DOTS:`(?!(?:^|[${He}])${Ge}{1,2}(?:[${He}]|$))`,NO_DOT_SLASH:`(?!${Ge}{0,1}(?:[${He}]|$))`,NO_DOTS_SLASH:`(?!${Ge}{1,2}(?:[${He}]|$))`,QMARK_NO_DOT:`[^.${He}]`,START_ANCHOR:`(?:^|[${He}])`,END_ANCHOR:`(?:[${He}]|$)`}),Eb={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};od.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:Eb,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:cb.sep,extglobChars(e){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${e.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(e){return e===!0?vb:id}}});var ns=d(he=>{"use strict";var Rb=require("path"),Sb=process.platform==="win32",{REGEX_BACKSLASH:bb,REGEX_REMOVE_BACKSLASH:Ab,REGEX_SPECIAL_CHARS:Cb,REGEX_SPECIAL_CHARS_GLOBAL:xb}=ss();he.isObject=e=>e!==null&&typeof e=="object"&&!Array.isArray(e);he.hasRegexChars=e=>Cb.test(e);he.isRegexChar=e=>e.length===1&&he.hasRegexChars(e);he.escapeRegex=e=>e.replace(xb,"\\$1");he.toPosixSlashes=e=>e.replace(bb,"/");he.removeBackslashes=e=>e.replace(Ab,t=>t==="\\"?"":t);he.supportsLookbehinds=()=>{let e=process.version.slice(1).split(".").map(Number);return e.length===3&&e[0]>=9||e[0]===8&&e[1]>=10};he.isWindows=e=>e&&typeof e.windows=="boolean"?e.windows:Sb===!0||Rb.sep==="\\";he.escapeLast=(e,t,r)=>{let s=e.lastIndexOf(t,r);return s===-1?e:e[s-1]==="\\"?he.escapeLast(e,t,s-1):`${e.slice(0,s)}\\${e.slice(s)}`};he.removePrefix=(e,t={})=>{let r=e;return r.startsWith("./")&&(r=r.slice(2),t.prefix="./"),r};he.wrapOutput=(e,t={},r={})=>{let s=r.contains?"":"^",n=r.contains?"":"$",i=`${s}(?:${e})${n}`;return t.negated===!0&&(i=`(?:^(?!${i}).*$)`),i}});var pd=d((bP,dd)=>{"use strict";var ad=ns(),{CHAR_ASTERISK:No,CHAR_AT:wb,CHAR_BACKWARD_SLASH:is,CHAR_COMMA:Tb,CHAR_DOT:$o,CHAR_EXCLAMATION_MARK:ko,CHAR_FORWARD_SLASH:ud,CHAR_LEFT_CURLY_BRACE:jo,CHAR_LEFT_PARENTHESES:Fo,CHAR_LEFT_SQUARE_BRACKET:Pb,CHAR_PLUS:Ob,CHAR_QUESTION_MARK:cd,CHAR_RIGHT_CURLY_BRACE:Hb,CHAR_RIGHT_PARENTHESES:ld,CHAR_RIGHT_SQUARE_BRACKET:Db}=ss(),fd=e=>e===ud||e===is,hd=e=>{e.isPrefix!==!0&&(e.depth=e.isGlobstar?1/0:1)},qb=(e,t)=>{let r=t||{},s=e.length-1,n=r.parts===!0||r.scanToEnd===!0,i=[],o=[],a=[],u=e,f=-1,c=0,l=0,h=!1,y=!1,p=!1,g=!1,E=!1,S=!1,q=!1,$=!1,H=!1,T=!1,D=0,w,C,N={value:"",depth:0,isGlob:!1},Q=()=>f>=s,v=()=>u.charCodeAt(f+1),W=()=>(w=C,u.charCodeAt(++f));for(;f<s;){C=W();let ce;if(C===is){q=N.backslashes=!0,C=W(),C===jo&&(S=!0);continue}if(S===!0||C===jo){for(D++;Q()!==!0&&(C=W());){if(C===is){q=N.backslashes=!0,W();continue}if(C===jo){D++;continue}if(S!==!0&&C===$o&&(C=W())===$o){if(h=N.isBrace=!0,p=N.isGlob=!0,T=!0,n===!0)continue;break}if(S!==!0&&C===Tb){if(h=N.isBrace=!0,p=N.isGlob=!0,T=!0,n===!0)continue;break}if(C===Hb&&(D--,D===0)){S=!1,h=N.isBrace=!0,T=!0;break}}if(n===!0)continue;break}if(C===ud){if(i.push(f),o.push(N),N={value:"",depth:0,isGlob:!1},T===!0)continue;if(w===$o&&f===c+1){c+=2;continue}l=f+1;continue}if(r.noext!==!0&&(C===Ob||C===wb||C===No||C===cd||C===ko)===!0&&v()===Fo){if(p=N.isGlob=!0,g=N.isExtglob=!0,T=!0,C===ko&&f===c&&(H=!0),n===!0){for(;Q()!==!0&&(C=W());){if(C===is){q=N.backslashes=!0,C=W();continue}if(C===ld){p=N.isGlob=!0,T=!0;break}}continue}break}if(C===No){if(w===No&&(E=N.isGlobstar=!0),p=N.isGlob=!0,T=!0,n===!0)continue;break}if(C===cd){if(p=N.isGlob=!0,T=!0,n===!0)continue;break}if(C===Pb){for(;Q()!==!0&&(ce=W());){if(ce===is){q=N.backslashes=!0,W();continue}if(ce===Db){y=N.isBracket=!0,p=N.isGlob=!0,T=!0;break}}if(n===!0)continue;break}if(r.nonegate!==!0&&C===ko&&f===c){$=N.negated=!0,c++;continue}if(r.noparen!==!0&&C===Fo){if(p=N.isGlob=!0,n===!0){for(;Q()!==!0&&(C=W());){if(C===Fo){q=N.backslashes=!0,C=W();continue}if(C===ld){T=!0;break}}continue}break}if(p===!0){if(T=!0,n===!0)continue;break}}r.noext===!0&&(g=!1,p=!1);let U=u,Xe="",_="";c>0&&(Xe=u.slice(0,c),u=u.slice(c),l-=c),U&&p===!0&&l>0?(U=u.slice(0,l),_=u.slice(l)):p===!0?(U="",_=u):U=u,U&&U!==""&&U!=="/"&&U!==u&&fd(U.charCodeAt(U.length-1))&&(U=U.slice(0,-1)),r.unescape===!0&&(_&&(_=ad.removeBackslashes(_)),U&&q===!0&&(U=ad.removeBackslashes(U)));let m={prefix:Xe,input:e,start:c,base:U,glob:_,isBrace:h,isBracket:y,isGlob:p,isExtglob:g,isGlobstar:E,negated:$,negatedExtglob:H};if(r.tokens===!0&&(m.maxDepth=0,fd(C)||o.push(N),m.tokens=o),r.parts===!0||r.tokens===!0){let ce;for(let k=0;k<i.length;k++){let Te=ce?ce+1:c,Pe=i[k],de=e.slice(Te,Pe);r.tokens&&(k===0&&c!==0?(o[k].isPrefix=!0,o[k].value=Xe):o[k].value=de,hd(o[k]),m.maxDepth+=o[k].depth),(k!==0||de!=="")&&a.push(de),ce=Pe}if(ce&&ce+1<e.length){let k=e.slice(ce+1);a.push(k),r.tokens&&(o[o.length-1].value=k,hd(o[o.length-1]),m.maxDepth+=o[o.length-1].depth)}m.slashes=i,m.parts=a}return m};dd.exports=qb});var md=d((AP,gd)=>{"use strict";var Rn=ss(),ve=ns(),{MAX_LENGTH:Sn,POSIX_REGEX_SOURCE:Lb,REGEX_NON_SPECIAL_CHARS:Mb,REGEX_SPECIAL_CHARS_BACKREF:Ib,REPLACEMENTS:_d}=Rn,Nb=(e,t)=>{if(typeof t.expandRange=="function")return t.expandRange(...e,t);e.sort();let r=`[${e.join("-")}]`;try{new RegExp(r)}catch{return e.map(n=>ve.escapeRegex(n)).join("..")}return r},nr=(e,t)=>`Missing ${e}: "${t}" - use "\\\\${t}" to match literal characters`,Bo=(e,t)=>{if(typeof e!="string")throw new TypeError("Expected a string");e=_d[e]||e;let r=A({},t),s=typeof r.maxLength=="number"?Math.min(Sn,r.maxLength):Sn,n=e.length;if(n>s)throw new SyntaxError(`Input length: ${n}, exceeds maximum allowed length: ${s}`);let i={type:"bos",value:"",output:r.prepend||""},o=[i],a=r.capture?"":"?:",u=ve.isWindows(t),f=Rn.globChars(u),c=Rn.extglobChars(f),{DOT_LITERAL:l,PLUS_LITERAL:h,SLASH_LITERAL:y,ONE_CHAR:p,DOTS_SLASH:g,NO_DOT:E,NO_DOT_SLASH:S,NO_DOTS_SLASH:q,QMARK:$,QMARK_NO_DOT:H,STAR:T,START_ANCHOR:D}=f,w=b=>`(${a}(?:(?!${D}${b.dot?g:l}).)*?)`,C=r.dot?"":E,N=r.dot?$:H,Q=r.bash===!0?w(r):T;r.capture&&(Q=`(${Q})`),typeof r.noext=="boolean"&&(r.noextglob=r.noext);let v={input:e,index:-1,start:0,dot:r.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:o};e=ve.removePrefix(e,v),n=e.length;let W=[],U=[],Xe=[],_=i,m,ce=()=>v.index===n-1,k=v.peek=(b=1)=>e[v.index+b],Te=v.advance=()=>e[++v.index]||"",Pe=()=>e.slice(v.index+1),de=(b="",G=0)=>{v.consumed+=b,v.index+=G},ds=b=>{v.output+=b.output!=null?b.output:b.value,de(b.value)},dg=()=>{let b=1;for(;k()==="!"&&(k(2)!=="("||k(3)==="?");)Te(),v.start++,b++;return b%2==0?!1:(v.negated=!0,v.start++,!0)},ps=b=>{v[b]++,Xe.push(b)},ut=b=>{v[b]--,Xe.pop()},I=b=>{if(_.type==="globstar"){let G=v.braces>0&&(b.type==="comma"||b.type==="brace"),R=b.extglob===!0||W.length&&(b.type==="pipe"||b.type==="paren");b.type!=="slash"&&b.type!=="paren"&&!G&&!R&&(v.output=v.output.slice(0,-_.output.length),_.type="star",_.value="*",_.output=Q,v.output+=_.output)}if(W.length&&b.type!=="paren"&&(W[W.length-1].inner+=b.value),(b.value||b.output)&&ds(b),_&&_.type==="text"&&b.type==="text"){_.value+=b.value,_.output=(_.output||"")+b.value;return}b.prev=_,o.push(b),_=b},_s=(b,G)=>{let R=M(A({},c[G]),{conditions:1,inner:""});R.prev=_,R.parens=v.parens,R.output=v.output;let L=(r.capture?"(":"")+R.open;ps("parens"),I({type:b,value:G,output:v.output?"":p}),I({type:"paren",extglob:!0,value:Te(),output:L}),W.push(R)},pg=b=>{let G=b.close+(r.capture?")":""),R;if(b.type==="negate"){let L=Q;if(b.inner&&b.inner.length>1&&b.inner.includes("/")&&(L=w(r)),(L!==Q||ce()||/^\)+$/.test(Pe()))&&(G=b.close=`)$))${L}`),b.inner.includes("*")&&(R=Pe())&&/^\.[^\\/.]+$/.test(R)){let K=Bo(R,M(A({},t),{fastpaths:!1})).output;G=b.close=`)${K})${L})`}b.prev.type==="bos"&&(v.negatedExtglob=!0)}I({type:"paren",extglob:!0,value:m,output:G}),ut("parens")};if(r.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(e)){let b=!1,G=e.replace(Ib,(R,L,K,le,z,Kn)=>le==="\\"?(b=!0,R):le==="?"?L?L+le+(z?$.repeat(z.length):""):Kn===0?N+(z?$.repeat(z.length):""):$.repeat(K.length):le==="."?l.repeat(K.length):le==="*"?L?L+le+(z?Q:""):Q:L?R:`\\${R}`);return b===!0&&(r.unescape===!0?G=G.replace(/\\/g,""):G=G.replace(/\\+/g,R=>R.length%2==0?"\\\\":R?"\\":"")),G===e&&r.contains===!0?(v.output=e,v):(v.output=ve.wrapOutput(G,v,t),v)}for(;!ce();){if(m=Te(),m==="\0")continue;if(m==="\\"){let R=k();if(R==="/"&&r.bash!==!0||R==="."||R===";")continue;if(!R){m+="\\",I({type:"text",value:m});continue}let L=/^\\+/.exec(Pe()),K=0;if(L&&L[0].length>2&&(K=L[0].length,v.index+=K,K%2!=0&&(m+="\\")),r.unescape===!0?m=Te():m+=Te(),v.brackets===0){I({type:"text",value:m});continue}}if(v.brackets>0&&(m!=="]"||_.value==="["||_.value==="[^")){if(r.posix!==!1&&m===":"){let R=_.value.slice(1);if(R.includes("[")&&(_.posix=!0,R.includes(":"))){let L=_.value.lastIndexOf("["),K=_.value.slice(0,L),le=_.value.slice(L+2),z=Lb[le];if(z){_.value=K+z,v.backtrack=!0,Te(),!i.output&&o.indexOf(_)===1&&(i.output=p);continue}}}(m==="["&&k()!==":"||m==="-"&&k()==="]")&&(m=`\\${m}`),m==="]"&&(_.value==="["||_.value==="[^")&&(m=`\\${m}`),r.posix===!0&&m==="!"&&_.value==="["&&(m="^"),_.value+=m,ds({value:m});continue}if(v.quotes===1&&m!=='"'){m=ve.escapeRegex(m),_.value+=m,ds({value:m});continue}if(m==='"'){v.quotes=v.quotes===1?0:1,r.keepQuotes===!0&&I({type:"text",value:m});continue}if(m==="("){ps("parens"),I({type:"paren",value:m});continue}if(m===")"){if(v.parens===0&&r.strictBrackets===!0)throw new SyntaxError(nr("opening","("));let R=W[W.length-1];if(R&&v.parens===R.parens+1){pg(W.pop());continue}I({type:"paren",value:m,output:v.parens?")":"\\)"}),ut("parens");continue}if(m==="["){if(r.nobracket===!0||!Pe().includes("]")){if(r.nobracket!==!0&&r.strictBrackets===!0)throw new SyntaxError(nr("closing","]"));m=`\\${m}`}else ps("brackets");I({type:"bracket",value:m});continue}if(m==="]"){if(r.nobracket===!0||_&&_.type==="bracket"&&_.value.length===1){I({type:"text",value:m,output:`\\${m}`});continue}if(v.brackets===0){if(r.strictBrackets===!0)throw new SyntaxError(nr("opening","["));I({type:"text",value:m,output:`\\${m}`});continue}ut("brackets");let R=_.value.slice(1);if(_.posix!==!0&&R[0]==="^"&&!R.includes("/")&&(m=`/${m}`),_.value+=m,ds({value:m}),r.literalBrackets===!1||ve.hasRegexChars(R))continue;let L=ve.escapeRegex(_.value);if(v.output=v.output.slice(0,-_.value.length),r.literalBrackets===!0){v.output+=L,_.value=L;continue}_.value=`(${a}${L}|${_.value})`,v.output+=_.value;continue}if(m==="{"&&r.nobrace!==!0){ps("braces");let R={type:"brace",value:m,output:"(",outputIndex:v.output.length,tokensIndex:v.tokens.length};U.push(R),I(R);continue}if(m==="}"){let R=U[U.length-1];if(r.nobrace===!0||!R){I({type:"text",value:m,output:m});continue}let L=")";if(R.dots===!0){let K=o.slice(),le=[];for(let z=K.length-1;z>=0&&(o.pop(),K[z].type!=="brace");z--)K[z].type!=="dots"&&le.unshift(K[z].value);L=Nb(le,r),v.backtrack=!0}if(R.comma!==!0&&R.dots!==!0){let K=v.output.slice(0,R.outputIndex),le=v.tokens.slice(R.tokensIndex);R.value=R.output="\\{",m=L="\\}",v.output=K;for(let z of le)v.output+=z.output||z.value}I({type:"brace",value:m,output:L}),ut("braces"),U.pop();continue}if(m==="|"){W.length>0&&W[W.length-1].conditions++,I({type:"text",value:m});continue}if(m===","){let R=m,L=U[U.length-1];L&&Xe[Xe.length-1]==="braces"&&(L.comma=!0,R="|"),I({type:"comma",value:m,output:R});continue}if(m==="/"){if(_.type==="dot"&&v.index===v.start+1){v.start=v.index+1,v.consumed="",v.output="",o.pop(),_=i;continue}I({type:"slash",value:m,output:y});continue}if(m==="."){if(v.braces>0&&_.type==="dot"){_.value==="."&&(_.output=l);let R=U[U.length-1];_.type="dots",_.output+=m,_.value+=m,R.dots=!0;continue}if(v.braces+v.parens===0&&_.type!=="bos"&&_.type!=="slash"){I({type:"text",value:m,output:l});continue}I({type:"dot",value:m,output:l});continue}if(m==="?"){if(!(_&&_.value==="(")&&r.noextglob!==!0&&k()==="("&&k(2)!=="?"){_s("qmark",m);continue}if(_&&_.type==="paren"){let L=k(),K=m;if(L==="<"&&!ve.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(_.value==="("&&!/[!=<:]/.test(L)||L==="<"&&!/<([!=]|\w+>)/.test(Pe()))&&(K=`\\${m}`),I({type:"text",value:m,output:K});continue}if(r.dot!==!0&&(_.type==="slash"||_.type==="bos")){I({type:"qmark",value:m,output:H});continue}I({type:"qmark",value:m,output:$});continue}if(m==="!"){if(r.noextglob!==!0&&k()==="("&&(k(2)!=="?"||!/[!=<:]/.test(k(3)))){_s("negate",m);continue}if(r.nonegate!==!0&&v.index===0){dg();continue}}if(m==="+"){if(r.noextglob!==!0&&k()==="("&&k(2)!=="?"){_s("plus",m);continue}if(_&&_.value==="("||r.regex===!1){I({type:"plus",value:m,output:h});continue}if(_&&(_.type==="bracket"||_.type==="paren"||_.type==="brace")||v.parens>0){I({type:"plus",value:m});continue}I({type:"plus",value:h});continue}if(m==="@"){if(r.noextglob!==!0&&k()==="("&&k(2)!=="?"){I({type:"at",extglob:!0,value:m,output:""});continue}I({type:"text",value:m});continue}if(m!=="*"){(m==="$"||m==="^")&&(m=`\\${m}`);let R=Mb.exec(Pe());R&&(m+=R[0],v.index+=R[0].length),I({type:"text",value:m});continue}if(_&&(_.type==="globstar"||_.star===!0)){_.type="star",_.star=!0,_.value+=m,_.output=Q,v.backtrack=!0,v.globstar=!0,de(m);continue}let b=Pe();if(r.noextglob!==!0&&/^\([^?]/.test(b)){_s("star",m);continue}if(_.type==="star"){if(r.noglobstar===!0){de(m);continue}let R=_.prev,L=R.prev,K=R.type==="slash"||R.type==="bos",le=L&&(L.type==="star"||L.type==="globstar");if(r.bash===!0&&(!K||b[0]&&b[0]!=="/")){I({type:"star",value:m,output:""});continue}let z=v.braces>0&&(R.type==="comma"||R.type==="brace"),Kn=W.length&&(R.type==="pipe"||R.type==="paren");if(!K&&R.type!=="paren"&&!z&&!Kn){I({type:"star",value:m,output:""});continue}for(;b.slice(0,3)==="/**";){let gs=e[v.index+4];if(gs&&gs!=="/")break;b=b.slice(3),de("/**",3)}if(R.type==="bos"&&ce()){_.type="globstar",_.value+=m,_.output=w(r),v.output=_.output,v.globstar=!0,de(m);continue}if(R.type==="slash"&&R.prev.type!=="bos"&&!le&&ce()){v.output=v.output.slice(0,-(R.output+_.output).length),R.output=`(?:${R.output}`,_.type="globstar",_.output=w(r)+(r.strictSlashes?")":"|$)"),_.value+=m,v.globstar=!0,v.output+=R.output+_.output,de(m);continue}if(R.type==="slash"&&R.prev.type!=="bos"&&b[0]==="/"){let gs=b[1]!==void 0?"|$":"";v.output=v.output.slice(0,-(R.output+_.output).length),R.output=`(?:${R.output}`,_.type="globstar",_.output=`${w(r)}${y}|${y}${gs})`,_.value+=m,v.output+=R.output+_.output,v.globstar=!0,de(m+Te()),I({type:"slash",value:"/",output:""});continue}if(R.type==="bos"&&b[0]==="/"){_.type="globstar",_.value+=m,_.output=`(?:^|${y}|${w(r)}${y})`,v.output=_.output,v.globstar=!0,de(m+Te()),I({type:"slash",value:"/",output:""});continue}v.output=v.output.slice(0,-_.output.length),_.type="globstar",_.output=w(r),_.value+=m,v.output+=_.output,v.globstar=!0,de(m);continue}let G={type:"star",value:m,output:Q};if(r.bash===!0){G.output=".*?",(_.type==="bos"||_.type==="slash")&&(G.output=C+G.output),I(G);continue}if(_&&(_.type==="bracket"||_.type==="paren")&&r.regex===!0){G.output=m,I(G);continue}(v.index===v.start||_.type==="slash"||_.type==="dot")&&(_.type==="dot"?(v.output+=S,_.output+=S):r.dot===!0?(v.output+=q,_.output+=q):(v.output+=C,_.output+=C),k()!=="*"&&(v.output+=p,_.output+=p)),I(G)}for(;v.brackets>0;){if(r.strictBrackets===!0)throw new SyntaxError(nr("closing","]"));v.output=ve.escapeLast(v.output,"["),ut("brackets")}for(;v.parens>0;){if(r.strictBrackets===!0)throw new SyntaxError(nr("closing",")"));v.output=ve.escapeLast(v.output,"("),ut("parens")}for(;v.braces>0;){if(r.strictBrackets===!0)throw new SyntaxError(nr("closing","}"));v.output=ve.escapeLast(v.output,"{"),ut("braces")}if(r.strictSlashes!==!0&&(_.type==="star"||_.type==="bracket")&&I({type:"maybe_slash",value:"",output:`${y}?`}),v.backtrack===!0){v.output="";for(let b of v.tokens)v.output+=b.output!=null?b.output:b.value,b.suffix&&(v.output+=b.suffix)}return v};Bo.fastpaths=(e,t)=>{let r=A({},t),s=typeof r.maxLength=="number"?Math.min(Sn,r.maxLength):Sn,n=e.length;if(n>s)throw new SyntaxError(`Input length: ${n}, exceeds maximum allowed length: ${s}`);e=_d[e]||e;let i=ve.isWindows(t),{DOT_LITERAL:o,SLASH_LITERAL:a,ONE_CHAR:u,DOTS_SLASH:f,NO_DOT:c,NO_DOTS:l,NO_DOTS_SLASH:h,STAR:y,START_ANCHOR:p}=Rn.globChars(i),g=r.dot?l:c,E=r.dot?h:c,S=r.capture?"":"?:",q={negated:!1,prefix:""},$=r.bash===!0?".*?":y;r.capture&&($=`(${$})`);let H=C=>C.noglobstar===!0?$:`(${S}(?:(?!${p}${C.dot?f:o}).)*?)`,T=C=>{switch(C){case"*":return`${g}${u}${$}`;case".*":return`${o}${u}${$}`;case"*.*":return`${g}${$}${o}${u}${$}`;case"*/*":return`${g}${$}${a}${u}${E}${$}`;case"**":return g+H(r);case"**/*":return`(?:${g}${H(r)}${a})?${E}${u}${$}`;case"**/*.*":return`(?:${g}${H(r)}${a})?${E}${$}${o}${u}${$}`;case"**/.*":return`(?:${g}${H(r)}${a})?${o}${u}${$}`;default:{let N=/^(.*?)\.(\w+)$/.exec(C);if(!N)return;let Q=T(N[1]);return Q?Q+o+N[2]:void 0}}},D=ve.removePrefix(e,q),w=T(D);return w&&r.strictSlashes!==!0&&(w+=`${a}?`),w};gd.exports=Bo});var vd=d((CP,yd)=>{"use strict";var $b=require("path"),kb=pd(),Uo=md(),Go=ns(),jb=ss(),Fb=e=>e&&typeof e=="object"&&!Array.isArray(e),X=(e,t,r=!1)=>{if(Array.isArray(e)){let c=e.map(h=>X(h,t,r));return h=>{for(let y of c){let p=y(h);if(p)return p}return!1}}let s=Fb(e)&&e.tokens&&e.input;if(e===""||typeof e!="string"&&!s)throw new TypeError("Expected pattern to be a non-empty string");let n=t||{},i=Go.isWindows(t),o=s?X.compileRe(e,t):X.makeRe(e,t,!1,!0),a=o.state;delete o.state;let u=()=>!1;if(n.ignore){let c=M(A({},t),{ignore:null,onMatch:null,onResult:null});u=X(n.ignore,c,r)}let f=(c,l=!1)=>{let{isMatch:h,match:y,output:p}=X.test(c,o,t,{glob:e,posix:i}),g={glob:e,state:a,regex:o,posix:i,input:c,output:p,match:y,isMatch:h};return typeof n.onResult=="function"&&n.onResult(g),h===!1?(g.isMatch=!1,l?g:!1):u(c)?(typeof n.onIgnore=="function"&&n.onIgnore(g),g.isMatch=!1,l?g:!1):(typeof n.onMatch=="function"&&n.onMatch(g),l?g:!0)};return r&&(f.state=a),f};X.test=(e,t,r,{glob:s,posix:n}={})=>{if(typeof e!="string")throw new TypeError("Expected input to be a string");if(e==="")return{isMatch:!1,output:""};let i=r||{},o=i.format||(n?Go.toPosixSlashes:null),a=e===s,u=a&&o?o(e):e;return a===!1&&(u=o?o(e):e,a=u===s),(a===!1||i.capture===!0)&&(i.matchBase===!0||i.basename===!0?a=X.matchBase(e,t,r,n):a=t.exec(u)),{isMatch:Boolean(a),match:a,output:u}};X.matchBase=(e,t,r,s=Go.isWindows(r))=>(t instanceof RegExp?t:X.makeRe(t,r)).test($b.basename(e));X.isMatch=(e,t,r)=>X(t,r)(e);X.parse=(e,t)=>Array.isArray(e)?e.map(r=>X.parse(r,t)):Uo(e,M(A({},t),{fastpaths:!1}));X.scan=(e,t)=>kb(e,t);X.compileRe=(e,t,r=!1,s=!1)=>{if(r===!0)return e.output;let n=t||{},i=n.contains?"":"^",o=n.contains?"":"$",a=`${i}(?:${e.output})${o}`;e&&e.negated===!0&&(a=`^(?!${a}).*$`);let u=X.toRegex(a,t);return s===!0&&(u.state=e),u};X.makeRe=(e,t={},r=!1,s=!1)=>{if(!e||typeof e!="string")throw new TypeError("Expected a non-empty string");let n={negated:!1,fastpaths:!0};return t.fastpaths!==!1&&(e[0]==="."||e[0]==="*")&&(n.output=Uo.fastpaths(e,t)),n.output||(n=Uo(e,t)),X.compileRe(n,t,r,s)};X.toRegex=(e,t)=>{try{let r=t||{};return new RegExp(e,r.flags||(r.nocase?"i":""))}catch(r){if(t&&t.debug===!0)throw r;return/$^/}};X.constants=jb;yd.exports=X});var Rd=d((xP,Ed)=>{"use strict";Ed.exports=vd()});var xd=d((wP,Cd)=>{"use strict";var Sd=require("util"),bd=td(),De=Rd(),Wo=ns(),Ad=e=>e===""||e==="./",V=(e,t,r)=>{t=[].concat(t),e=[].concat(e);let s=new Set,n=new Set,i=new Set,o=0,a=c=>{i.add(c.output),r&&r.onResult&&r.onResult(c)};for(let c=0;c<t.length;c++){let l=De(String(t[c]),M(A({},r),{onResult:a}),!0),h=l.state.negated||l.state.negatedExtglob;h&&o++;for(let y of e){let p=l(y,!0);!(h?!p.isMatch:p.isMatch)||(h?s.add(p.output):(s.delete(p.output),n.add(p.output)))}}let f=(o===t.length?[...i]:[...n]).filter(c=>!s.has(c));if(r&&f.length===0){if(r.failglob===!0)throw new Error(`No matches found for "${t.join(", ")}"`);if(r.nonull===!0||r.nullglob===!0)return r.unescape?t.map(c=>c.replace(/\\/g,"")):t}return f};V.match=V;V.matcher=(e,t)=>De(e,t);V.isMatch=(e,t,r)=>De(t,r)(e);V.any=V.isMatch;V.not=(e,t,r={})=>{t=[].concat(t).map(String);let s=new Set,n=[],i=a=>{r.onResult&&r.onResult(a),n.push(a.output)},o=new Set(V(e,t,M(A({},r),{onResult:i})));for(let a of n)o.has(a)||s.add(a);return[...s]};V.contains=(e,t,r)=>{if(typeof e!="string")throw new TypeError(`Expected a string: "${Sd.inspect(e)}"`);if(Array.isArray(t))return t.some(s=>V.contains(e,s,r));if(typeof t=="string"){if(Ad(e)||Ad(t))return!1;if(e.includes(t)||e.startsWith("./")&&e.slice(2).includes(t))return!0}return V.isMatch(e,t,M(A({},r),{contains:!0}))};V.matchKeys=(e,t,r)=>{if(!Wo.isObject(e))throw new TypeError("Expected the first argument to be an object");let s=V(Object.keys(e),t,r),n={};for(let i of s)n[i]=e[i];return n};V.some=(e,t,r)=>{let s=[].concat(e);for(let n of[].concat(t)){let i=De(String(n),r);if(s.some(o=>i(o)))return!0}return!1};V.every=(e,t,r)=>{let s=[].concat(e);for(let n of[].concat(t)){let i=De(String(n),r);if(!s.every(o=>i(o)))return!1}return!0};V.all=(e,t,r)=>{if(typeof e!="string")throw new TypeError(`Expected a string: "${Sd.inspect(e)}"`);return[].concat(t).every(s=>De(s,r)(e))};V.capture=(e,t,r)=>{let s=Wo.isWindows(r),i=De.makeRe(String(e),M(A({},r),{capture:!0})).exec(s?Wo.toPosixSlashes(t):t);if(i)return i.slice(1).map(o=>o===void 0?"":o)};V.makeRe=(...e)=>De.makeRe(...e);V.scan=(...e)=>De.scan(...e);V.parse=(e,t)=>{let r=[];for(let s of[].concat(e||[]))for(let n of bd(String(s),t))r.push(De.parse(n,t));return r};V.braces=(e,t)=>{if(typeof e!="string")throw new TypeError("Expected a string");return t&&t.nobrace===!0||!/\{.*\}/.test(e)?[e]:bd(e,t)};V.braceExpand=(e,t)=>{if(typeof e!="string")throw new TypeError("Expected a string");return V.braces(e,M(A({},t),{expand:!0}))};Cd.exports=V});var Ld=d(O=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});O.matchAny=O.convertPatternsToRe=O.makeRe=O.getPatternParts=O.expandBraceExpansion=O.expandPatternsWithBraceExpansion=O.isAffectDepthOfReadingPattern=O.endsWithSlashGlobStar=O.hasGlobStar=O.getBaseDirectory=O.isPatternRelatedToParentDirectory=O.getPatternsOutsideCurrentDirectory=O.getPatternsInsideCurrentDirectory=O.getPositivePatterns=O.getNegativePatterns=O.isPositivePattern=O.isNegativePattern=O.convertToNegativePattern=O.convertToPositivePattern=O.isDynamicPattern=O.isStaticPattern=void 0;var Bb=require("path"),Ub=yh(),Vo=xd(),wd="**",Gb="\\",Wb=/[*?]|^!/,Vb=/\[[^[]*]/,Kb=/(?:^|[^!*+?@])\([^(]*\|[^|]*\)/,Yb=/[!*+?@]\([^(]*\)/,Qb=/,|\.\./;function Td(e,t={}){return!Pd(e,t)}O.isStaticPattern=Td;function Pd(e,t={}){return e===""?!1:!!(t.caseSensitiveMatch===!1||e.includes(Gb)||Wb.test(e)||Vb.test(e)||Kb.test(e)||t.extglob!==!1&&Yb.test(e)||t.braceExpansion!==!1&&Xb(e))}O.isDynamicPattern=Pd;function Xb(e){let t=e.indexOf("{");if(t===-1)return!1;let r=e.indexOf("}",t+1);if(r===-1)return!1;let s=e.slice(t,r);return Qb.test(s)}function zb(e){return bn(e)?e.slice(1):e}O.convertToPositivePattern=zb;function Jb(e){return"!"+e}O.convertToNegativePattern=Jb;function bn(e){return e.startsWith("!")&&e[1]!=="("}O.isNegativePattern=bn;function Od(e){return!bn(e)}O.isPositivePattern=Od;function Zb(e){return e.filter(bn)}O.getNegativePatterns=Zb;function eA(e){return e.filter(Od)}O.getPositivePatterns=eA;function tA(e){return e.filter(t=>!Ko(t))}O.getPatternsInsideCurrentDirectory=tA;function rA(e){return e.filter(Ko)}O.getPatternsOutsideCurrentDirectory=rA;function Ko(e){return e.startsWith("..")||e.startsWith("./..")}O.isPatternRelatedToParentDirectory=Ko;function sA(e){return Ub(e,{flipBackslashes:!1})}O.getBaseDirectory=sA;function nA(e){return e.includes(wd)}O.hasGlobStar=nA;function Hd(e){return e.endsWith("/"+wd)}O.endsWithSlashGlobStar=Hd;function iA(e){let t=Bb.basename(e);return Hd(e)||Td(t)}O.isAffectDepthOfReadingPattern=iA;function oA(e){return e.reduce((t,r)=>t.concat(Dd(r)),[])}O.expandPatternsWithBraceExpansion=oA;function Dd(e){return Vo.braces(e,{expand:!0,nodupes:!0})}O.expandBraceExpansion=Dd;function aA(e,t){let{parts:r}=Vo.scan(e,Object.assign(Object.assign({},t),{parts:!0}));return r.length===0&&(r=[e]),r[0].startsWith("/")&&(r[0]=r[0].slice(1),r.unshift("")),r}O.getPatternParts=aA;function qd(e,t){return Vo.makeRe(e,t)}O.makeRe=qd;function uA(e,t){return e.map(r=>qd(r,t))}O.convertPatternsToRe=uA;function cA(e,t){return t.some(r=>r.test(e))}O.matchAny=cA});var Id=d(An=>{"use strict";Object.defineProperty(An,"__esModule",{value:!0});An.merge=void 0;var lA=To();function fA(e){let t=lA(e);return e.forEach(r=>{r.once("error",s=>t.emit("error",s))}),t.once("close",()=>Md(e)),t.once("end",()=>Md(e)),t}An.merge=fA;function Md(e){e.forEach(t=>t.emit("close"))}});var Nd=d(ir=>{"use strict";Object.defineProperty(ir,"__esModule",{value:!0});ir.isEmpty=ir.isString=void 0;function hA(e){return typeof e=="string"}ir.isString=hA;function dA(e){return e===""}ir.isEmpty=dA});var We=d(ae=>{"use strict";Object.defineProperty(ae,"__esModule",{value:!0});ae.string=ae.stream=ae.pattern=ae.path=ae.fs=ae.errno=ae.array=void 0;var pA=ah();ae.array=pA;var _A=uh();ae.errno=_A;var gA=lh();ae.fs=gA;var mA=fh();ae.path=mA;var yA=Ld();ae.pattern=yA;var vA=Id();ae.stream=vA;var EA=Nd();ae.string=EA});var jd=d(ue=>{"use strict";Object.defineProperty(ue,"__esModule",{value:!0});ue.convertPatternGroupToTask=ue.convertPatternGroupsToTasks=ue.groupPatternsByBaseDirectory=ue.getNegativePatternsAsPositive=ue.getPositivePatterns=ue.convertPatternsToTasks=ue.generate=void 0;var Ve=We();function RA(e,t){let r=$d(e),s=kd(e,t.ignore),n=r.filter(u=>Ve.pattern.isStaticPattern(u,t)),i=r.filter(u=>Ve.pattern.isDynamicPattern(u,t)),o=Yo(n,s,!1),a=Yo(i,s,!0);return o.concat(a)}ue.generate=RA;function Yo(e,t,r){let s=[],n=Ve.pattern.getPatternsOutsideCurrentDirectory(e),i=Ve.pattern.getPatternsInsideCurrentDirectory(e),o=Qo(n),a=Qo(i);return s.push(...Xo(o,t,r)),"."in a?s.push(zo(".",i,t,r)):s.push(...Xo(a,t,r)),s}ue.convertPatternsToTasks=Yo;function $d(e){return Ve.pattern.getPositivePatterns(e)}ue.getPositivePatterns=$d;function kd(e,t){return Ve.pattern.getNegativePatterns(e).concat(t).map(Ve.pattern.convertToPositivePattern)}ue.getNegativePatternsAsPositive=kd;function Qo(e){let t={};return e.reduce((r,s)=>{let n=Ve.pattern.getBaseDirectory(s);return n in r?r[n].push(s):r[n]=[s],r},t)}ue.groupPatternsByBaseDirectory=Qo;function Xo(e,t,r){return Object.keys(e).map(s=>zo(s,e[s],t,r))}ue.convertPatternGroupsToTasks=Xo;function zo(e,t,r,s){return{dynamic:s,positive:t,negative:r,base:e,patterns:[].concat(t,r.map(Ve.pattern.convertToNegativePattern))}}ue.convertPatternGroupToTask=zo});var Bd=d(or=>{"use strict";Object.defineProperty(or,"__esModule",{value:!0});or.removeDuplicateSlashes=or.transform=void 0;var SA=/(?!^)\/{2,}/g;function bA(e){return e.map(t=>Fd(t))}or.transform=bA;function Fd(e){return e.replace(SA,"/")}or.removeDuplicateSlashes=Fd});var Gd=d(Cn=>{"use strict";Object.defineProperty(Cn,"__esModule",{value:!0});Cn.read=void 0;function AA(e,t,r){t.fs.lstat(e,(s,n)=>{if(s!==null){Ud(r,s);return}if(!n.isSymbolicLink()||!t.followSymbolicLink){Jo(r,n);return}t.fs.stat(e,(i,o)=>{if(i!==null){if(t.throwErrorOnBrokenSymbolicLink){Ud(r,i);return}Jo(r,n);return}t.markSymbolicLink&&(o.isSymbolicLink=()=>!0),Jo(r,o)})})}Cn.read=AA;function Ud(e,t){e(t)}function Jo(e,t){e(null,t)}});var Wd=d(xn=>{"use strict";Object.defineProperty(xn,"__esModule",{value:!0});xn.read=void 0;function CA(e,t){let r=t.fs.lstatSync(e);if(!r.isSymbolicLink()||!t.followSymbolicLink)return r;try{let s=t.fs.statSync(e);return t.markSymbolicLink&&(s.isSymbolicLink=()=>!0),s}catch(s){if(!t.throwErrorOnBrokenSymbolicLink)return r;throw s}}xn.read=CA});var Vd=d(rt=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0});rt.createFileSystemAdapter=rt.FILE_SYSTEM_ADAPTER=void 0;var wn=require("fs");rt.FILE_SYSTEM_ADAPTER={lstat:wn.lstat,stat:wn.stat,lstatSync:wn.lstatSync,statSync:wn.statSync};function xA(e){return e===void 0?rt.FILE_SYSTEM_ADAPTER:Object.assign(Object.assign({},rt.FILE_SYSTEM_ADAPTER),e)}rt.createFileSystemAdapter=xA});var Yd=d(Zo=>{"use strict";Object.defineProperty(Zo,"__esModule",{value:!0});var wA=Vd(),Kd=class{constructor(t={}){this._options=t,this.followSymbolicLink=this._getValue(this._options.followSymbolicLink,!0),this.fs=wA.createFileSystemAdapter(this._options.fs),this.markSymbolicLink=this._getValue(this._options.markSymbolicLink,!1),this.throwErrorOnBrokenSymbolicLink=this._getValue(this._options.throwErrorOnBrokenSymbolicLink,!0)}_getValue(t,r){return t??r}};Zo.default=Kd});var Ht=d(st=>{"use strict";Object.defineProperty(st,"__esModule",{value:!0});st.statSync=st.stat=st.Settings=void 0;var Qd=Gd(),TA=Wd(),ea=Yd();st.Settings=ea.default;function PA(e,t,r){if(typeof t=="function"){Qd.read(e,ta(),t);return}Qd.read(e,ta(t),r)}st.stat=PA;function OA(e,t){let r=ta(t);return TA.read(e,r)}st.statSync=OA;function ta(e={}){return e instanceof ea.default?e:new ea.default(e)}});var Jd=d((kP,zd)=>{var Xd;zd.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window!="undefined"?window:global):e=>(Xd||(Xd=Promise.resolve())).then(e).catch(t=>setTimeout(()=>{throw t},0))});var ep=d((jP,Zd)=>{Zd.exports=DA;var HA=Jd();function DA(e,t){let r,s,n,i=!0;Array.isArray(e)?(r=[],s=e.length):(n=Object.keys(e),r={},s=n.length);function o(u){function f(){t&&t(u,r),t=null}i?HA(f):f()}function a(u,f,c){r[u]=c,(--s==0||f)&&o(f)}s?n?n.forEach(function(u){e[u](function(f,c){a(u,f,c)})}):e.forEach(function(u,f){u(function(c,l){a(f,c,l)})}):o(null),i=!1}});var ra=d(Pn=>{"use strict";Object.defineProperty(Pn,"__esModule",{value:!0});Pn.IS_SUPPORT_READDIR_WITH_FILE_TYPES=void 0;var Tn=process.versions.node.split(".");if(Tn[0]===void 0||Tn[1]===void 0)throw new Error(`Unexpected behavior. The 'process.versions.node' variable has invalid value: ${process.versions.node}`);var tp=Number.parseInt(Tn[0],10),qA=Number.parseInt(Tn[1],10),rp=10,LA=10,MA=tp>rp,IA=tp===rp&&qA>=LA;Pn.IS_SUPPORT_READDIR_WITH_FILE_TYPES=MA||IA});var np=d(On=>{"use strict";Object.defineProperty(On,"__esModule",{value:!0});On.createDirentFromStats=void 0;var sp=class{constructor(t,r){this.name=t,this.isBlockDevice=r.isBlockDevice.bind(r),this.isCharacterDevice=r.isCharacterDevice.bind(r),this.isDirectory=r.isDirectory.bind(r),this.isFIFO=r.isFIFO.bind(r),this.isFile=r.isFile.bind(r),this.isSocket=r.isSocket.bind(r),this.isSymbolicLink=r.isSymbolicLink.bind(r)}};function NA(e,t){return new sp(e,t)}On.createDirentFromStats=NA});var sa=d(Hn=>{"use strict";Object.defineProperty(Hn,"__esModule",{value:!0});Hn.fs=void 0;var $A=np();Hn.fs=$A});var na=d(Dn=>{"use strict";Object.defineProperty(Dn,"__esModule",{value:!0});Dn.joinPathSegments=void 0;function kA(e,t,r){return e.endsWith(r)?e+t:e+r+t}Dn.joinPathSegments=kA});var lp=d(nt=>{"use strict";Object.defineProperty(nt,"__esModule",{value:!0});nt.readdir=nt.readdirWithFileTypes=nt.read=void 0;var jA=Ht(),ip=ep(),FA=ra(),op=sa(),ap=na();function BA(e,t,r){if(!t.stats&&FA.IS_SUPPORT_READDIR_WITH_FILE_TYPES){up(e,t,r);return}cp(e,t,r)}nt.read=BA;function up(e,t,r){t.fs.readdir(e,{withFileTypes:!0},(s,n)=>{if(s!==null){qn(r,s);return}let i=n.map(a=>({dirent:a,name:a.name,path:ap.joinPathSegments(e,a.name,t.pathSegmentSeparator)}));if(!t.followSymbolicLinks){ia(r,i);return}let o=i.map(a=>UA(a,t));ip(o,(a,u)=>{if(a!==null){qn(r,a);return}ia(r,u)})})}nt.readdirWithFileTypes=up;function UA(e,t){return r=>{if(!e.dirent.isSymbolicLink()){r(null,e);return}t.fs.stat(e.path,(s,n)=>{if(s!==null){if(t.throwErrorOnBrokenSymbolicLink){r(s);return}r(null,e);return}e.dirent=op.fs.createDirentFromStats(e.name,n),r(null,e)})}}function cp(e,t,r){t.fs.readdir(e,(s,n)=>{if(s!==null){qn(r,s);return}let i=n.map(o=>{let a=ap.joinPathSegments(e,o,t.pathSegmentSeparator);return u=>{jA.stat(a,t.fsStatSettings,(f,c)=>{if(f!==null){u(f);return}let l={name:o,path:a,dirent:op.fs.createDirentFromStats(o,c)};t.stats&&(l.stats=c),u(null,l)})}});ip(i,(o,a)=>{if(o!==null){qn(r,o);return}ia(r,a)})})}nt.readdir=cp;function qn(e,t){e(t)}function ia(e,t){e(null,t)}});var _p=d(it=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0});it.readdir=it.readdirWithFileTypes=it.read=void 0;var GA=Ht(),WA=ra(),fp=sa(),hp=na();function VA(e,t){return!t.stats&&WA.IS_SUPPORT_READDIR_WITH_FILE_TYPES?dp(e,t):pp(e,t)}it.read=VA;function dp(e,t){return t.fs.readdirSync(e,{withFileTypes:!0}).map(s=>{let n={dirent:s,name:s.name,path:hp.joinPathSegments(e,s.name,t.pathSegmentSeparator)};if(n.dirent.isSymbolicLink()&&t.followSymbolicLinks)try{let i=t.fs.statSync(n.path);n.dirent=fp.fs.createDirentFromStats(n.name,i)}catch(i){if(t.throwErrorOnBrokenSymbolicLink)throw i}return n})}it.readdirWithFileTypes=dp;function pp(e,t){return t.fs.readdirSync(e).map(s=>{let n=hp.joinPathSegments(e,s,t.pathSegmentSeparator),i=GA.statSync(n,t.fsStatSettings),o={name:s,path:n,dirent:fp.fs.createDirentFromStats(s,i)};return t.stats&&(o.stats=i),o})}it.readdir=pp});var gp=d(ot=>{"use strict";Object.defineProperty(ot,"__esModule",{value:!0});ot.createFileSystemAdapter=ot.FILE_SYSTEM_ADAPTER=void 0;var ar=require("fs");ot.FILE_SYSTEM_ADAPTER={lstat:ar.lstat,stat:ar.stat,lstatSync:ar.lstatSync,statSync:ar.statSync,readdir:ar.readdir,readdirSync:ar.readdirSync};function KA(e){return e===void 0?ot.FILE_SYSTEM_ADAPTER:Object.assign(Object.assign({},ot.FILE_SYSTEM_ADAPTER),e)}ot.createFileSystemAdapter=KA});var yp=d(oa=>{"use strict";Object.defineProperty(oa,"__esModule",{value:!0});var YA=require("path"),QA=Ht(),XA=gp(),mp=class{constructor(t={}){this._options=t,this.followSymbolicLinks=this._getValue(this._options.followSymbolicLinks,!1),this.fs=XA.createFileSystemAdapter(this._options.fs),this.pathSegmentSeparator=this._getValue(this._options.pathSegmentSeparator,YA.sep),this.stats=this._getValue(this._options.stats,!1),this.throwErrorOnBrokenSymbolicLink=this._getValue(this._options.throwErrorOnBrokenSymbolicLink,!0),this.fsStatSettings=new QA.Settings({followSymbolicLink:this.followSymbolicLinks,fs:this.fs,throwErrorOnBrokenSymbolicLink:this.throwErrorOnBrokenSymbolicLink})}_getValue(t,r){return t??r}};oa.default=mp});var Ln=d(at=>{"use strict";Object.defineProperty(at,"__esModule",{value:!0});at.Settings=at.scandirSync=at.scandir=void 0;var vp=lp(),zA=_p(),aa=yp();at.Settings=aa.default;function JA(e,t,r){if(typeof t=="function"){vp.read(e,ua(),t);return}vp.read(e,ua(t),r)}at.scandir=JA;function ZA(e,t){let r=ua(t);return zA.read(e,r)}at.scandirSync=ZA;function ua(e={}){return e instanceof aa.default?e:new aa.default(e)}});var Rp=d((XP,Ep)=>{"use strict";function eC(e){var t=new e,r=t;function s(){var i=t;return i.next?t=i.next:(t=new e,r=t),i.next=null,i}function n(i){r.next=i,r=i}return{get:s,release:n}}Ep.exports=eC});var bp=d((zP,ca)=>{"use strict";var tC=Rp();function Sp(e,t,r){if(typeof e=="function"&&(r=t,t=e,e=null),r<1)throw new Error("fastqueue concurrency must be greater than 1");var s=tC(rC),n=null,i=null,o=0,a=null,u={push:g,drain:be,saturated:be,pause:c,paused:!1,concurrency:r,running:f,resume:y,idle:p,length:l,getQueue:h,unshift:E,empty:be,kill:q,killAndDrain:$,error:H};return u;function f(){return o}function c(){u.paused=!0}function l(){for(var T=n,D=0;T;)T=T.next,D++;return D}function h(){for(var T=n,D=[];T;)D.push(T.value),T=T.next;return D}function y(){if(!!u.paused){u.paused=!1;for(var T=0;T<u.concurrency;T++)o++,S()}}function p(){return o===0&&u.length()===0}function g(T,D){var w=s.get();w.context=e,w.release=S,w.value=T,w.callback=D||be,w.errorHandler=a,o===u.concurrency||u.paused?i?(i.next=w,i=w):(n=w,i=w,u.saturated()):(o++,t.call(e,w.value,w.worked))}function E(T,D){var w=s.get();w.context=e,w.release=S,w.value=T,w.callback=D||be,o===u.concurrency||u.paused?n?(w.next=n,n=w):(n=w,i=w,u.saturated()):(o++,t.call(e,w.value,w.worked))}function S(T){T&&s.release(T);var D=n;D?u.paused?o--:(i===n&&(i=null),n=D.next,D.next=null,t.call(e,D.value,D.worked),i===null&&u.empty()):--o==0&&u.drain()}function q(){n=null,i=null,u.drain=be}function $(){n=null,i=null,u.drain(),u.drain=be}function H(T){a=T}}function be(){}function rC(){this.value=null,this.callback=be,this.next=null,this.release=be,this.context=null,this.errorHandler=null;var e=this;this.worked=function(r,s){var n=e.callback,i=e.errorHandler,o=e.value;e.value=null,e.callback=be,e.errorHandler&&i(r,o),n.call(e.context,r,s),e.release(e)}}function sC(e,t,r){typeof e=="function"&&(r=t,t=e,e=null);function s(c,l){t.call(this,c).then(function(h){l(null,h)},l)}var n=Sp(e,s,r),i=n.push,o=n.unshift;return n.push=a,n.unshift=u,n.drained=f,n;function a(c){var l=new Promise(function(h,y){i(c,function(p,g){if(p){y(p);return}h(g)})});return l.catch(be),l}function u(c){var l=new Promise(function(h,y){o(c,function(p,g){if(p){y(p);return}h(g)})});return l.catch(be),l}function f(){var c=n.drain,l=new Promise(function(h){n.drain=function(){c(),h()}});return l}}ca.exports=Sp;ca.exports.promise=sC});var Mn=d(qe=>{"use strict";Object.defineProperty(qe,"__esModule",{value:!0});qe.joinPathSegments=qe.replacePathSegmentSeparator=qe.isAppliedFilter=qe.isFatalError=void 0;function nC(e,t){return e.errorFilter===null?!0:!e.errorFilter(t)}qe.isFatalError=nC;function iC(e,t){return e===null||e(t)}qe.isAppliedFilter=iC;function oC(e,t){return e.split(/[/\\]/).join(t)}qe.replacePathSegmentSeparator=oC;function aC(e,t,r){return e===""?t:e.endsWith(r)?e+t:e+r+t}qe.joinPathSegments=aC});var fa=d(la=>{"use strict";Object.defineProperty(la,"__esModule",{value:!0});var uC=Mn(),Ap=class{constructor(t,r){this._root=t,this._settings=r,this._root=uC.replacePathSegmentSeparator(t,r.pathSegmentSeparator)}};la.default=Ap});var da=d(ha=>{"use strict";Object.defineProperty(ha,"__esModule",{value:!0});var cC=require("events"),lC=Ln(),fC=bp(),In=Mn(),hC=fa(),Cp=class extends hC.default{constructor(t,r){super(t,r);this._settings=r,this._scandir=lC.scandir,this._emitter=new cC.EventEmitter,this._queue=fC(this._worker.bind(this),this._settings.concurrency),this._isFatalError=!1,this._isDestroyed=!1,this._queue.drain=()=>{this._isFatalError||this._emitter.emit("end")}}read(){return this._isFatalError=!1,this._isDestroyed=!1,setImmediate(()=>{this._pushToQueue(this._root,this._settings.basePath)}),this._emitter}get isDestroyed(){return this._isDestroyed}destroy(){if(this._isDestroyed)throw new Error("The reader is already destroyed");this._isDestroyed=!0,this._queue.killAndDrain()}onEntry(t){this._emitter.on("entry",t)}onError(t){this._emitter.once("error",t)}onEnd(t){this._emitter.once("end",t)}_pushToQueue(t,r){let s={directory:t,base:r};this._queue.push(s,n=>{n!==null&&this._handleError(n)})}_worker(t,r){this._scandir(t.directory,this._settings.fsScandirSettings,(s,n)=>{if(s!==null){r(s,void 0);return}for(let i of n)this._handleEntry(i,t.base);r(null,void 0)})}_handleError(t){this._isDestroyed||!In.isFatalError(this._settings,t)||(this._isFatalError=!0,this._isDestroyed=!0,this._emitter.emit("error",t))}_handleEntry(t,r){if(this._isDestroyed||this._isFatalError)return;let s=t.path;r!==void 0&&(t.path=In.joinPathSegments(r,t.name,this._settings.pathSegmentSeparator)),In.isAppliedFilter(this._settings.entryFilter,t)&&this._emitEntry(t),t.dirent.isDirectory()&&In.isAppliedFilter(this._settings.deepFilter,t)&&this._pushToQueue(s,r===void 0?void 0:t.path)}_emitEntry(t){this._emitter.emit("entry",t)}};ha.default=Cp});var wp=d(pa=>{"use strict";Object.defineProperty(pa,"__esModule",{value:!0});var dC=da(),xp=class{constructor(t,r){this._root=t,this._settings=r,this._reader=new dC.default(this._root,this._settings),this._storage=[]}read(t){this._reader.onError(r=>{pC(t,r)}),this._reader.onEntry(r=>{this._storage.push(r)}),this._reader.onEnd(()=>{_C(t,this._storage)}),this._reader.read()}};pa.default=xp;function pC(e,t){e(t)}function _C(e,t){e(null,t)}});var Pp=d(_a=>{"use strict";Object.defineProperty(_a,"__esModule",{value:!0});var gC=require("stream"),mC=da(),Tp=class{constructor(t,r){this._root=t,this._settings=r,this._reader=new mC.default(this._root,this._settings),this._stream=new gC.Readable({objectMode:!0,read:()=>{},destroy:()=>{this._reader.isDestroyed||this._reader.destroy()}})}read(){return this._reader.onError(t=>{this._stream.emit("error",t)}),this._reader.onEntry(t=>{this._stream.push(t)}),this._reader.onEnd(()=>{this._stream.push(null)}),this._reader.read(),this._stream}};_a.default=Tp});var Hp=d(ga=>{"use strict";Object.defineProperty(ga,"__esModule",{value:!0});var yC=Ln(),Nn=Mn(),vC=fa(),Op=class extends vC.default{constructor(){super(...arguments);this._scandir=yC.scandirSync,this._storage=[],this._queue=new Set}read(){return this._pushToQueue(this._root,this._settings.basePath),this._handleQueue(),this._storage}_pushToQueue(t,r){this._queue.add({directory:t,base:r})}_handleQueue(){for(let t of this._queue.values())this._handleDirectory(t.directory,t.base)}_handleDirectory(t,r){try{let s=this._scandir(t,this._settings.fsScandirSettings);for(let n of s)this._handleEntry(n,r)}catch(s){this._handleError(s)}}_handleError(t){if(!!Nn.isFatalError(this._settings,t))throw t}_handleEntry(t,r){let s=t.path;r!==void 0&&(t.path=Nn.joinPathSegments(r,t.name,this._settings.pathSegmentSeparator)),Nn.isAppliedFilter(this._settings.entryFilter,t)&&this._pushToStorage(t),t.dirent.isDirectory()&&Nn.isAppliedFilter(this._settings.deepFilter,t)&&this._pushToQueue(s,r===void 0?void 0:t.path)}_pushToStorage(t){this._storage.push(t)}};ga.default=Op});var qp=d(ma=>{"use strict";Object.defineProperty(ma,"__esModule",{value:!0});var EC=Hp(),Dp=class{constructor(t,r){this._root=t,this._settings=r,this._reader=new EC.default(this._root,this._settings)}read(){return this._reader.read()}};ma.default=Dp});var Mp=d(ya=>{"use strict";Object.defineProperty(ya,"__esModule",{value:!0});var RC=require("path"),SC=Ln(),Lp=class{constructor(t={}){this._options=t,this.basePath=this._getValue(this._options.basePath,void 0),this.concurrency=this._getValue(this._options.concurrency,Number.POSITIVE_INFINITY),this.deepFilter=this._getValue(this._options.deepFilter,null),this.entryFilter=this._getValue(this._options.entryFilter,null),this.errorFilter=this._getValue(this._options.errorFilter,null),this.pathSegmentSeparator=this._getValue(this._options.pathSegmentSeparator,RC.sep),this.fsScandirSettings=new SC.Settings({followSymbolicLinks:this._options.followSymbolicLinks,fs:this._options.fs,pathSegmentSeparator:this._options.pathSegmentSeparator,stats:this._options.stats,throwErrorOnBrokenSymbolicLink:this._options.throwErrorOnBrokenSymbolicLink})}_getValue(t,r){return t??r}};ya.default=Lp});var Ea=d(Le=>{"use strict";Object.defineProperty(Le,"__esModule",{value:!0});Le.Settings=Le.walkStream=Le.walkSync=Le.walk=void 0;var Ip=wp(),bC=Pp(),AC=qp(),va=Mp();Le.Settings=va.default;function CC(e,t,r){if(typeof t=="function"){new Ip.default(e,$n()).read(t);return}new Ip.default(e,$n(t)).read(r)}Le.walk=CC;function xC(e,t){let r=$n(t);return new AC.default(e,r).read()}Le.walkSync=xC;function wC(e,t){let r=$n(t);return new bC.default(e,r).read()}Le.walkStream=wC;function $n(e={}){return e instanceof va.default?e:new va.default(e)}});var Sa=d(Ra=>{"use strict";Object.defineProperty(Ra,"__esModule",{value:!0});var TC=require("path"),PC=Ht(),Np=We(),$p=class{constructor(t){this._settings=t,this._fsStatSettings=new PC.Settings({followSymbolicLink:this._settings.followSymbolicLinks,fs:this._settings.fs,throwErrorOnBrokenSymbolicLink:this._settings.followSymbolicLinks})}_getFullEntryPath(t){return TC.resolve(this._settings.cwd,t)}_makeEntry(t,r){let s={name:r,path:r,dirent:Np.fs.createDirentFromStats(r,t)};return this._settings.stats&&(s.stats=t),s}_isFatalError(t){return!Np.errno.isEnoentCodeError(t)&&!this._settings.suppressErrors}};Ra.default=$p});var Aa=d(ba=>{"use strict";Object.defineProperty(ba,"__esModule",{value:!0});var OC=require("stream"),HC=Ht(),DC=Ea(),qC=Sa(),kp=class extends qC.default{constructor(){super(...arguments);this._walkStream=DC.walkStream,this._stat=HC.stat}dynamic(t,r){return this._walkStream(t,r)}static(t,r){let s=t.map(this._getFullEntryPath,this),n=new OC.PassThrough({objectMode:!0});n._write=(i,o,a)=>this._getEntry(s[i],t[i],r).then(u=>{u!==null&&r.entryFilter(u)&&n.push(u),i===s.length-1&&n.end(),a()}).catch(a);for(let i=0;i<s.length;i++)n.write(i);return n}_getEntry(t,r,s){return this._getStat(t).then(n=>this._makeEntry(n,r)).catch(n=>{if(s.errorFilter(n))return null;throw n})}_getStat(t){return new Promise((r,s)=>{this._stat(t,this._fsStatSettings,(n,i)=>n===null?r(i):s(n))})}};ba.default=kp});var Fp=d(Ca=>{"use strict";Object.defineProperty(Ca,"__esModule",{value:!0});var ur=We(),jp=class{constructor(t,r,s){this._patterns=t,this._settings=r,this._micromatchOptions=s,this._storage=[],this._fillStorage()}_fillStorage(){let t=ur.pattern.expandPatternsWithBraceExpansion(this._patterns);for(let r of t){let s=this._getPatternSegments(r),n=this._splitSegmentsIntoSections(s);this._storage.push({complete:n.length<=1,pattern:r,segments:s,sections:n})}}_getPatternSegments(t){return ur.pattern.getPatternParts(t,this._micromatchOptions).map(s=>ur.pattern.isDynamicPattern(s,this._settings)?{dynamic:!0,pattern:s,patternRe:ur.pattern.makeRe(s,this._micromatchOptions)}:{dynamic:!1,pattern:s})}_splitSegmentsIntoSections(t){return ur.array.splitWhen(t,r=>r.dynamic&&ur.pattern.hasGlobStar(r.pattern))}};Ca.default=jp});var Up=d(xa=>{"use strict";Object.defineProperty(xa,"__esModule",{value:!0});var LC=Fp(),Bp=class extends LC.default{match(t){let r=t.split("/"),s=r.length,n=this._storage.filter(i=>!i.complete||i.segments.length>s);for(let i of n){let o=i.sections[0];if(!i.complete&&s>o.length||r.every((u,f)=>{let c=i.segments[f];return!!(c.dynamic&&c.patternRe.test(u)||!c.dynamic&&c.pattern===u)}))return!0}return!1}};xa.default=Bp});var Wp=d(wa=>{"use strict";Object.defineProperty(wa,"__esModule",{value:!0});var kn=We(),MC=Up(),Gp=class{constructor(t,r){this._settings=t,this._micromatchOptions=r}getFilter(t,r,s){let n=this._getMatcher(r),i=this._getNegativePatternsRe(s);return o=>this._filter(t,o,n,i)}_getMatcher(t){return new MC.default(t,this._settings,this._micromatchOptions)}_getNegativePatternsRe(t){let r=t.filter(kn.pattern.isAffectDepthOfReadingPattern);return kn.pattern.convertPatternsToRe(r,this._micromatchOptions)}_filter(t,r,s,n){if(this._isSkippedByDeep(t,r.path)||this._isSkippedSymbolicLink(r))return!1;let i=kn.path.removeLeadingDotSegment(r.path);return this._isSkippedByPositivePatterns(i,s)?!1:this._isSkippedByNegativePatterns(i,n)}_isSkippedByDeep(t,r){return this._settings.deep===1/0?!1:this._getEntryLevel(t,r)>=this._settings.deep}_getEntryLevel(t,r){let s=r.split("/").length;if(t==="")return s;let n=t.split("/").length;return s-n}_isSkippedSymbolicLink(t){return!this._settings.followSymbolicLinks&&t.dirent.isSymbolicLink()}_isSkippedByPositivePatterns(t,r){return!this._settings.baseNameMatch&&!r.match(t)}_isSkippedByNegativePatterns(t,r){return!kn.pattern.matchAny(t,r)}};wa.default=Gp});var Kp=d(Ta=>{"use strict";Object.defineProperty(Ta,"__esModule",{value:!0});var Dt=We(),Vp=class{constructor(t,r){this._settings=t,this._micromatchOptions=r,this.index=new Map}getFilter(t,r){let s=Dt.pattern.convertPatternsToRe(t,this._micromatchOptions),n=Dt.pattern.convertPatternsToRe(r,this._micromatchOptions);return i=>this._filter(i,s,n)}_filter(t,r,s){if(this._settings.unique&&this._isDuplicateEntry(t)||this._onlyFileFilter(t)||this._onlyDirectoryFilter(t)||this._isSkippedByAbsoluteNegativePatterns(t.path,s))return!1;let n=this._settings.baseNameMatch?t.name:t.path,i=this._isMatchToPatterns(n,r)&&!this._isMatchToPatterns(t.path,s);return this._settings.unique&&i&&this._createIndexRecord(t),i}_isDuplicateEntry(t){return this.index.has(t.path)}_createIndexRecord(t){this.index.set(t.path,void 0)}_onlyFileFilter(t){return this._settings.onlyFiles&&!t.dirent.isFile()}_onlyDirectoryFilter(t){return this._settings.onlyDirectories&&!t.dirent.isDirectory()}_isSkippedByAbsoluteNegativePatterns(t,r){if(!this._settings.absolute)return!1;let s=Dt.path.makeAbsolute(this._settings.cwd,t);return Dt.pattern.matchAny(s,r)}_isMatchToPatterns(t,r){let s=Dt.path.removeLeadingDotSegment(t);return Dt.pattern.matchAny(s,r)||Dt.pattern.matchAny(s+"/",r)}};Ta.default=Vp});var Qp=d(Pa=>{"use strict";Object.defineProperty(Pa,"__esModule",{value:!0});var IC=We(),Yp=class{constructor(t){this._settings=t}getFilter(){return t=>this._isNonFatalError(t)}_isNonFatalError(t){return IC.errno.isEnoentCodeError(t)||this._settings.suppressErrors}};Pa.default=Yp});var Jp=d(Oa=>{"use strict";Object.defineProperty(Oa,"__esModule",{value:!0});var Xp=We(),zp=class{constructor(t){this._settings=t}getTransformer(){return t=>this._transform(t)}_transform(t){let r=t.path;return this._settings.absolute&&(r=Xp.path.makeAbsolute(this._settings.cwd,r),r=Xp.path.unixify(r)),this._settings.markDirectories&&t.dirent.isDirectory()&&(r+="/"),this._settings.objectMode?Object.assign(Object.assign({},t),{path:r}):r}};Oa.default=zp});var jn=d(Ha=>{"use strict";Object.defineProperty(Ha,"__esModule",{value:!0});var NC=require("path"),$C=Wp(),kC=Kp(),jC=Qp(),FC=Jp(),Zp=class{constructor(t){this._settings=t,this.errorFilter=new jC.default(this._settings),this.entryFilter=new kC.default(this._settings,this._getMicromatchOptions()),this.deepFilter=new $C.default(this._settings,this._getMicromatchOptions()),this.entryTransformer=new FC.default(this._settings)}_getRootDirectory(t){return NC.resolve(this._settings.cwd,t.base)}_getReaderOptions(t){let r=t.base==="."?"":t.base;return{basePath:r,pathSegmentSeparator:"/",concurrency:this._settings.concurrency,deepFilter:this.deepFilter.getFilter(r,t.positive,t.negative),entryFilter:this.entryFilter.getFilter(t.positive,t.negative),errorFilter:this.errorFilter.getFilter(),followSymbolicLinks:this._settings.followSymbolicLinks,fs:this._settings.fs,stats:this._settings.stats,throwErrorOnBrokenSymbolicLink:this._settings.throwErrorOnBrokenSymbolicLink,transform:this.entryTransformer.getTransformer()}}_getMicromatchOptions(){return{dot:this._settings.dot,matchBase:this._settings.baseNameMatch,nobrace:!this._settings.braceExpansion,nocase:!this._settings.caseSensitiveMatch,noext:!this._settings.extglob,noglobstar:!this._settings.globstar,posix:!0,strictSlashes:!1}}};Ha.default=Zp});var t_=d(Da=>{"use strict";Object.defineProperty(Da,"__esModule",{value:!0});var BC=Aa(),UC=jn(),e_=class extends UC.default{constructor(){super(...arguments);this._reader=new BC.default(this._settings)}read(t){let r=this._getRootDirectory(t),s=this._getReaderOptions(t),n=[];return new Promise((i,o)=>{let a=this.api(r,t,s);a.once("error",o),a.on("data",u=>n.push(s.transform(u))),a.once("end",()=>i(n))})}api(t,r,s){return r.dynamic?this._reader.dynamic(t,s):this._reader.static(r.patterns,s)}};Da.default=e_});var s_=d(qa=>{"use strict";Object.defineProperty(qa,"__esModule",{value:!0});var GC=require("stream"),WC=Aa(),VC=jn(),r_=class extends VC.default{constructor(){super(...arguments);this._reader=new WC.default(this._settings)}read(t){let r=this._getRootDirectory(t),s=this._getReaderOptions(t),n=this.api(r,t,s),i=new GC.Readable({objectMode:!0,read:()=>{}});return n.once("error",o=>i.emit("error",o)).on("data",o=>i.emit("data",s.transform(o))).once("end",()=>i.emit("end")),i.once("close",()=>n.destroy()),i}api(t,r,s){return r.dynamic?this._reader.dynamic(t,s):this._reader.static(r.patterns,s)}};qa.default=r_});var i_=d(La=>{"use strict";Object.defineProperty(La,"__esModule",{value:!0});var KC=Ht(),YC=Ea(),QC=Sa(),n_=class extends QC.default{constructor(){super(...arguments);this._walkSync=YC.walkSync,this._statSync=KC.statSync}dynamic(t,r){return this._walkSync(t,r)}static(t,r){let s=[];for(let n of t){let i=this._getFullEntryPath(n),o=this._getEntry(i,n,r);o===null||!r.entryFilter(o)||s.push(o)}return s}_getEntry(t,r,s){try{let n=this._getStat(t);return this._makeEntry(n,r)}catch(n){if(s.errorFilter(n))return null;throw n}}_getStat(t){return this._statSync(t,this._fsStatSettings)}};La.default=n_});var a_=d(Ma=>{"use strict";Object.defineProperty(Ma,"__esModule",{value:!0});var XC=i_(),zC=jn(),o_=class extends zC.default{constructor(){super(...arguments);this._reader=new XC.default(this._settings)}read(t){let r=this._getRootDirectory(t),s=this._getReaderOptions(t);return this.api(r,t,s).map(s.transform)}api(t,r,s){return r.dynamic?this._reader.dynamic(t,s):this._reader.static(r.patterns,s)}};Ma.default=o_});var c_=d(lr=>{"use strict";Object.defineProperty(lr,"__esModule",{value:!0});lr.DEFAULT_FILE_SYSTEM_ADAPTER=void 0;var cr=require("fs"),JC=require("os"),ZC=Math.max(JC.cpus().length,1);lr.DEFAULT_FILE_SYSTEM_ADAPTER={lstat:cr.lstat,lstatSync:cr.lstatSync,stat:cr.stat,statSync:cr.statSync,readdir:cr.readdir,readdirSync:cr.readdirSync};var u_=class{constructor(t={}){this._options=t,this.absolute=this._getValue(this._options.absolute,!1),this.baseNameMatch=this._getValue(this._options.baseNameMatch,!1),this.braceExpansion=this._getValue(this._options.braceExpansion,!0),this.caseSensitiveMatch=this._getValue(this._options.caseSensitiveMatch,!0),this.concurrency=this._getValue(this._options.concurrency,ZC),this.cwd=this._getValue(this._options.cwd,process.cwd()),this.deep=this._getValue(this._options.deep,1/0),this.dot=this._getValue(this._options.dot,!1),this.extglob=this._getValue(this._options.extglob,!0),this.followSymbolicLinks=this._getValue(this._options.followSymbolicLinks,!0),this.fs=this._getFileSystemMethods(this._options.fs),this.globstar=this._getValue(this._options.globstar,!0),this.ignore=this._getValue(this._options.ignore,[]),this.markDirectories=this._getValue(this._options.markDirectories,!1),this.objectMode=this._getValue(this._options.objectMode,!1),this.onlyDirectories=this._getValue(this._options.onlyDirectories,!1),this.onlyFiles=this._getValue(this._options.onlyFiles,!0),this.stats=this._getValue(this._options.stats,!1),this.suppressErrors=this._getValue(this._options.suppressErrors,!1),this.throwErrorOnBrokenSymbolicLink=this._getValue(this._options.throwErrorOnBrokenSymbolicLink,!1),this.unique=this._getValue(this._options.unique,!0),this.onlyDirectories&&(this.onlyFiles=!1),this.stats&&(this.objectMode=!0)}_getValue(t,r){return t===void 0?r:t}_getFileSystemMethods(t={}){return Object.assign(Object.assign({},lr.DEFAULT_FILE_SYSTEM_ADAPTER),t)}};lr.default=u_});var ka=d((RO,h_)=>{"use strict";var l_=jd(),f_=Bd(),ex=t_(),tx=s_(),rx=a_(),Ia=c_(),qt=We();async function Na(e,t){fr(e);let r=$a(e,ex.default,t),s=await Promise.all(r);return qt.array.flatten(s)}(function(e){function t(o,a){fr(o);let u=$a(o,rx.default,a);return qt.array.flatten(u)}e.sync=t;function r(o,a){fr(o);let u=$a(o,tx.default,a);return qt.stream.merge(u)}e.stream=r;function s(o,a){fr(o);let u=f_.transform([].concat(o)),f=new Ia.default(a);return l_.generate(u,f)}e.generateTasks=s;function n(o,a){fr(o);let u=new Ia.default(a);return qt.pattern.isDynamicPattern(o,u)}e.isDynamicPattern=n;function i(o){return fr(o),qt.path.escape(o)}e.escapePath=i})(Na||(Na={}));function $a(e,t,r){let s=f_.transform([].concat(e)),n=new Ia.default(r),i=l_.generate(s,n),o=new t(n);return i.map(o.read,o)}function fr(e){if(![].concat(e).every(s=>qt.string.isString(s)&&!qt.string.isEmpty(s)))throw new TypeError("Patterns must be a string (non empty) or an array of strings")}h_.exports=Na});var p_=d(Lt=>{"use strict";var{promisify:sx}=require("util"),d_=require("fs");async function ja(e,t,r){if(typeof r!="string")throw new TypeError(`Expected a string, got ${typeof r}`);try{return(await sx(d_[e])(r))[t]()}catch(s){if(s.code==="ENOENT")return!1;throw s}}function Fa(e,t,r){if(typeof r!="string")throw new TypeError(`Expected a string, got ${typeof r}`);try{return d_[e](r)[t]()}catch(s){if(s.code==="ENOENT")return!1;throw s}}Lt.isFile=ja.bind(null,"stat","isFile");Lt.isDirectory=ja.bind(null,"stat","isDirectory");Lt.isSymlink=ja.bind(null,"lstat","isSymbolicLink");Lt.isFileSync=Fa.bind(null,"statSync","isFile");Lt.isDirectorySync=Fa.bind(null,"statSync","isDirectory");Lt.isSymlinkSync=Fa.bind(null,"lstatSync","isSymbolicLink")});var v_=d((bO,Ba)=>{"use strict";var Mt=require("path"),__=p_(),g_=e=>e.length>1?`{${e.join(",")}}`:e[0],m_=(e,t)=>{let r=e[0]==="!"?e.slice(1):e;return Mt.isAbsolute(r)?r:Mt.join(t,r)},nx=(e,t)=>Mt.extname(e)?`**/${e}`:`**/${e}.${g_(t)}`,y_=(e,t)=>{if(t.files&&!Array.isArray(t.files))throw new TypeError(`Expected \`files\` to be of type \`Array\` but received type \`${typeof t.files}\``);if(t.extensions&&!Array.isArray(t.extensions))throw new TypeError(`Expected \`extensions\` to be of type \`Array\` but received type \`${typeof t.extensions}\``);return t.files&&t.extensions?t.files.map(r=>Mt.posix.join(e,nx(r,t.extensions))):t.files?t.files.map(r=>Mt.posix.join(e,`**/${r}`)):t.extensions?[Mt.posix.join(e,`**/*.${g_(t.extensions)}`)]:[Mt.posix.join(e,"**")]};Ba.exports=async(e,t)=>{if(t=A({cwd:process.cwd()},t),typeof t.cwd!="string")throw new TypeError(`Expected \`cwd\` to be of type \`string\` but received type \`${typeof t.cwd}\``);let r=await Promise.all([].concat(e).map(async s=>await __.isDirectory(m_(s,t.cwd))?y_(s,t):s));return[].concat.apply([],r)};Ba.exports.sync=(e,t)=>{if(t=A({cwd:process.cwd()},t),typeof t.cwd!="string")throw new TypeError(`Expected \`cwd\` to be of type \`string\` but received type \`${typeof t.cwd}\``);let r=[].concat(e).map(s=>__.isDirectorySync(m_(s,t.cwd))?y_(s,t):s);return[].concat.apply([],r)}});var O_=d((AO,P_)=>{function E_(e){return Array.isArray(e)?e:[e]}var R_="",S_=" ",Ua="\\",ix=/^\s+$/,ox=/^\\!/,ax=/^\\#/,ux=/\r?\n/g,cx=/^\.*\/|^\.+$/,Ga="/",b_=typeof Symbol!="undefined"?Symbol.for("node-ignore"):"node-ignore",lx=(e,t,r)=>Object.defineProperty(e,t,{value:r}),fx=/([0-z])-([0-z])/g,A_=()=>!1,hx=e=>e.replace(fx,(t,r,s)=>r.charCodeAt(0)<=s.charCodeAt(0)?t:R_),dx=e=>{let{length:t}=e;return e.slice(0,t-t%2)},px=[[/\\?\s+$/,e=>e.indexOf("\\")===0?S_:R_],[/\\\s/g,()=>S_],[/[\\$.|*+(){^]/g,e=>`\\${e}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(e,t,r)=>t+6<r.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)\\\*(?=.+)/g,(e,t)=>`${t}[^\\/]*`],[/\\\\\\(?=[$.|*+(){^])/g,()=>Ua],[/\\\\/g,()=>Ua],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(e,t,r,s,n)=>t===Ua?`\\[${r}${dx(s)}${n}`:n==="]"&&s.length%2==0?`[${hx(r)}${s}]`:"[]"],[/(?:[^*])$/,e=>/\/$/.test(e)?`${e}$`:`${e}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(e,t)=>`${t?`${t}[^/]+`:"[^/]*"}(?=$|\\/$)`]],C_=Object.create(null),_x=(e,t)=>{let r=C_[e];return r||(r=px.reduce((s,n)=>s.replace(n[0],n[1].bind(e)),e),C_[e]=r),t?new RegExp(r,"i"):new RegExp(r)},Wa=e=>typeof e=="string",gx=e=>e&&Wa(e)&&!ix.test(e)&&e.indexOf("#")!==0,mx=e=>e.split(ux),x_=class{constructor(t,r,s,n){this.origin=t,this.pattern=r,this.negative=s,this.regex=n}},yx=(e,t)=>{let r=e,s=!1;e.indexOf("!")===0&&(s=!0,e=e.substr(1)),e=e.replace(ox,"!").replace(ax,"#");let n=_x(e,t);return new x_(r,e,s,n)},vx=(e,t)=>{throw new t(e)},Ke=(e,t,r)=>Wa(e)?e?Ke.isNotRelative(e)?r(`path should be a \`path.relative()\`d string, but got "${t}"`,RangeError):!0:r("path must not be empty",TypeError):r(`path must be a string, but got \`${t}\``,TypeError),w_=e=>cx.test(e);Ke.isNotRelative=w_;Ke.convert=e=>e;var T_=class{constructor({ignorecase:t=!0,ignoreCase:r=t,allowRelativePaths:s=!1}={}){lx(this,b_,!0),this._rules=[],this._ignoreCase=r,this._allowRelativePaths=s,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(t){if(t&&t[b_]){this._rules=this._rules.concat(t._rules),this._added=!0;return}if(gx(t)){let r=yx(t,this._ignoreCase);this._added=!0,this._rules.push(r)}}add(t){return this._added=!1,E_(Wa(t)?mx(t):t).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(t){return this.add(t)}_testOne(t,r){let s=!1,n=!1;return this._rules.forEach(i=>{let{negative:o}=i;if(n===o&&s!==n||o&&!s&&!n&&!r)return;i.regex.test(t)&&(s=!o,n=o)}),{ignored:s,unignored:n}}_test(t,r,s,n){let i=t&&Ke.convert(t);return Ke(i,t,this._allowRelativePaths?A_:vx),this._t(i,r,s,n)}_t(t,r,s,n){if(t in r)return r[t];if(n||(n=t.split(Ga)),n.pop(),!n.length)return r[t]=this._testOne(t,s);let i=this._t(n.join(Ga)+Ga,r,s,n);return r[t]=i.ignored?i:this._testOne(t,s)}ignores(t){return this._test(t,this._ignoreCache,!1).ignored}createFilter(){return t=>!this.ignores(t)}filter(t){return E_(t).filter(this.createFilter())}test(t){return this._test(t,this._testCache,!0)}},Fn=e=>new T_(e),Ex=e=>Ke(e&&Ke.convert(e),e,A_);Fn.isPathValid=Ex;Fn.default=Fn;P_.exports=Fn;if(typeof process!="undefined"&&(process.env&&process.env.IGNORE_TEST_WIN32||process.platform==="win32")){let e=r=>/^\\\\\?\\/.test(r)||/["<>|\u0000-\u001F]+/u.test(r)?r:r.replace(/\\/g,"/");Ke.convert=e;let t=/^[a-z]:\//i;Ke.isNotRelative=r=>t.test(r)||w_(r)}});var N_=d((CO,Va)=>{"use strict";var{promisify:Rx}=require("util"),H_=require("fs"),Ye=require("path"),D_=ka(),Sx=O_(),os=ys(),q_=["**/node_modules/**","**/flow-typed/**","**/coverage/**","**/.git"],bx=Rx(H_.readFile),Ax=e=>t=>t.startsWith("!")?"!"+Ye.posix.join(e,t.slice(1)):Ye.posix.join(e,t),Cx=(e,t)=>{let r=os(Ye.relative(t.cwd,Ye.dirname(t.fileName)));return e.split(/\r?\n/).filter(Boolean).filter(s=>!s.startsWith("#")).map(Ax(r))},L_=e=>{let t=Sx();for(let r of e)t.add(Cx(r.content,{cwd:r.cwd,fileName:r.filePath}));return t},xx=(e,t)=>{if(e=os(e),Ye.isAbsolute(t)){if(os(t).startsWith(e))return t;throw new Error(`Path ${t} is not in cwd ${e}`)}return Ye.join(e,t)},M_=(e,t)=>r=>e.ignores(os(Ye.relative(t,xx(t,r.path||r)))),wx=async(e,t)=>{let r=Ye.join(t,e),s=await bx(r,"utf8");return{cwd:t,filePath:r,content:s}},Tx=(e,t)=>{let r=Ye.join(t,e),s=H_.readFileSync(r,"utf8");return{cwd:t,filePath:r,content:s}},I_=({ignore:e=[],cwd:t=os(process.cwd())}={})=>({ignore:e,cwd:t});Va.exports=async e=>{e=I_(e);let t=await D_("**/.gitignore",{ignore:q_.concat(e.ignore),cwd:e.cwd}),r=await Promise.all(t.map(n=>wx(n,e.cwd))),s=L_(r);return M_(s,e.cwd)};Va.exports.sync=e=>{e=I_(e);let r=D_.sync("**/.gitignore",{ignore:q_.concat(e.ignore),cwd:e.cwd}).map(n=>Tx(n,e.cwd)),s=L_(r);return M_(s,e.cwd)}});var F_=d((xO,j_)=>{"use strict";var{Transform:Px}=require("stream"),Ka=class extends Px{constructor(){super({objectMode:!0})}},$_=class extends Ka{constructor(t){super();this._filter=t}_transform(t,r,s){this._filter(t)&&this.push(t),s()}},k_=class extends Ka{constructor(){super();this._pushed=new Set}_transform(t,r,s){this._pushed.has(t)||(this.push(t),this._pushed.add(t)),s()}};j_.exports={FilterStream:$_,UniqueStream:k_}});var V_=d((wO,It)=>{"use strict";var B_=require("fs"),Bn=sh(),Ox=To(),Un=ka(),Gn=v_(),Ya=N_(),{FilterStream:Hx,UniqueStream:Dx}=F_(),U_=()=>!1,G_=e=>e[0]==="!",qx=e=>{if(!e.every(t=>typeof t=="string"))throw new TypeError("Patterns must be a string or an array of strings")},Lx=(e={})=>{if(!e.cwd)return;let t;try{t=B_.statSync(e.cwd)}catch{return}if(!t.isDirectory())throw new Error("The `cwd` option must be a path to a directory")},Mx=e=>e.stats instanceof B_.Stats?e.path:e,Wn=(e,t)=>{e=Bn([].concat(e)),qx(e),Lx(t);let r=[];t=A({ignore:[],expandDirectories:!0},t);for(let[s,n]of e.entries()){if(G_(n))continue;let i=e.slice(s).filter(a=>G_(a)).map(a=>a.slice(1)),o=M(A({},t),{ignore:t.ignore.concat(i)});r.push({pattern:n,options:o})}return r},Ix=(e,t)=>{let r={};return e.options.cwd&&(r.cwd=e.options.cwd),Array.isArray(e.options.expandDirectories)?r=M(A({},r),{files:e.options.expandDirectories}):typeof e.options.expandDirectories=="object"&&(r=A(A({},r),e.options.expandDirectories)),t(e.pattern,r)},Qa=(e,t)=>e.options.expandDirectories?Ix(e,t):[e.pattern],W_=e=>e&&e.gitignore?Ya.sync({cwd:e.cwd,ignore:e.ignore}):U_,Xa=e=>t=>{let{options:r}=e;return r.ignore&&Array.isArray(r.ignore)&&r.expandDirectories&&(r.ignore=Gn.sync(r.ignore)),{pattern:t,options:r}};It.exports=async(e,t)=>{let r=Wn(e,t),s=async()=>t&&t.gitignore?Ya({cwd:t.cwd,ignore:t.ignore}):U_,n=async()=>{let u=await Promise.all(r.map(async f=>{let c=await Qa(f,Gn);return Promise.all(c.map(Xa(f)))}));return Bn(...u)},[i,o]=await Promise.all([s(),n()]),a=await Promise.all(o.map(u=>Un(u.pattern,u.options)));return Bn(...a).filter(u=>!i(Mx(u)))};It.exports.sync=(e,t)=>{let r=Wn(e,t),s=[];for(let o of r){let a=Qa(o,Gn.sync).map(Xa(o));s.push(...a)}let n=W_(t),i=[];for(let o of s)i=Bn(i,Un.sync(o.pattern,o.options));return i.filter(o=>!n(o))};It.exports.stream=(e,t)=>{let r=Wn(e,t),s=[];for(let a of r){let u=Qa(a,Gn.sync).map(Xa(a));s.push(...u)}let n=W_(t),i=new Hx(a=>!n(a)),o=new Dx;return Ox(s.map(a=>Un.stream(a.pattern,a.options))).pipe(i).pipe(o)};It.exports.generateGlobTasks=Wn;It.exports.hasMagic=(e,t)=>[].concat(e).some(r=>Un.isDynamicPattern(r,t));It.exports.gitignore=Ya});var Ja=d(Qe=>{"use strict";var as=Qe&&Qe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Qe,"__esModule",{value:!0});var Nx=as(Zs()),$x=go(),za=kt(),K_=require("path"),kx=as(lt()),jx=as(Ki()),us=J(),Fx=th(),Y_=as(ys()),Bx=as(V_());Qe.staticAssetManifest={};Qe.STATIC_ASSET_MANIFEST_FILE="static-asset-manifest.json";var Q_=class{constructor(t){if(this._routes=[],!t)throw new Error("Route group name is required!");this.name=t}match(t,r,{index:s,label:n}={}){let i=new Nx.default(t,r,{label:n});return s!=null?this._routes.splice(s,0,i):this._routes.push(i),this}dir(t,r){let s=K_.join(Fx.getSourceDir(),t),n=Qe.staticAssetManifest[Y_.default(t)]=[],{ignore:i,label:o}=r;typeof i=="string"&&(i=[i]);let a=za.isCloud()?this.staticAssetsForPath(t):Bx.default.sync(r.glob||"**/*",{cwd:s,onlyFiles:!0,ignore:i||[]});r.sort&&(a=r.sort(a));for(let u of a){let f=r.paths&&r.paths(u)||[`/${u}`];za.isCloud()||n.push(Y_.default(u));for(let c of f){let l=c.replace(/\/index.html$/,"");l.length===0&&(l="/"),this.match(l,async h=>{r.handler&&r.handler(u)(h)},{label:o})}}return this}static(t,r){let s=n=>i=>{r.handler&&r.handler(n)(i),i.serveStatic(`${t}/${n}`)};return this.dir(t,M(A({},r),{handler:s,label:`static('${t}')`}))}requireBasicAuth(t){let{route:r,username:s,password:n,realm:i="Access to the site"}=t;if(s&&n){let o=Buffer.from(`${s}:${n}`).toString("base64");r=jx.default(r),this.match(M(A({},r),{headers:M(A({},r.headers),{[us.HTTP_HEADERS.authorization]:null,[us.HTTP_HEADERS.x0MatchedRoutes]:null})}),({send:a,setResponseHeader:u})=>{u("WWW-Authenticate",`Basic realm="${i}"`),a("",401,"Unauthorized")}).match(M(A({},r),{headers:M(A({},r.headers),{[us.HTTP_HEADERS.authorization]:new RegExp(`^((?!Basic ${o}).)*$`),[us.HTTP_HEADERS.x0MatchedRoutes]:null})}),({send:a})=>{a("",403,"Forbidden")}).match(M(A({},r),{headers:M(A({},r.headers),{[us.HTTP_HEADERS.x0MatchedRoutes]:null})}),({removeRequestHeader:a})=>{a("authorization")})}return this}staticAssetsForPath(t){return kx.default(K_.join(process.cwd(),Qe.STATIC_ASSET_MANIFEST_FILE))[t]}clear(){return this._routes=[],za.isCloud()||$x.clearCache(),this}get routes(){return this._routes}get length(){return this._routes.length}};Qe.default=Q_});var z_=d(cs=>{"use strict";var Ux=cs&&cs.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(cs,"__esModule",{value:!0});var Gx=Ux(Ja()),Wx=J(),X_=class{constructor(){this.routeGroups=[]}add(t){return this.routeGroups.push(t),this}getGroups(){return this.routeGroups}findByName(t){return this.routeGroups.find(r=>r.name===t)}getRoutes(){let t=[];return this.getGroups().forEach(r=>{t=t.concat(r.routes)}),this.fallback&&(t=t.concat(this.fallback.routes)),t}setFallback(t){let r=new Gx.default(Wx.ROUTES_FALLBACK);r.match(null,t),this.fallback=r}get length(){return this.routeGroups.length}};cs.default=X_});var tg=d(Nt=>{"use strict";var we=Nt&&Nt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Vx=Nt&&Nt.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(Nt,"__esModule",{value:!0});var x=J(),J_=ei(),Kx=Mu(),Yx=we(Qu()),Qx=we(Xu()),Xx=we(_t()),zx=we(Kf()),Jx=we(Hi()),Zx=we(Yf()),Z_=we(Zf()),ew=we(eh()),tw=we(Ao()),rw=we(dn()),eg=Vx(Ja()),sw=we(z_()),nw=/\bbr\b/,iw=/\bgzip\b/,hr=class{constructor(t={excludeBuiltInRoutes:!1}){this.routeGroups=new sw.default,this.preloadRequests=new Z_.default,this.plugins=[],this.destinations={},this.nextRouterIndex=0,this._index=0,this.processRequestHeaders=r=>{r.headers[x.HTTP_HEADERS.xRequestId]||(this.newRequestId=Kx.v4(),r.headers[x.HTTP_HEADERS.xRequestId]=this.newRequestId);let s=r.headers[x.HTTP_HEADERS.acceptEncoding];if(typeof s=="string"){let o=iw.test(s),a=nw.test(s);o&&a?s=`${x.GZIP_ENCODING}, ${x.BROTLI_ENCODING}`:o?s=x.GZIP_ENCODING:a?s=x.BROTLI_ENCODING:s=null}else s=null;s?r.headers[x.HTTP_HEADERS.acceptEncoding]=s:delete r.headers[x.HTTP_HEADERS.acceptEncoding];let n=r.connection,i="127.0.0.1";if(n&&n.remoteAddress){if(i=n.remoteAddress,r.headers[x.HTTP_HEADERS.x0Protocol]!=="http"){let o=r.headers[x.HTTP_HEADERS.cookie];typeof o=="string"&&/\blocal_layer0_emulate_http_protocol=true\b/.test(o)?r.headers[x.HTTP_HEADERS.x0Protocol]="http":r.headers[x.HTTP_HEADERS.x0Protocol]="https"}}else r.headers[x.HTTP_HEADERS.x0Protocol]||(r.headers[x.HTTP_HEADERS.x0Protocol]="https");r.headers[x.HTTP_HEADERS.xForwardedFor]?r.headers[x.HTTP_HEADERS.xForwardedFor]=`${r.headers[x.HTTP_HEADERS.xForwardedFor]}, ${i}`:r.headers[x.HTTP_HEADERS.xForwardedFor]=`${i}`,r.headers[x.HTTP_HEADERS.x0ClientIp]||(r.headers[x.HTTP_HEADERS.x0ClientIp]=r.headers[x.HTTP_HEADERS.xForwardedFor].split(",")[0]),hr.isRequestFromEdge(r)||(this.processRequestDeviceHeaders(r),this.processRequestGeoHeaders(r))},this.processRequestDeviceHeaders=r=>{let s="desktop",n="generic",i=!1,o="generic",a=(r.headers[x.HTTP_HEADERS.userAgent]||"").toLowerCase();/ipad/.test(a)?(s="tablet",n="apple"):/ip(hone|od)/.test(a)?(s="smartphone",n="apple"):/android.*(mobile|mini)/.test(a)?(s="smartphone",n="android"):/android/.test(a)?(s="tablet",n="android"):/opera mobi/.test(a)?(s="smartphone",n="android"):/playbook u rim tablet/.test(a)?(s="tablet",n="blackberry"):/hp-tablet.*touchpad/.test(a)?(s="tablet",n="hp"):/kindle\/3/.test(a)?(s="tablet",n="kindle"):/mobile.+firefox/.test(a)?(s="mobile",n="firefoxos"):/^htc/.test(a)?(s="smartphone",n="htc"):/fennec/.test(a)?(s="smartphone",n="fennec"):/iemobile/.test(a)?(s="smartphone",n="microsoft"):/blackberry/.test(a)||/bb10.*mobile/.test(a)?(s="smartphone",n="blackberry"):/gt-.*build\/gingerbread/.test(a)?(s="smartphone",n="android"):/symbianos.*applewebkit/.test(a)?(s="smartphone",n="symbian"):(/symbian/.test(a)||/^sonyericsson/.test(a)||/^nokia/.test(a)||/^samsung/.test(a)||/^lg/.test(a)||/bada/.test(a)||/blazer/.test(a)||/cellphone/.test(a)||/midp-2.0/.test(a)||/u990/.test(a)||/netfront/.test(a)||/opera mini/.test(a)||/palm/.test(a)||/nintendo wii/.test(a)||/playstation portable/.test(a)||/portalmmm/.test(a)||/proxinet/.test(a)||/sonyericsson/.test(a)||/windows ?ce/.test(a)||/winwap/.test(a)||/eudoraweb/.test(a)||/240x320/.test(a)||/avantgo/.test(a))&&(s="mobile"),/bot/.test(a)||/crawler/.test(a)||/headless/.test(a)||/prerender/.test(a)||/preview/.test(a)||/scanner/.test(a)||/slurp/.test(a)||/spider/.test(a)||/(developers.google.com\/+\/web\/snippet|embedly|facebookexternalhit|flipboard|googlepagespeed|google page speed)/.test(a)||/(ia_archiver|moov-prerender-cache-exerciser|nuzzel|outbrain|pinterest|qwantify|tumblr|vkshare)/.test(a)||/(w3c_validator|whatsapp|xing-contenttabreceiver|yahoo)/.test(a)?i=!0:i=!1,/edge/.test(a)?o="edge":/chrome|chromium|crios/.test(a)?o="chrome":/firefox/.test(a)?o="firefox":/opera|opr/.test(a)?o="opera":/msie/.test(a)||/trident/.test(a)?o="msie":/safari/.test(a)&&(o="safari"),r.headers[x.HTTP_HEADERS.x0Device]=s,r.headers[x.HTTP_HEADERS.x0DeviceIsBot]=i?"1":"0",r.headers[x.HTTP_HEADERS.x0Vendor]=n,r.headers[x.HTTP_HEADERS.x0Browser]=o},this.processRequestGeoHeaders=r=>{r.headers[x.HTTP_HEADERS.x0GeoCity]="San Francisco",r.headers[x.HTTP_HEADERS.x0GeoCountryCode]="US",r.headers[x.HTTP_HEADERS.x0GeoLatitude]="37.792094",r.headers[x.HTTP_HEADERS.x0GeoLongitude]="-122.401622",r.headers[x.HTTP_HEADERS.x0GeoPostalCode]="94104"},this.isUserHeaderCountWithinLimits=r=>Object.keys(r).filter(n=>n.toLowerCase().indexOf(x.LAYER0_HEADERS_PREFIX)!==0).length<=x.LAYER0_MAX_USER_HEADERS_ALLOWED,this.patchResWriteHead=(r,s)=>{let n=s.writeHead;s.writeHead=(...i)=>{s.writeHead=n,this.newRequestId&&s.setHeader(x.HTTP_HEADERS.xRequestId,this.newRequestId);let a=i[2];if(a)for(let u of Object.keys(a))s.setHeader(u,Jx.default(r,s,a[u]));if(this.isUserHeaderCountWithinLimits(s.getHeaders())){s.writeHead(...i);return}s.writeHead(x.LAYER0_TOO_MANY_HEADERS_STATUS_CODE,"Too many response headers")}},this.run=async(r,s)=>{let n=new J_.InternalTiming(J_.InternalNames.routeMatching).start(),i=this,o=new tw.default;if(this.processRequestHeaders(r),!this.isUserHeaderCountWithinLimits(r.headers)){s.writeHead(x.LAYER0_TOO_MANY_HEADERS_STATUS_CODE,"Too many request headers"),s.end();return}if(await ew.default(r),this.patchResWriteHead(r,s),Object.keys(this.destinations).length>1){let{LAYER0_ROUTER_DESTINATION:c}=process.env,l=r.headers[x.HTTP_HEADERS.x0Destination]||c;if(l||(l=Zx.default(Object.keys(this.destinations),h=>this.destinations[h]._index)),i=this.destinations[l],!i)throw new Error(`Routing destination "${l}" not found.`)}i.plugins.forEach(c=>c.onRequest(r));let a=c=>{let l=new rw.default(r,s,c,o);return hr.isRequestFromEdge(r)?Qx.default.create(l):l},u=i.routeGroups.getRoutes().filter(c=>!c.isRespRoute()),f=i.routeGroups.getRoutes().filter(c=>c.isRespRoute());for(let c of u){let l;try{if(!c.match(r))continue;l=a(c),n.pause(),await c.handler(l);let h=await l.sendResponse({beforeResponse:async y=>{if(!hr.isRequestFromEdge(r)){n.ended&&n.resume();for(let p of f)if(!!p.matchResponse(y))return l=a(p),n.pause(),await p.handler(l),l.sendResponse(),!1}return!0}});if(n.resume(),h)return}catch(h){l=l||a(r,s,c,o),l.onRouteError(h);return}}n.end(),this.builtInFallback(r,s)},t.excludeBuiltInRoutes||Yx.default(this)}getStaticAssetManifest(){return eg.staticAssetManifest}setBackend(t,r){return Xx.default.get("backends")[t]=r,this}use(t){return t.onRegister(this),this.plugins.push(t),this}destination(t,r){return r.setIndex(this.nextRouterIndex++),this.destinations[t]=r,this}getPlugins(){let t=this.plugins;for(let r of Object.values(this.destinations))t=t.concat(r.getPlugins());return t}setIndex(t){this._index=t}get index(){return this._index}group(t,r){let s=new eg.default(t);return r(s),this.routeGroups.add(s),this}match(t,r){return this.group("root",s=>s.match(t,r))}prerender(...t){return this.preloadRequests.push(...t),this}matchMethod(t,r,s){if(typeof r=="string")return this.match({method:t,path:r},s);if(r.method)throw new Error(`Invalid criteria property method passed to call to Router#${t}. Specifying a method in the criteria is redundant.`);return this.match(M(A({},r),{method:t}),s)}head(t,r){return this.matchMethod(x.HTTP_METHODS.head,t,r)}get(t,r){return this.matchMethod(x.HTTP_METHODS.get,t,r)}post(t,r){return this.matchMethod(x.HTTP_METHODS.post,t,r)}delete(t,r){return this.matchMethod(x.HTTP_METHODS.delete,t,r)}put(t,r){return this.matchMethod(x.HTTP_METHODS.put,t,r)}patch(t,r){return this.matchMethod(x.HTTP_METHODS.patch,t,r)}options(t,r){return this.matchMethod(x.HTTP_METHODS.options,t,r)}fallback(t){return this.routeGroups.setFallback(t),this}catch(t,r){let s;return t instanceof RegExp?s=t:s=new RegExp(`^${t.toString()}$`),this.group(x.ROUTES_CATCH_GROUP,n=>n.match({headers:{"x-0-error-status-code":s},response:{statusCode:s}},async i=>{await r(i),i.cache({edge:!1,browser:{maxAgeSeconds:0}})})),this}builtInFallback(t,r){let s=t.connection;s&&s.remoteAddress?r.writeHead(404):t.headers[x.HTTP_HEADERS.x0Protocol]==="http"?(r.setHeader(x.HTTP_HEADERS.location,`https://${t.headers[x.HTTP_HEADERS.host]}${t.url}`),r.writeHead(301)):r.writeHead(404),r.end()}static(t,r={}){return this.group("root",s=>s.static(t,r))}graphqlOperation(t,r){if(typeof t=="string"||t instanceof RegExp)return this.post({path:"/graphql",body:{parse:"json",criteria:{operationName:t}}},r);{let{path:s,name:n}=t;return this.post({path:s,body:{parse:"json",criteria:{operationName:n}}},r)}}requireBasicAuth(t){return this.group("root",r=>r.requireBasicAuth(t))}createEdgeConfig(){return zx.default(this)}createPreloadConfig(){return Z_.default.resolvePreloadConfig(this)}getDestinations(){return this.destinations}getRouteGroups(){return this.routeGroups}toString(){return`Routes
======
`+this.routeGroups.getRoutes().map((t,r)=>`${r}:	${t.toString()}`).join(`
`)}static isRequestFromEdge(t){return typeof t.headers[x.HTTP_HEADERS.x0Version]=="string"}};Nt.default=hr});var sg=d(Za=>{"use strict";Object.defineProperty(Za,"__esModule",{value:!0});var rg=class{constructor(t){this.name=t}byPattern(t){this.pattern=t}toJSON(){if(!this.pattern)throw new Error("byPattern is required for group "+this.name);return{groupedValue:this.name,matchRegex:this.pattern.source}}};Za.default=rg});var ig=d(ls=>{"use strict";var ow=ls&&ls.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ls,"__esModule",{value:!0});var aw=ow(sg()),ng=class{constructor(){this.groups=[],this.name=null}group(t){let r=new aw.default(t);return this.groups.push(r),r}toJSON(){return this.groups.map(t=>t.toJSON())}};ls.default=ng});var eu=d(Ae=>{"use strict";var uw=Ae&&Ae.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ae,"__esModule",{value:!0});var og=uw(ig()),cw=Fs();Ae.CUSTOM_CACHE_KEY_ACTIONS={blacklistAll:"blacklist-all-query-parameters",blacklistSome:"blacklist-some-query-parameters",whitelistSome:"whitelist-some-query-parameters",addValue:"add-value",removeMethod:"remove-method",removeBody:"remove-body"};var Vn=class{constructor(){this.config=[],this.actions=[]}clone(){let t=new Vn;return t.actions=this.actions,t.config=this.config,t}excludeAllQueryParameters(){return this.config.push({action:Ae.CUSTOM_CACHE_KEY_ACTIONS.blacklistAll}),this.actions.push((t,r)=>{t.query={}}),this}excludeQueryParameters(...t){return this.config.push({action:Ae.CUSTOM_CACHE_KEY_ACTIONS.blacklistSome,names:t}),this.actions.push((r,s)=>{for(let n of t)delete r.query[n]}),this}excludeAllQueryParametersExcept(...t){return this.config.push({action:Ae.CUSTOM_CACHE_KEY_ACTIONS.whitelistSome,names:t}),this.actions.push((r,s)=>{let n=new Set(t);for(let i in r.query)n.has(i)||delete r.query[i]}),this}addHeader(t,r){return this.actions.push((s,n)=>{let i=n.headers[t];Array.isArray(i)||(i=[i]),r?s.headers[t]=this.createGroupedValue(r,i):s.headers[t]=i}),this.addValue(`\${req:${t}}`,r)}removeMethod(){return this.actions.push((t,r)=>{t.method=void 0}),this.config.push({action:Ae.CUSTOM_CACHE_KEY_ACTIONS.removeMethod}),this}removeBody(){return this.actions.push((t,r)=>{t.body=void 0}),this.config.push({action:Ae.CUSTOM_CACHE_KEY_ACTIONS.removeBody}),this}createGroupedValue(t,r){let s=new og.default,n=[];t(s);let i=this.findMatchingGroup(s,r);return i?n.push(i):n.push(...r),n}findMatchingGroup(t,r){var s;for(let n of t.groups)for(let i of r)if((s=n.pattern)===null||s===void 0?void 0:s.test(i))return n.name}addDevice(){return this.addHeader("x-0-device")}addVendor(){return this.addHeader("x-0-vendor")}addIsBot(){return this.addHeader("x-0-device-is-bot")}addBrowser(){return this.addHeader("x-0-browser")}addCookie(t,r){return this.actions.push((s,n)=>{let i=n.headers.cookie||"";Array.isArray(i)&&(i=i.join(";"));let a=cw.parse(i)[t];r?s.cookies[t]=this.createGroupedValue(r,[a]):s.cookies[t]=a}),this.addValue(`\${req:cookie:${t}}`,r)}addValue(t,r){let s={action:Ae.CUSTOM_CACHE_KEY_ACTIONS.addValue,value:t};if(r!=null){let n=new og.default;r(n),s.groups=n.toJSON()}return this.config.push(s),this}getActions(){return this.actions}toJSON(){return this.config}};Ae.default=Vn});var ug=d(fs=>{"use strict";function ag(e){for(var t in e)fs.hasOwnProperty(t)||(fs[t]=e[t])}Object.defineProperty(fs,"__esModule",{value:!0});ag(tu());ag(J());var lw=_t();fs.config=lw.default});var lg=d(ru=>{"use strict";Object.defineProperty(ru,"__esModule",{value:!0});var cg=ug();function fw(e,t={onConflict:"merge"}){return async r=>{let s=e(hw(r.body));if(!Array.isArray(s)){console.warn(`The function provided to deriveSurrogateKeysFromJson should return an array, but returned a value of type "${typeof s}" instead. Surrogate keys will not be set.`);return}let n=new Set(s);if(t.onConflict==="merge"){let i=r.getHeader(cg.HTTP_HEADERS.x0SurrogateKey);if(i!=null){Array.isArray(i)||(i=[i]);for(let o of i)for(let a of o.split(" "))n.add(a)}}else if(t.onConflict!=="override")throw new Error(`invalid value "${t.onConflict}" for onConflict option in deriveSurrogateKeysFromJson. Use "override" or "merge".`);n.size>0&&r.setHeader(cg.HTTP_HEADERS.x0SurrogateKey,Array.from(n).join(" "))}}ru.default=fw;function hw(e){if(!!e)try{return JSON.parse(typeof e=="string"?e:e.toString("utf8"))}catch{return}}});var fg=d(hs=>{"use strict";var dw=hs&&hs.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(hs,"__esModule",{value:!0});var pw=dw(eu());function _w(){return new pw.default}hs.default=_w});var tu=d($t=>{"use strict";Object.defineProperty($t,"__esModule",{value:!0});var gw=tg();$t.Router=gw.default;var mw=eu();$t.CustomCacheKey=mw.default;var yw=dn();$t.ResponseWriter=yw.default;var vw=lg();$t.deriveSurrogateKeysFromJson=vw.default;var Ew=fg();$t.createCustomCacheKey=Ew.default});Rg(exports,{default:()=>Rw});var hg=bg(tu()),Rw=new hg.Router().fallback(({proxy:e})=>e("origin"));0&&(module.exports={});
/*!
 * Array of passes.
 *
 * A `pass` is just a function that is executed on `req, res, options`
 * so that you can easily add new checks while still keeping the base
 * flexible.
 */
/*!
 * Array of passes.
 *
 * A `pass` is just a function that is executed on `req, socket, options`
 * so that you can easily add new checks while still keeping the base
 * flexible.
 */
/*!
 * Caron dimonio, con occhi di bragia
 * loro accennando, tutte le raccoglie;
 * batte col remo qualunque s’adagia 
 *
 * Charon the demon, with the eyes of glede,
 * Beckoning to them, collects them all together,
 * Beats with his oar whoever lags behind
 *          
 *          Dante - The Divine Comedy (Canto III)
 */
/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */
/*!
 * fill-range <https://github.com/jonschlinkert/fill-range>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Licensed under the MIT License.
 */
/*!
 * is-extglob <https://github.com/jonschlinkert/is-extglob>
 *
 * Copyright (c) 2014-2016, Jon Schlinkert.
 * Licensed under the MIT License.
 */
/*!
 * is-glob <https://github.com/jonschlinkert/is-glob>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
/*!
 * is-number <https://github.com/jonschlinkert/is-number>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Released under the MIT License.
 */
/*!
 * to-regex-range <https://github.com/micromatch/to-regex-range>
 *
 * Copyright (c) 2015-present, Jon Schlinkert.
 * Released under the MIT License.
 */
/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! run-parallel. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
//# sourceMappingURL=routes.js.map
